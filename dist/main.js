(()=>{"use strict";var t=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.dotRaw=function(t,e,n,i){return t*n+e*i},t.dot=function(t,e){return this.dotRaw(t.x,t.y,e.x,e.y)},t.prototype.dot=function(e){return t.dot(this,e)},t.crossRaw=function(t,e,n,i){return t*i-n*e},t.cross=function(t,e){return this.crossRaw(t.x,t.y,e.x,e.y)},t.prototype.cross=function(e){return t.cross(this,e)},t.lenRaw=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},t.len=function(t){return this.lenRaw(t.x,t.y)},t.prototype.len=function(){return t.len(this)},t.normalizeRaw=function(t,e,n){void 0===n&&(n=1);var i=n/this.lenRaw(t,e);return this.mulRaw(t,e,i)},t.normalize=function(t,e){return void 0===e&&(e=1),this.normalizeRaw(t.x,t.y,e)},t.prototype.normalize=function(e){return void 0===e&&(e=1),t.normalize(this,e)},t.equalsRaw=function(t,e,n,i){return t===n&&e===i},t.equals=function(t,e){return this.equalsRaw(t.x,t.y,e.x,e.y)},t.prototype.equals=function(e){return t.equals(this,e)},t.addRaw=function(e,n,i,r){return new t(e+i,n+r)},t.add=function(t,e){return this.addRaw(t.x,t.y,e.x,e.y)},t.prototype.add=function(e){return t.add(this,e)},t.subRaw=function(e,n,i,r){return new t(e-i,n-r)},t.sub=function(t,e){return this.subRaw(t.x,t.y,e.x,e.y)},t.prototype.sub=function(e){return t.sub(this,e)},t.mulRaw=function(e,n,i){return new t(e*i,n*i)},t.mul=function(t,e){return this.mulRaw(t.x,t.y,e)},t.prototype.mul=function(e){return t.mul(this,e)},t.intersectionTimesRaw=function(e,n,i,r,o,s,u,c){var h=this.crossRaw(i-e,r-n,u-o,c-s);return new t(this.crossRaw(u-o,c-s,e-o,n-s)/h,this.crossRaw(i-e,r-n,e-o,n-s)/h)},t.intersectionTimes=function(t,e,n,i){return this.intersectionTimesRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersectionTimes=function(e,n,i){return t.intersectionTimes(this,e,n,i)},t.intersectionRaw=function(t,e,n,i,r,o,s,u){var c=this.intersectionTimesRaw(t,e,n,i,r,o,s,u);if(c)return c.y=e+(i-e)*c.x,c.x=t+(n-t)*c.x,c},t.intersection=function(t,e,n,i){return this.intersectionRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersection=function(e,n,i){return t.intersection(this,e,n,i)},t.prototype.angle=function(t){if(t){var e=this.angle(),n=t.angle();return n<e?n+2*Math.PI-e:n-e}return this.y>0?Math.acos(this.x/this.len()):2*Math.PI-Math.acos(this.x/this.len())},t}(),e=function(){function e(e,n,i,r){this.v1=new t(e,n),this.v2=new t(i,r)}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.v1.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.v1.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.v2.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.v2.y},enumerable:!1,configurable:!0}),e.prototype.len=function(){return this.v2.sub(this.v1).len()},e.prototype.pointAt=function(t){return this.v1.add(this.v2.sub(this.v1).mul(t))},e.prototype.before=function(t){return this.v1.add(this.v2.sub(this.v1).mul(-t/this.len()))},e.prototype.after=function(t){return this.v1.add(this.v2.sub(this.v1).mul((this.len()+t)/this.len()))},e.prototype.intersectionTimesWith=function(t){return this.v1.intersectionTimes(this.v2,t.v1,t.v2)},e.prototype.update=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.v1.x+=t,this.v1.y+=e,this.v2.x+=n,this.v2.y+=i},e}(),n=function(){function t(t){void 0===t&&(t=[]),this.vertices=t}return t.prototype.areaBetween=function(t,e){return(this.vertices[e].x-this.vertices[t].x)*(this.vertices[t].y+this.vertices[e].y)/2},t.prototype.area=function(){for(var t=0,e=this.vertices.length-1,n=0;n<this.vertices.length;n++)t+=this.areaBetween(e,n),e=n;return t},t.prototype.shareEdge=function(t,e){for(var n=this.vertices.length-1,i=0;i<this.vertices.length;i++){if(this.vertices[n].equals(t)&&this.vertices[i].equals(e))return!0;n=i}return!1},t.prototype.intersectionWith=function(t){},t.prototype.reverse=function(){this.vertices.reverse()},t.prototype.toString=function(){return this.vertices.length+" points: "+this.vertices.map((function(t){return"("+t.x.toFixed()+", "+t.y.toFixed()+")"})).join(", ")},t}(),i=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,r++)i[r]=o[s];return i},r=function(){function t(t){var n,i,r,o,s=this;this.renderer=t,this.lines=[],this.intersectionTimes=[],this.intersectionPoints=[],this.renderer.setMouseDownHandler((function(t,r,o){i=o||null,(n=r||null)||(n=new e(t.clientX,t.clientY,t.clientX,t.clientY),i=n.v2,s.addLine(n))})),this.renderer.setMouseUpHandler((function(t,e,u){e?(r&&r!==e&&s.renderer.drawLine(r,e===o,!1),r=e,s.renderer.drawLine(r,e===o,!0)):r&&s.renderer.drawLine(r,e===o,!1),n=null,i=null})),this.renderer.setMouseMoveHandler((function(t,e,u){e?(o&&o!==e&&s.renderer.drawLine(o,!1,e===r),o=e,s.renderer.drawLine(o,!0,e===r)):o&&(s.renderer.drawLine(o,!1,e===r),o=null),n&&(i?(i.x=t.clientX,i.y=t.clientY):n.update(t.movementX,t.movementY,t.movementX,t.movementY),s.updateIntersectionTimes(n),s.renderer.drawLine(n,n===o,n===r))})),document.addEventListener("keyup",(function(t){" "===t.key&&s.renderIntersections()}))}return t.prototype.addLine=function(t){this.addIntersectionTimes(t),this.lines.push(t),this.renderer.drawLine(t,!1,!1)},t.prototype.addIntersectionTimes=function(t){for(var e,n=[],i=[],r=0;r<this.lines.length;r++)e=this.lines[r].intersectionTimesWith(t),this.intersectionTimes[r].push(e.x),this.intersectionPoints[r].push(0<=e.x&&e.x<=1&&0<=e.y&&e.y<=1?this.lines[r].v1.add(this.lines[r].v2.sub(this.lines[r].v1).mul(e.x)):null),n.push(e.y),i.push(null);n.push(NaN),i.push(null),this.intersectionTimes.push(n),this.intersectionPoints.push(i),this.renderIntersections()},t.prototype.updateIntersectionTimes=function(t){for(var e,n=this.lines.indexOf(t),i=0;i<this.lines.length;i++)i!==n&&(e=this.lines[i].intersectionTimesWith(t),this.intersectionTimes[i][n]=e.x,this.intersectionTimes[n][i]=e.y,i<n?this.intersectionPoints[i][n]=0<=e.x&&e.x<=1&&0<=e.y&&e.y<=1?this.lines[i].v1.add(this.lines[i].v2.sub(this.lines[i].v1).mul(e.x)):null:this.intersectionPoints[n][i]=0<=e.x&&e.x<=1&&0<=e.y&&e.y<=1?this.lines[i].v1.add(this.lines[i].v2.sub(this.lines[i].v1).mul(e.x)):null);this.renderIntersections()},t.prototype.renderIntersections=function(){var t=this;this.renderer.clearIntersections(),this.intersectionPoints.forEach((function(e){e.forEach((function(e){e&&t.renderer.drawPoint(e)}))})),this.renderer.clearPolygons(),this.buildPolygonsFromIntersectionTimes().forEach((function(e){return t.renderer.drawPolygon(e)}))},t.prototype.testSide=function(t,e,n){return e.sub(t).cross(n.sub(t))>0},t.prototype.partialsAreConnected=function(t,e){return t.vertices[t.vertices.length-2].equals(e.vertices[0])&&t.vertices[t.vertices.length-1].equals(e.vertices[1])},t.prototype.buildPolygonsFromIntersectionTimes=function(){for(var t,e=this,r=this.intersectionTimes.map((function(t,n){return t.map((function(t,e){return e})).filter((function(i){return!isNaN(t[i])&&0<=t[i]&&t[i]<=1&&!isNaN(e.intersectionTimes[i][n])&&0<=e.intersectionTimes[i][n]&&e.intersectionTimes[i][n]<=1})).sort((function(e,n){return t[e]-t[n]}))})),o=[],s=function(t){for(var e=0;e<r[t].length;e++){var i=r[t][e];if(t<i)for(var s=u.lines[t].pointAt(u.intersectionTimes[t][r[t][e]]),c=e-1,h=e+1,a=r[i].findIndex((function(e){return e===t})),l=a-1,p=a+1,d=0<e?u.lines[t].pointAt(u.intersectionTimes[t][r[t][c]]):null,v=e<r[t].length-1?u.lines[t].pointAt(u.intersectionTimes[t][r[t][h]]):null,f=0<a?u.lines[i].pointAt(u.intersectionTimes[i][r[i][l]]):null,y=[d,a<r[i].length-1?u.lines[i].pointAt(u.intersectionTimes[i][r[i][p]]):null,v,f],m=0;m<y.length;m++)if(y[m]){var g=m+1;for(g===y.length&&(g=0);!y[g];)++g===y.length&&(g=0);m!==g&&(4===y.filter((function(t){return!!t})).length&&console.log("push"),o.push(new n([y[m],s,y[g]])))}}},u=this,c=0;c<r.length;c++)s(c);o.forEach((function(t){t.area()<0&&t.reverse()})),console.log("partials",o);for(var h=0;h<o.length;){for(var a=0;a<o.length;a++)if(h!==a&&this.partialsAreConnected(o[h],o[a])){(t=o[h].vertices).splice.apply(t,i([-2,2],o[a].vertices)),o.splice(a,1),h=-1;break}h++}return console.log("incomplete polygons"),o.map((function(t){return console.log(t.toString())})),console.log("polygons",[]),o},t}(),o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("stroke","black"),o.setAttribute("stroke-width","0.4px");var s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("stroke-dasharray","10, 4, 1, 4");var u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d","M 0, 0A 10, 10, 0, 0, 0, -5, -5A 10, 10, 0, 1, 1, 5, -5A 10, 10, 0, 0, 0, 0, 0"),u.setAttribute("fill","white"),o.appendChild(s),o.appendChild(u),o.appendChild(u.cloneNode());var c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("fill","green"),c.setAttribute("r","3");var h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("fill","green"),h.setAttribute("fill-opacity","0.7"),h.setAttribute("stroke-width","3"),h.setAttribute("stroke","grey");var a=new(function(){function t(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.intersectionContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.polygonContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svgGByLine=new Map,this.lineBySvgG=new Map,this.svg.appendChild(this.intersectionContainer),this.svg.appendChild(this.polygonContainer)}return t.prototype.clickHandlerWrapper=function(t){var e=this;return function(n){var i=document.elementFromPoint(n.clientX,n.clientY),r=e.lineBySvgG.get(i.parentNode);i instanceof SVGPathElement&&i.parentNode!==e.polygonContainer?i.parentNode.children[1]===i?t(n,r,r.v1):t(n,r,r.v2):i instanceof SVGLineElement?t(n,r):t(n)}},t.prototype.setMouseDownHandler=function(t){this.onMouseDown&&this.svg.removeEventListener("mousedown",this.onMouseDown),this.onMouseDown=this.clickHandlerWrapper(t),this.svg.addEventListener("mousedown",this.onMouseDown)},t.prototype.setMouseUpHandler=function(t){this.onMouseUp&&this.svg.removeEventListener("mouseup",this.onMouseUp),this.onMouseUp=this.clickHandlerWrapper(t),this.svg.addEventListener("mouseup",this.onMouseUp)},t.prototype.setMouseMoveHandler=function(t){this.onMouseMove&&this.svg.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=this.clickHandlerWrapper(t),this.svg.addEventListener("mousemove",this.onMouseMove)},t.prototype.drawLine=function(t,e,n){var i;void 0===e&&(e=!1),void 0===n&&(n=!1),this.svgGByLine.has(t)?i=this.svgGByLine.get(t):(i=o.cloneNode(!0),this.svg.appendChild(i),this.svgGByLine.set(t,i),this.lineBySvgG.set(i,t));var r=i.children[0],s=i.children[1],u=i.children[2],c=t.x1.toFixed(),h=t.y1.toFixed(),a=t.x2.toFixed(),l=t.y2.toFixed();r.setAttribute("x1",c),r.setAttribute("y1",h),r.setAttribute("x2",a),r.setAttribute("y2",l),e?i.setAttribute("stroke-width","0.8px"):i.setAttribute("stroke-width","0.4px"),n?i.setAttribute("stroke","#19a194"):i.setAttribute("stroke","black");var p=180*(t.v2.sub(t.v1).angle()-Math.PI/2)/Math.PI;s.setAttribute("transform","translate("+c+", "+h+") rotate("+(isNaN(p)?0:p)+")"),u.setAttribute("transform","translate("+a+", "+l+") rotate("+(isNaN(p)?0:180+p)+")")},t.prototype.eraseLine=function(t){var e=this.svgGByLine.get(t);e&&(this.svg.removeChild(e),this.svgGByLine.delete(t))},t.prototype.drawPoint=function(t){var e=c.cloneNode();e.setAttribute("cx",t.x.toFixed()),e.setAttribute("cy",t.y.toFixed()),this.intersectionContainer.appendChild(e)},t.prototype.clearContainer=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},t.prototype.clearIntersections=function(){this.clearContainer(this.intersectionContainer)},t.prototype.drawPolygon=function(t){var e=h.cloneNode();e.setAttribute("d","M"+t.vertices.map((function(t){return t.x+" "+t.y})).join(" L ")+"Z"),e.setAttribute("fill","#"+Math.floor(16777215*Math.random()).toString(16)),this.polygonContainer.appendChild(e)},t.prototype.clearPolygons=function(){this.clearContainer(this.polygonContainer)},t}());new r(a),document.querySelector("body").appendChild(a.svg)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3ZlY3RvcjIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9saW5lLnRzIiwid2VicGFjazovL3BvbHBsb3QvLi9zcmMvcG9seWdvbi50cyIsIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3BvbHBsb3QudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9zdmctcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJ4IiwieSIsImRvdFJhdyIsIngxIiwieTEiLCJ4MiIsInkyIiwiZG90IiwidSIsInYiLCJ0aGlzIiwib3RoZXIiLCJWZWN0b3IyIiwiY3Jvc3NSYXciLCJjcm9zcyIsImxlblJhdyIsIk1hdGgiLCJzcXJ0IiwicG93IiwibGVuIiwibm9ybWFsaXplUmF3IiwiYnkiLCJjb2VmIiwibXVsUmF3Iiwibm9ybWFsaXplIiwiZXF1YWxzUmF3IiwiZXF1YWxzIiwiYWRkUmF3IiwiYWRkIiwic3ViUmF3Iiwic3ViIiwibXVsIiwiaW50ZXJzZWN0aW9uVGltZXNSYXciLCJmeCIsImZ5IiwidHgiLCJ0eSIsInN4Iiwic3kiLCJleCIsImV5IiwiZGV0IiwiaW50ZXJzZWN0aW9uVGltZXMiLCJmcm9tIiwidG8iLCJzdGFydCIsImVuZCIsImludGVyc2VjdGlvblJhdyIsInRpbWVzIiwiaW50ZXJzZWN0aW9uIiwiYW5nbGUiLCJhMSIsImEyIiwiUEkiLCJhY29zIiwidjEiLCJ2MiIsInBvaW50QXQiLCJ0IiwiYmVmb3JlIiwiYWZ0ZXIiLCJpbnRlcnNlY3Rpb25UaW1lc1dpdGgiLCJ1cGRhdGUiLCJkeDEiLCJkeTEiLCJkeDIiLCJkeTIiLCJ2ZXJ0aWNlcyIsImFyZWFCZXR3ZWVuIiwiaSIsImoiLCJhcmVhIiwiYSIsImxlbmd0aCIsInNoYXJlRWRnZSIsImludGVyc2VjdGlvbldpdGgiLCJsaW5lIiwicmV2ZXJzZSIsInRvU3RyaW5nIiwibWFwIiwidG9GaXhlZCIsImpvaW4iLCJyZW5kZXJlciIsImRyYWdnZWRMaW5lIiwiZHJhZ2dlZFZlY3RvcjIiLCJzZWxlY3RlZExpbmUiLCJob3ZlcmVkTGluZSIsImxpbmVzIiwiaW50ZXJzZWN0aW9uUG9pbnRzIiwic2V0TW91c2VEb3duSGFuZGxlciIsImV2ZW50IiwiY2xpY2tlZExpbmUiLCJjbGlja2VkVmVjdG9yMiIsIkxpbmUiLCJjbGllbnRYIiwiY2xpZW50WSIsImFkZExpbmUiLCJzZXRNb3VzZVVwSGFuZGxlciIsImRyYXdMaW5lIiwic2V0TW91c2VNb3ZlSGFuZGxlciIsIm1vdmVtZW50WCIsIm1vdmVtZW50WSIsInVwZGF0ZUludGVyc2VjdGlvblRpbWVzIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwia2V5IiwicmVuZGVySW50ZXJzZWN0aW9ucyIsImFkZEludGVyc2VjdGlvblRpbWVzIiwicHVzaCIsIk5hTiIsImluZGV4IiwiaW5kZXhPZiIsImNsZWFySW50ZXJzZWN0aW9ucyIsImZvckVhY2giLCJpbnRlcnNlY3Rpb25Qb2ludCIsImRyYXdQb2ludCIsImNsZWFyUG9seWdvbnMiLCJidWlsZFBvbHlnb25zRnJvbUludGVyc2VjdGlvblRpbWVzIiwicG9seWdvbiIsImRyYXdQb2x5Z29uIiwidGVzdFNpZGUiLCJ3IiwicGFydGlhbHNBcmVDb25uZWN0ZWQiLCJwMSIsInAyIiwiaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5IiwiXyIsImZpbHRlciIsImlzTmFOIiwic29ydCIsInBhcnRpYWxzIiwibG9jYWxJbmRleCIsImxvY2FsSW50ZXJJbmRleCIsImZvcmVpZ25JbmRleCIsImxvY2FsSW50ZXIiLCJwcmV2TG9jYWxJbnRlckluZGV4IiwibmV4dExvY2FsSW50ZXJJbmRleCIsImZvcmVpZ25JbnRlckluZGV4IiwiZmluZEluZGV4IiwicHJldkZvcmVpZ25JbnRlckluZGV4IiwibmV4dEZvcmVpZ25JbnRlckluZGV4IiwicHJldkxvY2FsSW50ZXIiLCJuZXh0TG9jYWxJbnRlciIsInByZXZGb3JlaWduSW50ZXIiLCJwb2ludHMiLCJwIiwiY29uc29sZSIsImxvZyIsIlBvbHlnb24iLCJzcGxpY2UiLCJnVGVtcGxhdGUiLCJjcmVhdGVFbGVtZW50TlMiLCJzZXRBdHRyaWJ1dGUiLCJsaW5lVGVtcGxhdGUiLCJhbmNob3JUZW1wbGF0ZSIsImFwcGVuZENoaWxkIiwiY2xvbmVOb2RlIiwicG9pbnRUZW1wbGF0ZSIsInBvbHlnb25UZW1wbGF0ZSIsInN2Z1JlbmRlcmVyIiwic3ZnIiwiaW50ZXJzZWN0aW9uQ29udGFpbmVyIiwicG9seWdvbkNvbnRhaW5lciIsInN2Z0dCeUxpbmUiLCJNYXAiLCJsaW5lQnlTdmdHIiwiY2xpY2tIYW5kbGVyV3JhcHBlciIsImNsaWNrSGFuZGxlciIsImVsZW1lbnRBdCIsImVsZW1lbnRGcm9tUG9pbnQiLCJnZXQiLCJwYXJlbnROb2RlIiwiU1ZHUGF0aEVsZW1lbnQiLCJjaGlsZHJlbiIsIlNWR0xpbmVFbGVtZW50Iiwib25Nb3VzZURvd24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib25Nb3VzZVVwIiwib25Nb3VzZU1vdmUiLCJpc0hvdmVyZWQiLCJpc1NlbGVjdGVkIiwic3ZnRyIsImhhcyIsInNldCIsInN2Z0xpbmUiLCJzdmdQYXRoQW5jaG9yU3RhcnQiLCJzdmdQYXRoQW5jaG9yRW5kIiwiZXJhc2VMaW5lIiwicmVtb3ZlQ2hpbGQiLCJkZWxldGUiLCJwb2ludCIsInN2Z0NpcmNsZSIsImNsZWFyQ29udGFpbmVyIiwiY29udGFpbmVyIiwiZmlyc3RDaGlsZCIsInN2Z1BhdGgiLCJmbG9vciIsInJhbmRvbSIsIlBvbFBsb3QiLCJxdWVyeVNlbGVjdG9yIl0sIm1hcHBpbmdzIjoibUJBQUEsaUJBQ0UsV0FBbUJBLEVBQWNDLFFBQWQsSUFBQUQsTUFBQSxRQUFjLElBQUFDLE1BQUEsR0FBZCxLQUFBRCxJQUFjLEtBQUFDLElBNEhuQyxPQTNIUyxFQUFBQyxPQUFQLFNBQWNDLEVBQVlDLEVBQVlDLEVBQVlDLEdBQ2hELE9BQU9ILEVBQUtFLEVB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R0FDUixJQUFNeUcsRUFBTzNLLEtBQUt5SixXQUFXTyxJQUFJOUYsR0FDN0J5RyxJQUNGM0ssS0FBS3NKLElBQUk0QixZQUFZUCxHQUNyQjNLLEtBQUt5SixXQUFXMEIsT0FBT2pILEtBRzNCLFlBQUF1QyxVQUFBLFNBQVUyRSxHQUNSLElBQU1DLEVBQVlsQyxFQUFjRCxZQUNoQ21DLEVBQVV2QyxhQUFhLEtBQU1zQyxFQUFNOUwsRUFBRWdGLFdBQ3JDK0csRUFBVXZDLGFBQWEsS0FBTXNDLEVBQU03TCxFQUFFK0UsV0FDckN0RSxLQUFLdUosc0JBQXNCTixZQUFZb0MsSUFFakMsWUFBQUMsZUFBUixTQUF1QkMsR0FDckIsS0FBT0EsRUFBVUMsWUFDZkQsRUFBVUwsWUFBWUssRUFBVUMsYUFHcEMsWUFBQWxGLG1CQUFBLFdBQ0V0RyxLQUFLc0wsZUFBZXRMLEtBQUt1Six3QkFFM0IsWUFBQTFDLFlBQUEsU0FBWUQsR0FDVixJQUFNNkUsRUFBVXJDLEVBQWdCRixZQUNoQ3VDLEVBQVEzQyxhQUFhLElBQUssSUFBTWxDLEVBQVFuRCxTQUFTWSxLQUFJLFNBQUF0RSxHQUFLLE9BQUdBLEVBQUVULEVBQUMsSUFBSVMsRUFBRVIsS0FBS2dGLEtBQUssT0FBUyxLQUN6RmtILEVBQVEzQyxhQUFhLE9BQVEsSUFBT3hJLEtBQUtvTCxNQUFNLFNBQVdwTCxLQUFLcUwsVUFBV3ZILFNBQVMsS0FDbkZwRSxLQUFLd0osaUJBQWlCUCxZQUFZd0MsSUFFcEMsWUFBQS9FLGNBQUEsV0FDRTFHLEtBQUtzTCxlQUFldEwsS0FBS3dKLG1CQUU3QixFQXBIQSxJQ2hDZ0IsSUFBSW9DLEVBQVF2QyxHQUNmeEQsU0FBU2dHLGNBQWMsUUFDL0I1QyxZQUFZSSxFQUFZQyxNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgVmVjdG9yMiB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB4ID0gMCwgcHVibGljIHkgPSAwKSB7fVxuICBzdGF0aWMgZG90UmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB4MSAqIHgyICsgeTEgKiB5MjtcbiAgfVxuICBzdGF0aWMgZG90KHU6IFZlY3RvcjIsIHY6IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmRvdFJhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIGRvdChvdGhlcjogVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIFZlY3RvcjIuZG90KHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgY3Jvc3NSYXcoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHgxICogeTIgLSB4MiAqIHkxO1xuICB9XG4gIHN0YXRpYyBjcm9zcyh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jcm9zc1Jhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIGNyb3NzKG90aGVyOiBWZWN0b3IyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5jcm9zcyh0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIGxlblJhdyh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh4LCAyKSArIE1hdGgucG93KHksIDIpKTtcbiAgfVxuICBzdGF0aWMgbGVuKHU6IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmxlblJhdyh1LngsIHUueSk7XG4gIH1cbiAgbGVuKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIFZlY3RvcjIubGVuKHRoaXMpO1xuICB9XG4gIHN0YXRpYyBub3JtYWxpemVSYXcoeDogbnVtYmVyLCB5OiBudW1iZXIsIGJ5OiBudW1iZXIgPSAxKTogVmVjdG9yMiB7XG4gICAgY29uc3QgY29lZiA9IGJ5IC8gdGhpcy5sZW5SYXcoeCwgeSk7XG4gICAgcmV0dXJuIHRoaXMubXVsUmF3KHgsIHksIGNvZWYpO1xuICB9XG4gIHN0YXRpYyBub3JtYWxpemUodTogVmVjdG9yMiwgYnk6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5ub3JtYWxpemVSYXcodS54LCB1LnksIGJ5KTtcbiAgfVxuICBub3JtYWxpemUoYnk6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5ub3JtYWxpemUodGhpcywgYnkpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHNSYXcoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB4MSA9PT0geDIgJiYgeTEgPT09IHkyO1xuICB9XG4gIHN0YXRpYyBlcXVhbHModTogVmVjdG9yMiwgdjogVmVjdG9yMik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmVxdWFsc1Jhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIGVxdWFscyhvdGhlcjogVmVjdG9yMik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBWZWN0b3IyLmVxdWFscyh0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIGFkZFJhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHgxICsgeDIsIHkxICsgeTIpO1xuICB9XG4gIHN0YXRpYyBhZGQodTogVmVjdG9yMiwgdjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLmFkZFJhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIGFkZChvdGhlcjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiBWZWN0b3IyLmFkZCh0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIHN1YlJhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHgxIC0geDIsIHkxIC0geTIpO1xuICB9XG4gIHN0YXRpYyBzdWIodTogVmVjdG9yMiwgdjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLnN1YlJhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIHN1YihvdGhlcjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiBWZWN0b3IyLnN1Yih0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIG11bFJhdyh4OiBudW1iZXIsIHk6IG51bWJlciwgYnk6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiBuZXcgVmVjdG9yMih4ICogYnksIHkgKiBieSk7XG4gIH1cbiAgc3RhdGljIG11bCh1OiBWZWN0b3IyLCBieTogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMubXVsUmF3KHUueCwgdS55LCBieSk7XG4gIH1cbiAgbXVsKGJ5OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5tdWwodGhpcywgYnkpO1xuICB9XG4gIHN0YXRpYyBpbnRlcnNlY3Rpb25UaW1lc1JhdyhcbiAgICBmeDogbnVtYmVyLCBmeTogbnVtYmVyLCB0eDogbnVtYmVyLCB0eTogbnVtYmVyLFxuICAgIHN4OiBudW1iZXIsIHN5OiBudW1iZXIsIGV4OiBudW1iZXIsIGV5OiBudW1iZXJcbiAgKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZGV0ID0gdGhpcy5jcm9zc1Jhdyh0eCAtIGZ4LCB0eSAtIGZ5LCBleCAtIHN4LCBleSAtIHN5KTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoXG4gICAgICB0aGlzLmNyb3NzUmF3KGV4IC0gc3gsIGV5IC0gc3ksIGZ4IC0gc3gsIGZ5IC0gc3kpIC8gZGV0LFxuICAgICAgdGhpcy5jcm9zc1Jhdyh0eCAtIGZ4LCB0eSAtIGZ5LCBmeCAtIHN4LCBmeSAtIHN5KSAvIGRldFxuICAgICk7XG4gIH1cbiAgc3RhdGljIGludGVyc2VjdGlvblRpbWVzKFxuICAgIGZyb206IFZlY3RvcjIsIHRvOiBWZWN0b3IyLCBzdGFydDogVmVjdG9yMiwgZW5kOiBWZWN0b3IyXG4gICk6IFZlY3RvcjIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmludGVyc2VjdGlvblRpbWVzUmF3KGZyb20ueCwgZnJvbS55LCB0by54LCB0by55LCBzdGFydC54LCBzdGFydC55LCBlbmQueCwgZW5kLnkpO1xuICB9XG4gIGludGVyc2VjdGlvblRpbWVzKHRvOiBWZWN0b3IyLCBzdGFydDogVmVjdG9yMiwgZW5kOiBWZWN0b3IyKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIFZlY3RvcjIuaW50ZXJzZWN0aW9uVGltZXModGhpcywgdG8sIHN0YXJ0LCBlbmQpO1xuICB9XG4gIHN0YXRpYyBpbnRlcnNlY3Rpb25SYXcoXG4gICAgZng6IG51bWJlciwgZnk6IG51bWJlciwgdHg6IG51bWJlciwgdHk6IG51bWJlcixcbiAgICBzeDogbnVtYmVyLCBzeTogbnVtYmVyLCBleDogbnVtYmVyLCBleTogbnVtYmVyXG4gICk6IFZlY3RvcjIgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHRpbWVzID0gdGhpcy5pbnRlcnNlY3Rpb25UaW1lc1JhdyhmeCwgZnksIHR4LCB0eSwgc3gsIHN5LCBleCwgZXkpO1xuICAgIGlmICh0aW1lcykge1xuICAgICAgdGltZXMueSA9IGZ5ICsgKHR5IC0gZnkpICogdGltZXMueDtcbiAgICAgIHRpbWVzLnggPSBmeCArICh0eCAtIGZ4KSAqIHRpbWVzLng7XG4gICAgICByZXR1cm4gdGltZXM7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBpbnRlcnNlY3Rpb24oZnJvbTogVmVjdG9yMiwgdG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjIpOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3Rpb25SYXcoZnJvbS54LCBmcm9tLnksIHRvLngsIHRvLnksIHN0YXJ0LngsIHN0YXJ0LnksIGVuZC54LCBlbmQueSk7XG4gIH1cbiAgaW50ZXJzZWN0aW9uKHRvOiBWZWN0b3IyLCBzdGFydDogVmVjdG9yMiwgZW5kOiBWZWN0b3IyKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIFZlY3RvcjIuaW50ZXJzZWN0aW9uKHRoaXMsIHRvLCBzdGFydCwgZW5kKTtcbiAgfVxuICBhbmdsZShvdGhlcj86IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIGlmIChvdGhlcikge1xuICAgICAgIGNvbnN0IGExID0gdGhpcy5hbmdsZSgpO1xuICAgICAgIGNvbnN0IGEyID0gb3RoZXIuYW5nbGUoKTtcbiAgICAgICBpZiAoYTIgPCBhMSkge1xuICAgICAgICByZXR1cm4gYTIgKyAyICogTWF0aC5QSSAtIGExO1xuICAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhMiAtIGExO1xuICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMueSA+IDApIHtcbiAgICAgIHJldHVybiBNYXRoLmFjb3ModGhpcy54IC8gdGhpcy5sZW4oKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAyICogTWF0aC5QSSAtIE1hdGguYWNvcyh0aGlzLnggLyB0aGlzLmxlbigpKTtcbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xuXG5leHBvcnQgY2xhc3MgTGluZSB7XG4gIHYxOiBWZWN0b3IyO1xuICB2MjogVmVjdG9yMjtcbiAgY29uc3RydWN0b3IoXG4gICAgeDE/OiBudW1iZXIsXG4gICAgeTE/OiBudW1iZXIsXG4gICAgeDI/OiBudW1iZXIsXG4gICAgeTI/OiBudW1iZXJcbiAgKSB7XG4gICAgdGhpcy52MSA9IG5ldyBWZWN0b3IyKHgxLCB5MSk7XG4gICAgdGhpcy52MiA9IG5ldyBWZWN0b3IyKHgyLCB5Mik7XG4gIH1cbiAgZ2V0IHgxKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudjEueDtcbiAgfVxuICBnZXQgeTEoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52MS55O1xuICB9XG4gIGdldCB4MigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnYyLng7XG4gIH1cbiAgZ2V0IHkyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudjIueTtcbiAgfVxuICBsZW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52Mi5zdWIodGhpcy52MSkubGVuKCk7XG4gIH1cbiAgcG9pbnRBdCh0OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy52MS5hZGQodGhpcy52Mi5zdWIodGhpcy52MSkubXVsKHQpKTtcbiAgfVxuICBiZWZvcmUodDogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMudjEuYWRkKHRoaXMudjIuc3ViKHRoaXMudjEpLm11bCgtdCAvIHRoaXMubGVuKCkpKTtcbiAgfVxuICBhZnRlcih0OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy52MS5hZGQodGhpcy52Mi5zdWIodGhpcy52MSkubXVsKCh0aGlzLmxlbigpICsgdCkgLyB0aGlzLmxlbigpKSk7XG4gIH1cbiAgaW50ZXJzZWN0aW9uVGltZXNXaXRoKG90aGVyOiBMaW5lKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMudjEuaW50ZXJzZWN0aW9uVGltZXModGhpcy52Miwgb3RoZXIudjEsIG90aGVyLnYyKTtcbiAgfVxuICB1cGRhdGUoZHgxID0gMCwgZHkxID0gMCwgZHgyID0gMCwgZHkyID0gMCk6IHZvaWQge1xuICAgIHRoaXMudjEueCArPSBkeDE7XG4gICAgdGhpcy52MS55ICs9IGR5MTtcbiAgICB0aGlzLnYyLnggKz0gZHgyO1xuICAgIHRoaXMudjIueSArPSBkeTI7XG4gIH1cbn0iLCJpbXBvcnQgeyBMaW5lIH0gZnJvbSBcIi4vbGluZVwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlY3RvcjJcIjtcblxuZXhwb3J0IGNsYXNzIFBvbHlnb24ge1xuICBjb25zdHJ1Y3RvcihyZWFkb25seSB2ZXJ0aWNlczogVmVjdG9yMltdID0gW10pIHtcblxuICB9XG4gIHByaXZhdGUgYXJlYUJldHdlZW4oaTogbnVtYmVyLCBqOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAodGhpcy52ZXJ0aWNlc1tqXS54IC0gdGhpcy52ZXJ0aWNlc1tpXS54KSAqICh0aGlzLnZlcnRpY2VzW2ldLnkgKyB0aGlzLnZlcnRpY2VzW2pdLnkpIC8gMjtcbiAgfVxuICBhcmVhKCk6IG51bWJlciB7XG4gICAgbGV0IGEgPSAwO1xuICAgIGxldCBpID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGggLSAxO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGorKykge1xuICAgICAgYSArPSB0aGlzLmFyZWFCZXR3ZWVuKGksIGopO1xuICAgICAgaSA9IGo7XG4gICAgfVxuICAgIHJldHVybiBhO1xuICB9XG4gIHNoYXJlRWRnZSh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgbGV0IGkgPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAtIDE7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAodGhpcy52ZXJ0aWNlc1tpXS5lcXVhbHModSkgJiYgdGhpcy52ZXJ0aWNlc1tqXS5lcXVhbHModikpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpID0gajtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGludGVyc2VjdGlvbldpdGgobGluZTogTGluZSkge1xuICAgIFxuICB9XG4gIHJldmVyc2UoKTogdm9pZCB7XG4gICAgdGhpcy52ZXJ0aWNlcy5yZXZlcnNlKCk7XG4gIH1cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy52ZXJ0aWNlcy5sZW5ndGh9IHBvaW50czogYCArIHRoaXMudmVydGljZXMubWFwKHYgPT4gYCgke3YueC50b0ZpeGVkKCl9LCAke3YueS50b0ZpeGVkKCl9KWApLmpvaW4oJywgJyk7XG4gIH1cbn0iLCJpbXBvcnQgeyBQb2xwbG90UmVuZGVyZXIgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3BvbHBsb3QtcmVuZGVyZXJcIjtcbmltcG9ydCB7IExpbmUgfSBmcm9tIFwiLi9saW5lXCI7XG5pbXBvcnQgeyBQb2x5Z29uIH0gZnJvbSBcIi4vcG9seWdvblwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlY3RvcjJcIjtcblxuZXhwb3J0IGNsYXNzIFBvbFBsb3Qge1xuICBsaW5lczogTGluZVtdID0gW107XG4gIGludGVyc2VjdGlvblRpbWVzOiBudW1iZXJbXVtdID0gW107XG4gIGludGVyc2VjdGlvblBvaW50czogVmVjdG9yMltdW10gPSBbXTtcbiAgY29uc3RydWN0b3IocmVhZG9ubHkgcmVuZGVyZXI6IFBvbHBsb3RSZW5kZXJlcikge1xuICAgIGxldCBkcmFnZ2VkTGluZTogTGluZTtcbiAgICBsZXQgZHJhZ2dlZFZlY3RvcjI6IFZlY3RvcjI7XG5cbiAgICB0aGlzLnJlbmRlcmVyLnNldE1vdXNlRG93bkhhbmRsZXIoKGV2ZW50LCBjbGlja2VkTGluZSwgY2xpY2tlZFZlY3RvcjIpID0+IHtcbiAgICAgIGRyYWdnZWRMaW5lID0gY2xpY2tlZExpbmUgfHwgbnVsbDtcbiAgICAgIGRyYWdnZWRWZWN0b3IyID0gY2xpY2tlZFZlY3RvcjIgfHwgbnVsbDtcbiAgICAgIGlmICghZHJhZ2dlZExpbmUpIHtcbiAgICAgICAgZHJhZ2dlZExpbmUgPSBuZXcgTGluZShldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZLCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICAgICAgZHJhZ2dlZFZlY3RvcjIgPSBkcmFnZ2VkTGluZS52MjtcbiAgICAgICAgdGhpcy5hZGRMaW5lKGRyYWdnZWRMaW5lKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxldCBzZWxlY3RlZExpbmU6IExpbmU7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRNb3VzZVVwSGFuZGxlcigoZXZlbnQsIGNsaWNrZWRMaW5lLCBjbGlja2VkVmVjdG9yMikgPT4ge1xuICAgICAgaWYgKGNsaWNrZWRMaW5lKSB7XG4gICAgICAgIGlmIChzZWxlY3RlZExpbmUgJiYgc2VsZWN0ZWRMaW5lICE9PSBjbGlja2VkTGluZSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoc2VsZWN0ZWRMaW5lLCBjbGlja2VkTGluZSA9PT0gaG92ZXJlZExpbmUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxlY3RlZExpbmUgPSBjbGlja2VkTGluZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShzZWxlY3RlZExpbmUsIGNsaWNrZWRMaW5lID09PSBob3ZlcmVkTGluZSwgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkTGluZSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKHNlbGVjdGVkTGluZSwgY2xpY2tlZExpbmUgPT09IGhvdmVyZWRMaW5lLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBkcmFnZ2VkTGluZSA9IG51bGw7XG4gICAgICBkcmFnZ2VkVmVjdG9yMiA9IG51bGw7XG4gICAgfSk7XG5cbiAgICBsZXQgaG92ZXJlZExpbmU6IExpbmU7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRNb3VzZU1vdmVIYW5kbGVyKChldmVudCwgY2xpY2tlZExpbmUsIGNsaWNrZWRWZWN0b3IyKSA9PiB7XG4gICAgICBpZiAoY2xpY2tlZExpbmUpIHtcbiAgICAgICAgaWYgKGhvdmVyZWRMaW5lICYmIGhvdmVyZWRMaW5lICE9PSBjbGlja2VkTGluZSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoaG92ZXJlZExpbmUsIGZhbHNlLCBjbGlja2VkTGluZSA9PT0gc2VsZWN0ZWRMaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBob3ZlcmVkTGluZSA9IGNsaWNrZWRMaW5lO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKGhvdmVyZWRMaW5lLCB0cnVlLCBjbGlja2VkTGluZSA9PT0gc2VsZWN0ZWRMaW5lKTsgXG4gICAgICB9IGVsc2UgaWYgKGhvdmVyZWRMaW5lKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoaG92ZXJlZExpbmUsIGZhbHNlLCBjbGlja2VkTGluZSA9PT0gc2VsZWN0ZWRMaW5lKTtcbiAgICAgICAgaG92ZXJlZExpbmUgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGRyYWdnZWRMaW5lKSB7XG4gICAgICAgIGlmIChkcmFnZ2VkVmVjdG9yMikge1xuICAgICAgICAgIGRyYWdnZWRWZWN0b3IyLnggPSBldmVudC5jbGllbnRYO1xuICAgICAgICAgIGRyYWdnZWRWZWN0b3IyLnkgPSBldmVudC5jbGllbnRZO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRyYWdnZWRMaW5lLnVwZGF0ZShldmVudC5tb3ZlbWVudFgsIGV2ZW50Lm1vdmVtZW50WSwgZXZlbnQubW92ZW1lbnRYLCBldmVudC5tb3ZlbWVudFkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJzZWN0aW9uVGltZXMoZHJhZ2dlZExpbmUpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKGRyYWdnZWRMaW5lLCBkcmFnZ2VkTGluZSA9PT0gaG92ZXJlZExpbmUsIGRyYWdnZWRMaW5lID09PSBzZWxlY3RlZExpbmUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZXZlbnQgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJyAnKSB7XG4gICAgICAgIHRoaXMucmVuZGVySW50ZXJzZWN0aW9ucygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGFkZExpbmUobGluZTogTGluZSk6IHZvaWQge1xuICAgIHRoaXMuYWRkSW50ZXJzZWN0aW9uVGltZXMobGluZSk7XG4gICAgdGhpcy5saW5lcy5wdXNoKGxpbmUpO1xuICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUobGluZSwgZmFsc2UsIGZhbHNlKTtcbiAgfVxuICBhZGRJbnRlcnNlY3Rpb25UaW1lcyhsaW5lOiBMaW5lKTogdm9pZCB7XG4gICAgY29uc3QgaW50ZXJzZWN0aW9uVGltZXM6IG51bWJlcltdID0gW107XG4gICAgY29uc3QgaW50ZXJzZWN0aW9uUG9pbnRzOiBWZWN0b3IyW10gPSBbXTtcbiAgICBsZXQgdGltZXM6IFZlY3RvcjI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aW1lcyA9IHRoaXMubGluZXNbaV0uaW50ZXJzZWN0aW9uVGltZXNXaXRoKGxpbmUpO1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UaW1lc1tpXS5wdXNoKHRpbWVzLngpO1xuICAgICAgdGhpcy5pbnRlcnNlY3Rpb25Qb2ludHNbaV0ucHVzaChcbiAgICAgICAgMCA8PSB0aW1lcy54ICYmIHRpbWVzLnggPD0gMSAmJiAwIDw9IHRpbWVzLnkgJiYgdGltZXMueSA8PSAxXG4gICAgICAgICAgPyB0aGlzLmxpbmVzW2ldLnYxLmFkZCh0aGlzLmxpbmVzW2ldLnYyLnN1Yih0aGlzLmxpbmVzW2ldLnYxKS5tdWwodGltZXMueCkpXG4gICAgICAgICAgOiBudWxsXG4gICAgICApO1xuICAgICAgaW50ZXJzZWN0aW9uVGltZXMucHVzaCh0aW1lcy55KTtcbiAgICAgIGludGVyc2VjdGlvblBvaW50cy5wdXNoKG51bGwpO1xuICAgIH1cbiAgICBpbnRlcnNlY3Rpb25UaW1lcy5wdXNoKE5hTik7XG4gICAgaW50ZXJzZWN0aW9uUG9pbnRzLnB1c2gobnVsbCk7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25UaW1lcy5wdXNoKGludGVyc2VjdGlvblRpbWVzKTtcbiAgICB0aGlzLmludGVyc2VjdGlvblBvaW50cy5wdXNoKGludGVyc2VjdGlvblBvaW50cyk7XG4gICAgdGhpcy5yZW5kZXJJbnRlcnNlY3Rpb25zKCk7XG4gIH1cbiAgdXBkYXRlSW50ZXJzZWN0aW9uVGltZXMobGluZTogTGluZSk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5saW5lcy5pbmRleE9mKGxpbmUpO1xuICAgIGxldCB0aW1lczogVmVjdG9yMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpICE9PSBpbmRleCkge1xuICAgICAgICB0aW1lcyA9IHRoaXMubGluZXNbaV0uaW50ZXJzZWN0aW9uVGltZXNXaXRoKGxpbmUpO1xuICAgICAgICB0aGlzLmludGVyc2VjdGlvblRpbWVzW2ldW2luZGV4XSA9IHRpbWVzLng7XG4gICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGltZXNbaW5kZXhdW2ldID0gdGltZXMueTtcbiAgICAgICAgaWYgKGkgPCBpbmRleCkge1xuICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uUG9pbnRzW2ldW2luZGV4XSA9IDAgPD0gdGltZXMueCAmJiB0aW1lcy54IDw9IDEgJiYgMCA8PSB0aW1lcy55ICYmIHRpbWVzLnkgPD0gMVxuICAgICAgICAgICAgPyB0aGlzLmxpbmVzW2ldLnYxLmFkZCh0aGlzLmxpbmVzW2ldLnYyLnN1Yih0aGlzLmxpbmVzW2ldLnYxKS5tdWwodGltZXMueCkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25Qb2ludHNbaW5kZXhdW2ldID0gMCA8PSB0aW1lcy54ICYmIHRpbWVzLnggPD0gMSAmJiAwIDw9IHRpbWVzLnkgJiYgdGltZXMueSA8PSAxXG4gICAgICAgICAgICA/IHRoaXMubGluZXNbaV0udjEuYWRkKHRoaXMubGluZXNbaV0udjIuc3ViKHRoaXMubGluZXNbaV0udjEpLm11bCh0aW1lcy54KSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlckludGVyc2VjdGlvbnMoKTtcbiAgfVxuICByZW5kZXJJbnRlcnNlY3Rpb25zKCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyZXIuY2xlYXJJbnRlcnNlY3Rpb25zKCk7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25Qb2ludHMuZm9yRWFjaChpbnRlcnNlY3Rpb25Qb2ludHMgPT4ge1xuICAgICAgaW50ZXJzZWN0aW9uUG9pbnRzLmZvckVhY2goaW50ZXJzZWN0aW9uUG9pbnQgPT4ge1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUG9pbnQpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdQb2ludChpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMucmVuZGVyZXIuY2xlYXJQb2x5Z29ucygpO1xuICAgIHRoaXMuYnVpbGRQb2x5Z29uc0Zyb21JbnRlcnNlY3Rpb25UaW1lcygpXG4gICAgICAuZm9yRWFjaChwb2x5Z29uID0+IHRoaXMucmVuZGVyZXIuZHJhd1BvbHlnb24ocG9seWdvbikpO1xuICB9XG4gIHRlc3RTaWRlKHU6IFZlY3RvcjIsIHY6IFZlY3RvcjIsIHc6IFZlY3RvcjIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdi5zdWIodSkuY3Jvc3Mody5zdWIodSkpID4gMDtcbiAgfVxuICBwYXJ0aWFsc0FyZUNvbm5lY3RlZChwMTogUG9seWdvbiwgcDI6IFBvbHlnb24pOiBib29sZWFuIHtcbiAgICByZXR1cm4gcDEudmVydGljZXNbcDEudmVydGljZXMubGVuZ3RoIC0gMl0uZXF1YWxzKHAyLnZlcnRpY2VzWzBdKSAmJlxuICAgICAgICAgICBwMS52ZXJ0aWNlc1twMS52ZXJ0aWNlcy5sZW5ndGggLSAxXS5lcXVhbHMocDIudmVydGljZXNbMV0pO1xuICB9XG4gIGJ1aWxkUG9seWdvbnNGcm9tSW50ZXJzZWN0aW9uVGltZXMoKTogUG9seWdvbltdIHtcbiAgICAvLyBjb25zb2xlLmxvZygnYnVpbGRQb2x5Z29uc0Zyb21JbnRlcnNlY3Rpb25UaW1lcycpO1xuICAgIC8vIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7XG4gICAgLy8gY29uc29sZS5sb2coJ2xpbmVzLmxlbmd0aCA9ICcsIHRoaXMubGluZXMubGVuZ3RoKTtcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXkgPSB0aGlzLmludGVyc2VjdGlvblRpbWVzXG4gICAgICAubWFwKChpbnRlcnNlY3Rpb25UaW1lcywgaSkgPT4ge1xuICAgICAgICByZXR1cm4gaW50ZXJzZWN0aW9uVGltZXNcbiAgICAgICAgICAubWFwKChfLCBqKSA9PiBqKVxuICAgICAgICAgIC5maWx0ZXIoaiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIWlzTmFOKGludGVyc2VjdGlvblRpbWVzW2pdKSAmJiAwIDw9IGludGVyc2VjdGlvblRpbWVzW2pdICYmIGludGVyc2VjdGlvblRpbWVzW2pdIDw9IDEgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKHRoaXMuaW50ZXJzZWN0aW9uVGltZXNbal1baV0pICYmIDAgPD0gdGhpcy5pbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSAmJiB0aGlzLmludGVyc2VjdGlvblRpbWVzW2pdW2ldIDw9IDE7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuc29ydCgoaSwgaikgPT4gaW50ZXJzZWN0aW9uVGltZXNbaV0gLSBpbnRlcnNlY3Rpb25UaW1lc1tqXSk7XG4gICAgICB9KTtcbiAgICBjb25zdCBwYXJ0aWFsczogUG9seWdvbltdID0gW107XG4gICAgZm9yIChsZXQgbG9jYWxJbmRleCA9IDA7IGxvY2FsSW5kZXggPCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXkubGVuZ3RoOyBsb2NhbEluZGV4KyspIHtcbiAgICAgIGZvciAobGV0IGxvY2FsSW50ZXJJbmRleCA9IDA7IGxvY2FsSW50ZXJJbmRleCA8IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XS5sZW5ndGg7IGxvY2FsSW50ZXJJbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IGZvcmVpZ25JbmRleCA9IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XVtsb2NhbEludGVySW5kZXhdO1xuICAgICAgICBpZiAobG9jYWxJbmRleCA8IGZvcmVpZ25JbmRleCkge1xuICAgICAgICAgIGNvbnN0IGxvY2FsSW50ZXIgPSB0aGlzLmxpbmVzW2xvY2FsSW5kZXhdLnBvaW50QXQodGhpcy5pbnRlcnNlY3Rpb25UaW1lc1tsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bbG9jYWxJbnRlckluZGV4XV0pO1xuICAgICAgICAgIGNvbnN0IHByZXZMb2NhbEludGVySW5kZXggPSBsb2NhbEludGVySW5kZXggLSAxO1xuICAgICAgICAgIGNvbnN0IG5leHRMb2NhbEludGVySW5kZXggPSBsb2NhbEludGVySW5kZXggKyAxO1xuICAgICAgICAgIGNvbnN0IGZvcmVpZ25JbnRlckluZGV4ID0gaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF0uZmluZEluZGV4KGkgPT4gaSA9PT0gbG9jYWxJbmRleCk7XG4gICAgICAgICAgY29uc3QgcHJldkZvcmVpZ25JbnRlckluZGV4ID0gZm9yZWlnbkludGVySW5kZXggLSAxO1xuICAgICAgICAgIGNvbnN0IG5leHRGb3JlaWduSW50ZXJJbmRleCA9IGZvcmVpZ25JbnRlckluZGV4ICsgMTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgXG4gICAgICAgICAgLy8gICBsb2NhbEluZGV4OiAke2xvY2FsSW5kZXh9XG4gICAgICAgICAgLy8gICBsb2NhbEludGVyc2VjdGlvbnMgJHtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1cbiAgICAgICAgICAvLyAgICAgLm1hcCgoXywgaSkgPT4gaSA9PT0gbG9jYWxJbnRlckluZGV4ID8gYFske199XWAgOiBfKVxuICAgICAgICAgIC8vICAgICAuam9pbignLCAnKX1cbiAgICAgICAgICAvLyAgIGZvcmVpZ25JbmRleDogJHtmb3JlaWduSW5kZXh9XG4gICAgICAgICAgLy8gICBmb3JlaWduSW50ZXJzZWN0aW9ucyAke2ludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtmb3JlaWduSW5kZXhdXG4gICAgICAgICAgLy8gICAgIC5tYXAoKF8sIGkpID0+IGkgPT09IGZvcmVpZ25JbnRlckluZGV4ID8gYFske199XWAgOiBfKVxuICAgICAgICAgIC8vICAgICAuam9pbignLCAnKX1cbiAgICAgICAgICAvLyBgKTtcbiAgICAgICAgICBjb25zdCBwcmV2TG9jYWxJbnRlciA9IDAgPCBsb2NhbEludGVySW5kZXhcbiAgICAgICAgICAgID8gdGhpcy5saW5lc1tsb2NhbEluZGV4XS5wb2ludEF0KHRoaXMuaW50ZXJzZWN0aW9uVGltZXNbbG9jYWxJbmRleF1baW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2xvY2FsSW5kZXhdW3ByZXZMb2NhbEludGVySW5kZXhdXSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICBjb25zdCBuZXh0TG9jYWxJbnRlciA9IGxvY2FsSW50ZXJJbmRleCA8IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XS5sZW5ndGggLSAxXG4gICAgICAgICAgICA/IHRoaXMubGluZXNbbG9jYWxJbmRleF0ucG9pbnRBdCh0aGlzLmludGVyc2VjdGlvblRpbWVzW2xvY2FsSW5kZXhdW2ludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XVtuZXh0TG9jYWxJbnRlckluZGV4XV0pXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgcHJldkZvcmVpZ25JbnRlciA9IDAgPCBmb3JlaWduSW50ZXJJbmRleFxuICAgICAgICAgICAgPyB0aGlzLmxpbmVzW2ZvcmVpZ25JbmRleF0ucG9pbnRBdCh0aGlzLmludGVyc2VjdGlvblRpbWVzW2ZvcmVpZ25JbmRleF1baW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF1bcHJldkZvcmVpZ25JbnRlckluZGV4XV0pXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgbmV4dEZvcmVpZ25JbnRlciA9IGZvcmVpZ25JbnRlckluZGV4IDwgaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF0ubGVuZ3RoIC0gMVxuICAgICAgICAgICAgPyB0aGlzLmxpbmVzW2ZvcmVpZ25JbmRleF0ucG9pbnRBdCh0aGlzLmludGVyc2VjdGlvblRpbWVzW2ZvcmVpZ25JbmRleF1baW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF1bbmV4dEZvcmVpZ25JbnRlckluZGV4XV0pXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgIF5cbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgbmV4dEZvcmVpZ25JbnRlclxuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAgLy8gIC0tLXByZXZMb2NhbEludGVyLS0tbG9jYWxJbnRlci0tLW5leHRMb2NhbEludGVyLS0tPlxuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICBwcmV2Rm9yZWlnbkludGVyXG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICBjb25zdCBwb2ludHMgPSBbcHJldkxvY2FsSW50ZXIsIG5leHRGb3JlaWduSW50ZXIsIG5leHRMb2NhbEludGVyLCBwcmV2Rm9yZWlnbkludGVyXTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHBvaW50c1tpXSkge1xuICAgICAgICAgICAgICBsZXQgaiA9IGkgKyAxO1xuICAgICAgICAgICAgICBpZiAoaiA9PT0gcG9pbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGogPSAwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHdoaWxlICghcG9pbnRzW2pdKcKge1xuICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgICAgICBpZiAoaiA9PT0gcG9pbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChpICE9PSBqKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBvaW50cy5maWx0ZXIocCA9PiAhIXApLmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3B1c2gnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFydGlhbHMucHVzaChuZXcgUG9seWdvbihbcG9pbnRzW2ldLCBsb2NhbEludGVyLCBwb2ludHNbal1dKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcGFydGlhbHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFyZWEoKSA8IDApIHtcbiAgICAgICAgcC5yZXZlcnNlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgY29uc29sZS5sb2coJ3BhcnRpYWxzJywgcGFydGlhbHMpO1xuICAgIGNvbnN0IHBvbHlnb25zOiBQb2x5Z29uW10gPSBbXTtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBwYXJ0aWFscy5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgcGFydGlhbHMubGVuZ3RoOyBqKyspwqB7XG4gICAgICAgIGlmIChpICE9PSBqKSB7XG4gICAgICAgICAgaWYgKHRoaXMucGFydGlhbHNBcmVDb25uZWN0ZWQocGFydGlhbHNbaV0sIHBhcnRpYWxzW2pdKSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFxuICAgICAgICAgICAgLy8gICBwYXJ0aWFsc1tpXTogJHtwYXJ0aWFsc1tpXS50b1N0cmluZygpfSxcbiAgICAgICAgICAgIC8vICAgcGFydGlhbHNbal06ICR7cGFydGlhbHNbal0udG9TdHJpbmcoKX0sXG4gICAgICAgICAgICAvLyBgKTtcbiAgICAgICAgICAgIHBhcnRpYWxzW2ldLnZlcnRpY2VzLnNwbGljZSgtMiwgMiwgLi4ucGFydGlhbHNbal0udmVydGljZXMpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFxuICAgICAgICAgICAgLy8gICBwYXJ0aWFsc1tpXTogJHtwYXJ0aWFsc1tpXS50b1N0cmluZygpfSBbTkVXXSxcbiAgICAgICAgICAgIC8vIGApO1xuICAgICAgICAgICAgcGFydGlhbHMuc3BsaWNlKGosIDEpO1xuICAgICAgICAgICAgLy8gaWYgKGkgPCBqKSB7XG4gICAgICAgICAgICAvLyAgIGktLTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIC8vIGlmICh0aGlzLnBhcnRpYWxzQXJlQ29ubmVjdGVkKHBhcnRpYWxzW2ldLCBwYXJ0aWFsc1tpXSkpIHtcbiAgICAgICAgICAgIC8vICAgcGFydGlhbHNbaV0udmVydGljZXMucG9wKCk7XG4gICAgICAgICAgICAvLyAgIHBhcnRpYWxzW2ldLnZlcnRpY2VzLnBvcCgpO1xuICAgICAgICAgICAgLy8gICBwb2x5Z29ucy5wdXNoKHBhcnRpYWxzW2ldKTtcbiAgICAgICAgICAgIC8vICAgcGFydGlhbHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgLy8gfSBlbHNlIGlmIChwYXJ0aWFsc1tpXS52ZXJ0aWNlc1swXS5lcXVhbHMocGFydGlhbHNbaV0udmVydGljZXNbcGFydGlhbHNbaV0udmVydGljZXMubGVuZ3RoIC0gMV0pKSB7XG4gICAgICAgICAgICAvLyAgIHBhcnRpYWxzW2ldLnZlcnRpY2VzLnBvcCgpO1xuICAgICAgICAgICAgLy8gICBwb2x5Z29ucy5wdXNoKHBhcnRpYWxzW2ldKTtcbiAgICAgICAgICAgIC8vICAgcGFydGlhbHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgaSA9IC0xO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdpbmNvbXBsZXRlIHBvbHlnb25zJyk7XG4gICAgcGFydGlhbHMubWFwKHAgPT4gY29uc29sZS5sb2cocC50b1N0cmluZygpKSk7XG4gICAgY29uc29sZS5sb2coJ3BvbHlnb25zJywgcG9seWdvbnMpO1xuICAgIHJldHVybiBwYXJ0aWFscztcbiAgfVxufSIsImltcG9ydCB7IENsaWNrSGFuZGxlciwgUG9scGxvdFJlbmRlcmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9wb2xwbG90LXJlbmRlcmVyXCI7XG5pbXBvcnQgeyBMaW5lIH0gZnJvbSBcIi4vbGluZVwiO1xuaW1wb3J0IHsgUG9seWdvbiB9IGZyb20gXCIuL3BvbHlnb25cIjtcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XG5cbmNvbnN0IGdUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xuZ1RlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2JsYWNrJyk7XG5nVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMC40cHgnKTtcblxuY29uc3QgbGluZVRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG5saW5lVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5JywgJzEwLCA0LCAxLCA0Jyk7XG5cbmNvbnN0IGFuY2hvclRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG5hbmNob3JUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoXG4gICdkJyxcbiAgJ00gMCwgMCcgK1xuICAnQSAxMCwgMTAsIDAsIDAsIDAsIC01LCAtNScgKyBcbiAgJ0EgMTAsIDEwLCAwLCAxLCAxLCA1LCAtNScgK1xuICAnQSAxMCwgMTAsIDAsIDAsIDAsIDAsIDAnXG4pO1xuYW5jaG9yVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3doaXRlJyk7XG5cbmdUZW1wbGF0ZS5hcHBlbmRDaGlsZChsaW5lVGVtcGxhdGUpO1xuZ1RlbXBsYXRlLmFwcGVuZENoaWxkKGFuY2hvclRlbXBsYXRlKTtcbmdUZW1wbGF0ZS5hcHBlbmRDaGlsZChhbmNob3JUZW1wbGF0ZS5jbG9uZU5vZGUoKSk7XG5cbmNvbnN0IHBvaW50VGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xucG9pbnRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnZ3JlZW4nKTtcbnBvaW50VGVtcGxhdGUuc2V0QXR0cmlidXRlKCdyJywgJzMnKTtcblxuY29uc3QgcG9seWdvblRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG5wb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2dyZWVuJyk7XG5wb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCAnMC43Jyk7XG5wb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMycpO1xucG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2dyZXknKTtcblxuZXhwb3J0IGNsYXNzIFN2Z1JlbmRlcmVyIGltcGxlbWVudHMgUG9scGxvdFJlbmRlcmVyIHtcbiAgcmVhZG9ubHkgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgcHJpdmF0ZSBpbnRlcnNlY3Rpb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcbiAgcHJpdmF0ZSBwb2x5Z29uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XG4gIHByaXZhdGUgc3ZnR0J5TGluZSA9IG5ldyBNYXA8TGluZSwgU1ZHR0VsZW1lbnQ+KCk7XG4gIHByaXZhdGUgbGluZUJ5U3ZnRyA9IG5ldyBNYXA8U1ZHR0VsZW1lbnQsIExpbmU+KCk7XG4gIHByaXZhdGUgb25Nb3VzZURvd246IChldmVudDogTW91c2VFdmVudCkgPT4gYW55O1xuICBwcml2YXRlIG9uTW91c2VVcDogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhbnk7XG4gIHByaXZhdGUgb25Nb3VzZU1vdmU6IChldmVudDogTW91c2VFdmVudCkgPT4gYW55O1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLmludGVyc2VjdGlvbkNvbnRhaW5lcik7XG4gICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQodGhpcy5wb2x5Z29uQ29udGFpbmVyKTtcbiAgfVxuICBjbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhbnkge1xuICAgIHJldHVybiBldmVudCA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50QXQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuICAgICAgY29uc3QgbGluZSA9IHRoaXMubGluZUJ5U3ZnRy5nZXQoZWxlbWVudEF0LnBhcmVudE5vZGUgYXMgU1ZHR0VsZW1lbnQpO1xuICAgICAgaWYgKGVsZW1lbnRBdCBpbnN0YW5jZW9mIFNWR1BhdGhFbGVtZW50ICYmIGVsZW1lbnRBdC5wYXJlbnROb2RlICE9PSB0aGlzLnBvbHlnb25Db250YWluZXIpIHtcbiAgICAgICAgaWYgKGVsZW1lbnRBdC5wYXJlbnROb2RlLmNoaWxkcmVuWzFdID09PSBlbGVtZW50QXQpIHtcbiAgICAgICAgICBjbGlja0hhbmRsZXIoZXZlbnQsIGxpbmUsIGxpbmUudjEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsaWNrSGFuZGxlcihldmVudCwgbGluZSwgbGluZS52Mik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZWxlbWVudEF0IGluc3RhbmNlb2YgU1ZHTGluZUVsZW1lbnQpIHtcbiAgICAgICAgY2xpY2tIYW5kbGVyKGV2ZW50LCBsaW5lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsaWNrSGFuZGxlcihldmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBzZXRNb3VzZURvd25IYW5kbGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub25Nb3VzZURvd24pIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgIH1cbiAgICB0aGlzLm9uTW91c2VEb3duID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gIH1cbiAgc2V0TW91c2VVcEhhbmRsZXIoY2xpY2tIYW5kbGVyOiBDbGlja0hhbmRsZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vbk1vdXNlVXApIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgfVxuICAgIHRoaXMub25Nb3VzZVVwID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgfVxuICBzZXRNb3VzZU1vdmVIYW5kbGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub25Nb3VzZU1vdmUpIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgIH1cbiAgICB0aGlzLm9uTW91c2VNb3ZlID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gIH1cbiAgZHJhd0xpbmUobGluZTogTGluZSwgaXNIb3ZlcmVkID0gZmFsc2UsIGlzU2VsZWN0ZWQgPSBmYWxzZSk6IHZvaWQge1xuICAgIGxldCBzdmdHOiBTVkdHRWxlbWVudDtcbiAgICBpZiAoIXRoaXMuc3ZnR0J5TGluZS5oYXMobGluZSkpIHtcbiAgICAgIHN2Z0cgPSBnVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpIGFzIFNWR0dFbGVtZW50O1xuICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQoc3ZnRyk7XG4gICAgICB0aGlzLnN2Z0dCeUxpbmUuc2V0KGxpbmUsIHN2Z0cpO1xuICAgICAgdGhpcy5saW5lQnlTdmdHLnNldChzdmdHLCBsaW5lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnRyA9IHRoaXMuc3ZnR0J5TGluZS5nZXQobGluZSk7XG4gICAgfVxuICAgIGNvbnN0IHN2Z0xpbmUgPSBzdmdHLmNoaWxkcmVuWzBdIGFzIFNWR0xpbmVFbGVtZW50O1xuICAgIGNvbnN0IHN2Z1BhdGhBbmNob3JTdGFydCA9IHN2Z0cuY2hpbGRyZW5bMV0gYXMgU1ZHUGF0aEVsZW1lbnQ7XG4gICAgY29uc3Qgc3ZnUGF0aEFuY2hvckVuZCA9IHN2Z0cuY2hpbGRyZW5bMl0gYXMgU1ZHUGF0aEVsZW1lbnQ7XG4gICAgY29uc3QgeDEgPSBsaW5lLngxLnRvRml4ZWQoKTtcbiAgICBjb25zdCB5MSA9IGxpbmUueTEudG9GaXhlZCgpO1xuICAgIGNvbnN0IHgyID0gbGluZS54Mi50b0ZpeGVkKCk7XG4gICAgY29uc3QgeTIgPSBsaW5lLnkyLnRvRml4ZWQoKTtcbiAgICBzdmdMaW5lLnNldEF0dHJpYnV0ZSgneDEnLCB4MSk7XG4gICAgc3ZnTGluZS5zZXRBdHRyaWJ1dGUoJ3kxJywgeTEpO1xuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd4MicsIHgyKTtcbiAgICBzdmdMaW5lLnNldEF0dHJpYnV0ZSgneTInLCB5Mik7XG4gICAgaWYgKGlzSG92ZXJlZCkge1xuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcwLjhweCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdmdHLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzAuNHB4Jyk7XG4gICAgfVxuICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICBzdmdHLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMxOWExOTQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdibGFjaycpO1xuICAgIH1cbiAgICBjb25zdCBhbmdsZSA9IDE4MCAqIChsaW5lLnYyLnN1YihsaW5lLnYxKS5hbmdsZSgpIC0gTWF0aC5QSSAvIDIpIC8gTWF0aC5QSTtcbiAgICBzdmdQYXRoQW5jaG9yU3RhcnQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7eDF9LCAke3kxfSkgcm90YXRlKCR7aXNOYU4oYW5nbGUpID8gMCA6IGFuZ2xlfSlgKTtcbiAgICBzdmdQYXRoQW5jaG9yRW5kLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3gyfSwgJHt5Mn0pIHJvdGF0ZSgke2lzTmFOKGFuZ2xlKSA/IDAgOiAxODAgKyBhbmdsZX0pYCk7XG4gIH1cbiAgZXJhc2VMaW5lKGxpbmU6IExpbmUpOiB2b2lkIHtcbiAgICBjb25zdCBzdmdHID0gdGhpcy5zdmdHQnlMaW5lLmdldChsaW5lKTtcbiAgICBpZiAoc3ZnRykge1xuICAgICAgdGhpcy5zdmcucmVtb3ZlQ2hpbGQoc3ZnRyk7XG4gICAgICB0aGlzLnN2Z0dCeUxpbmUuZGVsZXRlKGxpbmUpO1xuICAgIH1cbiAgfVxuICBkcmF3UG9pbnQocG9pbnQ6IFZlY3RvcjIpOiB2b2lkIHtcbiAgICBjb25zdCBzdmdDaXJjbGUgPSBwb2ludFRlbXBsYXRlLmNsb25lTm9kZSgpIGFzIFNWR0NpcmNsZUVsZW1lbnQ7XG4gICAgc3ZnQ2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCBwb2ludC54LnRvRml4ZWQoKSk7XG4gICAgc3ZnQ2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCBwb2ludC55LnRvRml4ZWQoKSk7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoc3ZnQ2lyY2xlKTtcbiAgfVxuICBwcml2YXRlIGNsZWFyQ29udGFpbmVyKGNvbnRhaW5lcjogU1ZHR0VsZW1lbnQpOiB2b2lkIHtcbiAgICB3aGlsZSAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9XG4gIGNsZWFySW50ZXJzZWN0aW9ucygpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyQ29udGFpbmVyKHRoaXMuaW50ZXJzZWN0aW9uQ29udGFpbmVyKTtcbiAgfVxuICBkcmF3UG9seWdvbihwb2x5Z29uOiBQb2x5Z29uKTogdm9pZCB7XG4gICAgY29uc3Qgc3ZnUGF0aCA9IHBvbHlnb25UZW1wbGF0ZS5jbG9uZU5vZGUoKSBhcyBTVkdQYXRoRWxlbWVudDtcbiAgICBzdmdQYXRoLnNldEF0dHJpYnV0ZSgnZCcsICdNJyArIHBvbHlnb24udmVydGljZXMubWFwKHYgPT4gYCR7di54fSAke3YueX1gKS5qb2luKCcgTCAnKSArICdaJyk7XG4gICAgc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnIycgKyAoTWF0aC5mbG9vcigxNjc3NzIxNSAqIE1hdGgucmFuZG9tKCkpKS50b1N0cmluZygxNikpO1xuICAgIHRoaXMucG9seWdvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzdmdQYXRoKTtcbiAgfVxuICBjbGVhclBvbHlnb25zKCk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJDb250YWluZXIodGhpcy5wb2x5Z29uQ29udGFpbmVyKTtcbiAgfVxufSIsImltcG9ydCB7IFBvbFBsb3QgfSBmcm9tIFwiLi9wb2xwbG90XCI7XG5pbXBvcnQgeyBTdmdSZW5kZXJlciB9IGZyb20gXCIuL3N2Zy1yZW5kZXJlclwiO1xuXG5jb25zdCBzdmdSZW5kZXJlciA9IG5ldyBTdmdSZW5kZXJlcigpO1xuY29uc3QgcG9scGxvdCA9IG5ldyBQb2xQbG90KHN2Z1JlbmRlcmVyKTtcbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5ib2R5LmFwcGVuZENoaWxkKHN2Z1JlbmRlcmVyLnN2Zyk7Il0sInNvdXJjZVJvb3QiOiIifQ==