(()=>{"use strict";var t=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.dotRaw=function(t,e,n,i){return t*n+e*i},t.dot=function(t,e){return this.dotRaw(t.x,t.y,e.x,e.y)},t.prototype.dot=function(e){return t.dot(this,e)},t.crossRaw=function(t,e,n,i){return t*i-n*e},t.cross=function(t,e){return this.crossRaw(t.x,t.y,e.x,e.y)},t.prototype.cross=function(e){return t.cross(this,e)},t.lenRaw=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},t.len=function(t){return this.lenRaw(t.x,t.y)},t.prototype.len=function(){return t.len(this)},t.normalizeRaw=function(t,e,n){void 0===n&&(n=1);var i=n/this.lenRaw(t,e);return this.mulRaw(t,e,i)},t.normalize=function(t,e){return void 0===e&&(e=1),this.normalizeRaw(t.x,t.y,e)},t.prototype.normalize=function(e){return void 0===e&&(e=1),t.normalize(this,e)},t.equalsRaw=function(t,e,n,i){return t===n&&e===i},t.equals=function(t,e){return this.equalsRaw(t.x,t.y,e.x,e.y)},t.prototype.equals=function(e){return t.equals(this,e)},t.addRaw=function(e,n,i,r){return new t(e+i,n+r)},t.add=function(t,e){return this.addRaw(t.x,t.y,e.x,e.y)},t.prototype.add=function(e){return t.add(this,e)},t.subRaw=function(e,n,i,r){return new t(e-i,n-r)},t.sub=function(t,e){return this.subRaw(t.x,t.y,e.x,e.y)},t.prototype.sub=function(e){return t.sub(this,e)},t.mulRaw=function(e,n,i){return new t(e*i,n*i)},t.mul=function(t,e){return this.mulRaw(t.x,t.y,e)},t.prototype.mul=function(e){return t.mul(this,e)},t.intersectionTimesRaw=function(e,n,i,r,o,s,u,a){var c=this.crossRaw(i-e,r-n,u-o,a-s);return new t(this.crossRaw(u-o,a-s,e-o,n-s)/c,this.crossRaw(i-e,r-n,e-o,n-s)/c)},t.intersectionTimes=function(t,e,n,i){return this.intersectionTimesRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersectionTimes=function(e,n,i){return t.intersectionTimes(this,e,n,i)},t.intersectionRaw=function(t,e,n,i,r,o,s,u){var a=this.intersectionTimesRaw(t,e,n,i,r,o,s,u);if(a)return a.y=e+(i-e)*a.x,a.x=t+(n-t)*a.x,a},t.intersection=function(t,e,n,i){return this.intersectionRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersection=function(e,n,i){return t.intersection(this,e,n,i)},t.prototype.angle=function(t){if(t){var e=this.angle(),n=t.angle();return n<e?n+2*Math.PI-e:n-e}return this.y>0?Math.acos(this.x/this.len()):2*Math.PI-Math.acos(this.x/this.len())},t}(),e=function(){function e(e,n,i,r){this.v1=new t(e,n),this.v2=new t(i,r)}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.v1.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.v1.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.v2.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.v2.y},enumerable:!1,configurable:!0}),e.prototype.len=function(){return this.v2.sub(this.v1).len()},e.prototype.pointAt=function(t){return this.v1.add(this.v2.sub(this.v1).mul(t))},e.prototype.before=function(t){return this.v1.add(this.v2.sub(this.v1).mul(-t/this.len()))},e.prototype.after=function(t){return this.v1.add(this.v2.sub(this.v1).mul((this.len()+t)/this.len()))},e.prototype.intersectionTimesWith=function(t){return this.v1.intersectionTimes(this.v2,t.v1,t.v2)},e.prototype.update=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.v1.x+=t,this.v1.y+=e,this.v2.x+=n,this.v2.y+=i},e}(),n=function(){function t(t){void 0===t&&(t=[]),this.vertices=t}return t.prototype.areaBetween=function(t,e){return(this.vertices[e].x-this.vertices[t].x)*(this.vertices[t].y+this.vertices[e].y)/2},t.prototype.area=function(){for(var t=0,e=this.vertices.length-1,n=0;n<this.vertices.length;n++)t+=this.areaBetween(e,n),e=n;return t},t.prototype.shareEdge=function(t,e){for(var n=this.vertices.length-1,i=0;i<this.vertices.length;i++){if(this.vertices[n].equals(t)&&this.vertices[i].equals(e))return!0;n=i}return!1},t.prototype.intersectionWith=function(t){},t.prototype.reverse=function(){this.vertices.reverse()},t.prototype.toString=function(){return this.vertices.length+" points: "+this.vertices.map((function(t){return"("+t.x.toFixed()+", "+t.y.toFixed()+")"})).join(", ")+" (area: "+this.area().toFixed()+")"},t}(),i=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,r++)i[r]=o[s];return i},r=function(){function t(t){var n,i,r,o,s=this;this.renderer=t,this.lines=[],this.intersectionTimes=[],this.intersections=[],this.intersectionIndex=[],this.renderer.setMouseDownHandler((function(t,r,o){i=o||null,(n=r||null)||(n=new e(t.clientX,t.clientY,t.clientX,t.clientY),i=n.v2,s.addLine(n))})),this.renderer.setMouseUpHandler((function(t,e,u){e?(r&&r!==e&&s.renderer.drawLine(r,e===o,!1),r=e,s.renderer.drawLine(r,e===o,!0)):r&&s.renderer.drawLine(r,e===o,!1),n=null,i=null})),this.renderer.setMouseMoveHandler((function(t,e,u){e?(o&&o!==e&&s.renderer.drawLine(o,!1,e===r),o=e,s.renderer.drawLine(o,!0,e===r)):o&&(s.renderer.drawLine(o,!1,e===r),o=null),n&&(i?(i.x=t.clientX,i.y=t.clientY):n.update(t.movementX,t.movementY,t.movementX,t.movementY),s.updateIntersectionTimes(n),s.renderer.drawLine(n,n===o,n===r))}))}return t.prototype.addLine=function(t){this.addIntersectionTimes(t),this.lines.push(t),this.renderer.drawLine(t,!1,!1)},t.prototype.addIntersectionTimes=function(t,e,n,i,r){void 0===e&&(e=this.lines),void 0===n&&(n=this.intersectionTimes),void 0===i&&(i=this.intersections),void 0===r&&(r=this.intersectionIndex);for(var o,s=[],u=[],a=0;a<e.length;a++)o=e[a].intersectionTimesWith(t),n[a].push(o.x),i.push(e[a].pointAt(o.x)),r[a].push(i.length-1),s.push(o.y),u.push(i.length-1);s.push(NaN),u.push(null),n.push(s),r.push(u),this.renderIntersections()},t.prototype.updateIntersectionTimes=function(t,e,n,i,r){void 0===e&&(e=this.lines),void 0===n&&(n=this.intersectionTimes),void 0===i&&(i=this.intersections),void 0===r&&(r=this.intersectionIndex);for(var o,s=e.indexOf(t),u=0;u<e.length;u++)u!==s&&(o=e[u].intersectionTimesWith(t),n[u][s]=o.x,n[s][u]=o.y,u<s?i[r[u][s]]=e[u].pointAt(o.x):i[r[s][u]]=e[u].pointAt(o.x));this.renderIntersections()},t.prototype.renderIntersections=function(){var t=this;console.log("renderIntersections"),console.log(this.intersectionTimes),console.log(this.intersections),console.log(this.intersectionIndex),this.renderer.clearIntersections(),this.intersections.forEach((function(e){t.renderer.drawPoint(e)})),this.renderer.clearPolygons();var e=this.buildPartialsFromIntersectionTimes();this.buildPolygonIndexesFromPartials(e).map((function(e){return new n(e.map((function(e){return t.intersections[e]})))})).forEach((function(e){e.area()>0&&t.renderer.drawPolygon(e)}))},t.prototype.testSide=function(t,e,n){return e.sub(t).cross(n.sub(t))>0},t.prototype.partialsOverlaps=function(t,e){return t[t.length-2]===e[0]&&t[t.length-1]===e[1]},t.prototype.buildPartialsFromIntersectionIndexes=function(t,e){for(var n=[],i=0;i<e.length;i++)if("number"==typeof e[i]){var r=i+1;for(r===e.length&&(r=0);"number"!=typeof e[r];)++r===e.length&&(r=0);i!==r&&n.push([e[i],t,e[r]])}return n},t.prototype.buildPartialsFromIntersectionTimes=function(t,e,n){void 0===t&&(t=this.lines),void 0===e&&(e=this.intersectionTimes),void 0===n&&(n=this.intersectionIndex);for(var i=e.map((function(t,n){return t.map((function(t,e){return e})).filter((function(i){return!isNaN(t[i])&&0<=t[i]&&t[i]<=1&&!isNaN(e[i][n])&&0<=e[i][n]&&e[i][n]<=1})).sort((function(e,n){return t[e]-t[n]}))})),r=[],o=function(e){for(var o=0;o<i[e].length;o++){var u=i[e][o];if(e<u){var a=n[e][i[e][o]],c=o-1,h=o+1,l=i[u].findIndex((function(t){return t===e})),p=s.testSide(t[e].v1,t[e].v2,t[u].v1),d=p?l-1:l+1,v=p?l+1:l-1,f=0<o?n[e][i[e][c]]:null,y=o<i[e].length-1?n[e][i[e][h]]:null,g=-1<d&&d<i[u].length?n[u][i[u][d]]:null,w=-1<v&&v<i[u].length?n[u][i[u][v]]:null,m=s.buildPartialsFromIntersectionIndexes(a,[f,w,y,g]);r.push.apply(r,m)}}},s=this,u=0;u<i.length;u++)o(u);return r},t.prototype.buildPolygonIndexesFromPartials=function(t){for(var e,n=[],r=0;r<t.length;){for(var o=0;o<t.length;o++)if(r!==o&&this.partialsOverlaps(t[r],t[o])){(e=t[r]).splice.apply(e,i([-2,2],t[o])),t.splice(o,1),o<r&&r--,this.partialsOverlaps(t[r],t[r])&&(t[r].splice(0,2),n.push(t[r]),t.splice(r,1)),r=-1;break}r++}return n},t}(),o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("stroke","black"),o.setAttribute("stroke-width","0.4px");var s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("stroke-dasharray","10, 4, 1, 4");var u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d","M 0, 0A 10, 10, 0, 0, 0, -5, -5A 10, 10, 0, 1, 1, 5, -5A 10, 10, 0, 0, 0, 0, 0"),u.setAttribute("fill","white"),o.appendChild(s),o.appendChild(u),o.appendChild(u.cloneNode());var a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("fill","green"),a.setAttribute("r","3");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("fill","green"),c.setAttribute("fill-opacity","0.7"),c.setAttribute("stroke-width","3"),c.setAttribute("stroke","grey");var h=new(function(){function t(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.intersectionContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.polygonContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svgGByLine=new Map,this.lineBySvgG=new Map,this.svg.appendChild(this.intersectionContainer),this.svg.appendChild(this.polygonContainer)}return t.prototype.clickHandlerWrapper=function(t){var e=this;return function(n){var i=document.elementFromPoint(n.clientX,n.clientY),r=e.lineBySvgG.get(i.parentNode);i instanceof SVGPathElement&&i.parentNode!==e.polygonContainer?i.parentNode.children[1]===i?t(n,r,r.v1):t(n,r,r.v2):i instanceof SVGLineElement?t(n,r):t(n)}},t.prototype.setMouseDownHandler=function(t){this.onMouseDown&&this.svg.removeEventListener("mousedown",this.onMouseDown),this.onMouseDown=this.clickHandlerWrapper(t),this.svg.addEventListener("mousedown",this.onMouseDown)},t.prototype.setMouseUpHandler=function(t){this.onMouseUp&&this.svg.removeEventListener("mouseup",this.onMouseUp),this.onMouseUp=this.clickHandlerWrapper(t),this.svg.addEventListener("mouseup",this.onMouseUp)},t.prototype.setMouseMoveHandler=function(t){this.onMouseMove&&this.svg.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=this.clickHandlerWrapper(t),this.svg.addEventListener("mousemove",this.onMouseMove)},t.prototype.drawLine=function(t,e,n){var i;void 0===e&&(e=!1),void 0===n&&(n=!1),this.svgGByLine.has(t)?i=this.svgGByLine.get(t):(i=o.cloneNode(!0),this.svg.appendChild(i),this.svgGByLine.set(t,i),this.lineBySvgG.set(i,t));var r=i.children[0],s=i.children[1],u=i.children[2],a=t.x1.toFixed(),c=t.y1.toFixed(),h=t.x2.toFixed(),l=t.y2.toFixed();r.setAttribute("x1",a),r.setAttribute("y1",c),r.setAttribute("x2",h),r.setAttribute("y2",l),e?i.setAttribute("stroke-width","0.8px"):i.setAttribute("stroke-width","0.4px"),n?i.setAttribute("stroke","#19a194"):i.setAttribute("stroke","black");var p=180*(t.v2.sub(t.v1).angle()-Math.PI/2)/Math.PI;s.setAttribute("transform","translate("+a+", "+c+") rotate("+(isNaN(p)?0:p)+")"),u.setAttribute("transform","translate("+h+", "+l+") rotate("+(isNaN(p)?0:180+p)+")")},t.prototype.eraseLine=function(t){var e=this.svgGByLine.get(t);e&&(this.svg.removeChild(e),this.svgGByLine.delete(t))},t.prototype.drawPoint=function(t){var e=a.cloneNode();e.setAttribute("cx",t.x.toFixed()),e.setAttribute("cy",t.y.toFixed()),this.intersectionContainer.appendChild(e)},t.prototype.clearContainer=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},t.prototype.clearIntersections=function(){this.clearContainer(this.intersectionContainer)},t.prototype.drawPolygon=function(t){var e=c.cloneNode();e.setAttribute("d","M "+t.vertices.map((function(t){return t.x.toFixed()+" "+t.y.toFixed()})).join(" L ")+"Z"),e.setAttribute("fill","#"+(Math.floor(16677215*Math.random())+1e5).toString(16)),this.polygonContainer.appendChild(e)},t.prototype.clearPolygons=function(){this.clearContainer(this.polygonContainer)},t}());new r(h),document.querySelector("body").appendChild(h.svg)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3ZlY3RvcjIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9saW5lLnRzIiwid2VicGFjazovL3BvbHBsb3QvLi9zcmMvcG9seWdvbi50cyIsIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3BvbHBsb3QudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9zdmctcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJ4IiwieSIsImRvdFJhdyIsIngxIiwieTEiLCJ4MiIsInkyIiwiZG90IiwidSIsInYiLCJ0aGlzIiwib3RoZXIiLCJWZWN0b3IyIiwiY3Jvc3NSYXciLCJjcm9zcyIsImxlblJhdyIsIk1hdGgiLCJzcXJ0IiwicG93IiwibGVuIiwibm9ybWFsaXplUmF3IiwiYnkiLCJjb2VmIiwibXVsUmF3Iiwibm9ybWFsaXplIiwiZXF1YWxzUmF3IiwiZXF1YWxzIiwiYWRkUmF3IiwiYWRkIiwic3ViUmF3Iiwic3ViIiwibXVsIiwiaW50ZXJzZWN0aW9uVGltZXNSYXciLCJmeCIsImZ5IiwidHgiLCJ0eSIsInN4Iiwic3kiLCJleCIsImV5IiwiZGV0IiwiaW50ZXJzZWN0aW9uVGltZXMiLCJmcm9tIiwidG8iLCJzdGFydCIsImVuZCIsImludGVyc2VjdGlvblJhdyIsInRpbWVzIiwiaW50ZXJzZWN0aW9uIiwiYW5nbGUiLCJhMSIsImEyIiwiUEkiLCJhY29zIiwidjEiLCJ2MiIsInBvaW50QXQiLCJ0IiwiYmVmb3JlIiwiYWZ0ZXIiLCJpbnRlcnNlY3Rpb25UaW1lc1dpdGgiLCJ1cGRhdGUiLCJkeDEiLCJkeTEiLCJkeDIiLCJkeTIiLCJ2ZXJ0aWNlcyIsImFyZWFCZXR3ZWVuIiwiaSIsImoiLCJhcmVhIiwiYSIsImxlbmd0aCIsInNoYXJlRWRnZSIsImludGVyc2VjdGlvbldpdGgiLCJsaW5lIiwicmV2ZXJzZSIsInRvU3RyaW5nIiwibWFwIiwidG9GaXhlZCIsImpvaW4iLCJyZW5kZXJlciIsImRyYWdnZWRMaW5lIiwiZHJhZ2dlZFZlY3RvcjIiLCJzZWxlY3RlZExpbmUiLCJob3ZlcmVkTGluZSIsImxpbmVzIiwiaW50ZXJzZWN0aW9ucyIsImludGVyc2VjdGlvbkluZGV4Iiwic2V0TW91c2VEb3duSGFuZGxlciIsImV2ZW50IiwiY2xpY2tlZExpbmUiLCJjbGlja2VkVmVjdG9yMiIsIkxpbmUiLCJjbGllbnRYIiwiY2xpZW50WSIsImFkZExpbmUiLCJzZXRNb3VzZVVwSGFuZGxlciIsImRyYXdMaW5lIiwic2V0TW91c2VNb3ZlSGFuZGxlciIsIm1vdmVtZW50WCIsIm1vdmVtZW50WSIsInVwZGF0ZUludGVyc2VjdGlvblRpbWVzIiwiYWRkSW50ZXJzZWN0aW9uVGltZXMiLCJwdXNoIiwibmV3SW50ZXJzZWN0aW9uVGltZXMiLCJuZXdJbnRlcnNlY3Rpb25JbmRleCIsIk5hTiIsInJlbmRlckludGVyc2VjdGlvbnMiLCJpbmRleCIsImluZGV4T2YiLCJjb25zb2xlIiwibG9nIiwiY2xlYXJJbnRlcnNlY3Rpb25zIiwiZm9yRWFjaCIsImRyYXdQb2ludCIsImNsZWFyUG9seWdvbnMiLCJwYXJ0aWFscyIsImJ1aWxkUGFydGlhbHNGcm9tSW50ZXJzZWN0aW9uVGltZXMiLCJidWlsZFBvbHlnb25JbmRleGVzRnJvbVBhcnRpYWxzIiwicG9seWdvbkluZGV4IiwiUG9seWdvbiIsInBvbHlnb24iLCJkcmF3UG9seWdvbiIsInRlc3RTaWRlIiwidyIsInBhcnRpYWxzT3ZlcmxhcHMiLCJwMSIsInAyIiwiYnVpbGRQYXJ0aWFsc0Zyb21JbnRlcnNlY3Rpb25JbmRleGVzIiwiY2VudGVyIiwiaW5kZXhlcyIsInBhcnRzIiwiaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5IiwiaW50ZXJzZWN0aW9uVGltZXNBdEkiLCJfIiwiZmlsdGVyIiwiaXNOYU4iLCJzb3J0IiwibG9jYWxJbmRleCIsImxvY2FsSW50ZXJJbmRleCIsImZvcmVpZ25JbmRleCIsImludGVyIiwicHJldkxvY2FsSW50ZXJJbmRleCIsIm5leHRMb2NhbEludGVySW5kZXgiLCJmb3JlaWduSW50ZXJJbmRleCIsImZpbmRJbmRleCIsImZvcmVpZ25pc1JpZ2h0U2lkZWQiLCJwcmV2Rm9yZWlnbkludGVySW5kZXgiLCJuZXh0Rm9yZWlnbkludGVySW5kZXgiLCJwcmV2TG9jYWxJbnRlciIsIm5leHRMb2NhbEludGVyIiwicHJldkZvcmVpZ25JbnRlciIsIm5leHRGb3JlaWduSW50ZXIiLCJwb2x5Z29uSW5kZXhlcyIsInNwbGljZSIsImdUZW1wbGF0ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwic2V0QXR0cmlidXRlIiwibGluZVRlbXBsYXRlIiwiYW5jaG9yVGVtcGxhdGUiLCJhcHBlbmRDaGlsZCIsImNsb25lTm9kZSIsInBvaW50VGVtcGxhdGUiLCJwb2x5Z29uVGVtcGxhdGUiLCJzdmdSZW5kZXJlciIsInN2ZyIsImludGVyc2VjdGlvbkNvbnRhaW5lciIsInBvbHlnb25Db250YWluZXIiLCJzdmdHQnlMaW5lIiwiTWFwIiwibGluZUJ5U3ZnRyIsImNsaWNrSGFuZGxlcldyYXBwZXIiLCJjbGlja0hhbmRsZXIiLCJlbGVtZW50QXQiLCJlbGVtZW50RnJvbVBvaW50IiwiZ2V0IiwicGFyZW50Tm9kZSIsIlNWR1BhdGhFbGVtZW50IiwiY2hpbGRyZW4iLCJTVkdMaW5lRWxlbWVudCIsIm9uTW91c2VEb3duIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbk1vdXNlVXAiLCJvbk1vdXNlTW92ZSIsImlzSG92ZXJlZCIsImlzU2VsZWN0ZWQiLCJzdmdHIiwiaGFzIiwic2V0Iiwic3ZnTGluZSIsInN2Z1BhdGhBbmNob3JTdGFydCIsInN2Z1BhdGhBbmNob3JFbmQiLCJlcmFzZUxpbmUiLCJyZW1vdmVDaGlsZCIsImRlbGV0ZSIsInBvaW50Iiwic3ZnQ2lyY2xlIiwiY2xlYXJDb250YWluZXIiLCJjb250YWluZXIiLCJmaXJzdENoaWxkIiwic3Zn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S0FBS2dLLG1CQUU3QixFQXBIQSxJQ2hDZ0IsSUFBSXFDLEVBQVF4QyxHQUNmVCxTQUFTa0QsY0FBYyxRQUMvQjdDLFlBQVlJLEVBQVlDLE0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWZWN0b3IyIHtcclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgeCA9IDAsIHB1YmxpYyB5ID0gMCkge31cclxuICBzdGF0aWMgZG90UmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHgxICogeDIgKyB5MSAqIHkyO1xyXG4gIH1cclxuICBzdGF0aWMgZG90KHU6IFZlY3RvcjIsIHY6IFZlY3RvcjIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuZG90UmF3KHUueCwgdS55LCB2LngsIHYueSk7XHJcbiAgfVxyXG4gIGRvdChvdGhlcjogVmVjdG9yMik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gVmVjdG9yMi5kb3QodGhpcywgb3RoZXIpO1xyXG4gIH1cclxuICBzdGF0aWMgY3Jvc3NSYXcoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4geDEgKiB5MiAtIHgyICogeTE7XHJcbiAgfVxyXG4gIHN0YXRpYyBjcm9zcyh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmNyb3NzUmF3KHUueCwgdS55LCB2LngsIHYueSk7XHJcbiAgfVxyXG4gIGNyb3NzKG90aGVyOiBWZWN0b3IyKTogbnVtYmVyIHtcclxuICAgIHJldHVybiBWZWN0b3IyLmNyb3NzKHRoaXMsIG90aGVyKTtcclxuICB9XHJcbiAgc3RhdGljIGxlblJhdyh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHgsIDIpICsgTWF0aC5wb3coeSwgMikpO1xyXG4gIH1cclxuICBzdGF0aWMgbGVuKHU6IFZlY3RvcjIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMubGVuUmF3KHUueCwgdS55KTtcclxuICB9XHJcbiAgbGVuKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gVmVjdG9yMi5sZW4odGhpcyk7XHJcbiAgfVxyXG4gIHN0YXRpYyBub3JtYWxpemVSYXcoeDogbnVtYmVyLCB5OiBudW1iZXIsIGJ5OiBudW1iZXIgPSAxKTogVmVjdG9yMiB7XHJcbiAgICBjb25zdCBjb2VmID0gYnkgLyB0aGlzLmxlblJhdyh4LCB5KTtcclxuICAgIHJldHVybiB0aGlzLm11bFJhdyh4LCB5LCBjb2VmKTtcclxuICB9XHJcbiAgc3RhdGljIG5vcm1hbGl6ZSh1OiBWZWN0b3IyLCBieTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIHRoaXMubm9ybWFsaXplUmF3KHUueCwgdS55LCBieSk7XHJcbiAgfVxyXG4gIG5vcm1hbGl6ZShieTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIFZlY3RvcjIubm9ybWFsaXplKHRoaXMsIGJ5KTtcclxuICB9XHJcbiAgc3RhdGljIGVxdWFsc1Jhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4geDEgPT09IHgyICYmIHkxID09PSB5MjtcclxuICB9XHJcbiAgc3RhdGljIGVxdWFscyh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5lcXVhbHNSYXcodS54LCB1LnksIHYueCwgdi55KTtcclxuICB9XHJcbiAgZXF1YWxzKG90aGVyOiBWZWN0b3IyKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gVmVjdG9yMi5lcXVhbHModGhpcywgb3RoZXIpO1xyXG4gIH1cclxuICBzdGF0aWMgYWRkUmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBWZWN0b3IyIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMih4MSArIHgyLCB5MSArIHkyKTtcclxuICB9XHJcbiAgc3RhdGljIGFkZCh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gdGhpcy5hZGRSYXcodS54LCB1LnksIHYueCwgdi55KTtcclxuICB9XHJcbiAgYWRkKG90aGVyOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gVmVjdG9yMi5hZGQodGhpcywgb3RoZXIpO1xyXG4gIH1cclxuICBzdGF0aWMgc3ViUmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBWZWN0b3IyIHtcclxuICAgIHJldHVybiBuZXcgVmVjdG9yMih4MSAtIHgyLCB5MSAtIHkyKTtcclxuICB9XHJcbiAgc3RhdGljIHN1Yih1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gdGhpcy5zdWJSYXcodS54LCB1LnksIHYueCwgdi55KTtcclxuICB9XHJcbiAgc3ViKG90aGVyOiBWZWN0b3IyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gVmVjdG9yMi5zdWIodGhpcywgb3RoZXIpO1xyXG4gIH1cclxuICBzdGF0aWMgbXVsUmF3KHg6IG51bWJlciwgeTogbnVtYmVyLCBieTogbnVtYmVyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoeCAqIGJ5LCB5ICogYnkpO1xyXG4gIH1cclxuICBzdGF0aWMgbXVsKHU6IFZlY3RvcjIsIGJ5OiBudW1iZXIpOiBWZWN0b3IyIHtcclxuICAgIHJldHVybiB0aGlzLm11bFJhdyh1LngsIHUueSwgYnkpO1xyXG4gIH1cclxuICBtdWwoYnk6IG51bWJlcik6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIFZlY3RvcjIubXVsKHRoaXMsIGJ5KTtcclxuICB9XHJcbiAgc3RhdGljIGludGVyc2VjdGlvblRpbWVzUmF3KFxyXG4gICAgZng6IG51bWJlciwgZnk6IG51bWJlciwgdHg6IG51bWJlciwgdHk6IG51bWJlcixcclxuICAgIHN4OiBudW1iZXIsIHN5OiBudW1iZXIsIGV4OiBudW1iZXIsIGV5OiBudW1iZXJcclxuICApOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcclxuICAgIGNvbnN0IGRldCA9IHRoaXMuY3Jvc3NSYXcodHggLSBmeCwgdHkgLSBmeSwgZXggLSBzeCwgZXkgLSBzeSk7XHJcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoXHJcbiAgICAgIHRoaXMuY3Jvc3NSYXcoZXggLSBzeCwgZXkgLSBzeSwgZnggLSBzeCwgZnkgLSBzeSkgLyBkZXQsXHJcbiAgICAgIHRoaXMuY3Jvc3NSYXcodHggLSBmeCwgdHkgLSBmeSwgZnggLSBzeCwgZnkgLSBzeSkgLyBkZXRcclxuICAgICk7XHJcbiAgfVxyXG4gIHN0YXRpYyBpbnRlcnNlY3Rpb25UaW1lcyhcclxuICAgIGZyb206IFZlY3RvcjIsIHRvOiBWZWN0b3IyLCBzdGFydDogVmVjdG9yMiwgZW5kOiBWZWN0b3IyXHJcbiAgKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3Rpb25UaW1lc1Jhdyhmcm9tLngsIGZyb20ueSwgdG8ueCwgdG8ueSwgc3RhcnQueCwgc3RhcnQueSwgZW5kLngsIGVuZC55KTtcclxuICB9XHJcbiAgaW50ZXJzZWN0aW9uVGltZXModG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjIpOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiBWZWN0b3IyLmludGVyc2VjdGlvblRpbWVzKHRoaXMsIHRvLCBzdGFydCwgZW5kKTtcclxuICB9XHJcbiAgc3RhdGljIGludGVyc2VjdGlvblJhdyhcclxuICAgIGZ4OiBudW1iZXIsIGZ5OiBudW1iZXIsIHR4OiBudW1iZXIsIHR5OiBudW1iZXIsXHJcbiAgICBzeDogbnVtYmVyLCBzeTogbnVtYmVyLCBleDogbnVtYmVyLCBleTogbnVtYmVyXHJcbiAgKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XHJcbiAgICBjb25zdCB0aW1lcyA9IHRoaXMuaW50ZXJzZWN0aW9uVGltZXNSYXcoZngsIGZ5LCB0eCwgdHksIHN4LCBzeSwgZXgsIGV5KTtcclxuICAgIGlmICh0aW1lcykge1xyXG4gICAgICB0aW1lcy55ID0gZnkgKyAodHkgLSBmeSkgKiB0aW1lcy54O1xyXG4gICAgICB0aW1lcy54ID0gZnggKyAodHggLSBmeCkgKiB0aW1lcy54O1xyXG4gICAgICByZXR1cm4gdGltZXM7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHN0YXRpYyBpbnRlcnNlY3Rpb24oZnJvbTogVmVjdG9yMiwgdG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjIpOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcclxuICAgIHJldHVybiB0aGlzLmludGVyc2VjdGlvblJhdyhmcm9tLngsIGZyb20ueSwgdG8ueCwgdG8ueSwgc3RhcnQueCwgc3RhcnQueSwgZW5kLngsIGVuZC55KTtcclxuICB9XHJcbiAgaW50ZXJzZWN0aW9uKHRvOiBWZWN0b3IyLCBzdGFydDogVmVjdG9yMiwgZW5kOiBWZWN0b3IyKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XHJcbiAgICByZXR1cm4gVmVjdG9yMi5pbnRlcnNlY3Rpb24odGhpcywgdG8sIHN0YXJ0LCBlbmQpO1xyXG4gIH1cclxuICBhbmdsZShvdGhlcj86IFZlY3RvcjIpOiBudW1iZXIge1xyXG4gICAgaWYgKG90aGVyKSB7XHJcbiAgICAgICBjb25zdCBhMSA9IHRoaXMuYW5nbGUoKTtcclxuICAgICAgIGNvbnN0IGEyID0gb3RoZXIuYW5nbGUoKTtcclxuICAgICAgIGlmIChhMiA8IGExKSB7XHJcbiAgICAgICAgcmV0dXJuIGEyICsgMiAqIE1hdGguUEkgLSBhMTtcclxuICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGEyIC0gYTE7XHJcbiAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMueSA+IDApIHtcclxuICAgICAgcmV0dXJuIE1hdGguYWNvcyh0aGlzLnggLyB0aGlzLmxlbigpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAyICogTWF0aC5QSSAtIE1hdGguYWNvcyh0aGlzLnggLyB0aGlzLmxlbigpKTtcclxuICAgIH1cclxuICB9XHJcbn0iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIExpbmUge1xyXG4gIHYxOiBWZWN0b3IyO1xyXG4gIHYyOiBWZWN0b3IyO1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeDE/OiBudW1iZXIsXHJcbiAgICB5MT86IG51bWJlcixcclxuICAgIHgyPzogbnVtYmVyLFxyXG4gICAgeTI/OiBudW1iZXJcclxuICApIHtcclxuICAgIHRoaXMudjEgPSBuZXcgVmVjdG9yMih4MSwgeTEpO1xyXG4gICAgdGhpcy52MiA9IG5ldyBWZWN0b3IyKHgyLCB5Mik7XHJcbiAgfVxyXG4gIGdldCB4MSgpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudjEueDtcclxuICB9XHJcbiAgZ2V0IHkxKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52MS55O1xyXG4gIH1cclxuICBnZXQgeDIoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLnYyLng7XHJcbiAgfVxyXG4gIGdldCB5MigpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuIHRoaXMudjIueTtcclxuICB9XHJcbiAgbGVuKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy52Mi5zdWIodGhpcy52MSkubGVuKCk7XHJcbiAgfVxyXG4gIHBvaW50QXQodDogbnVtYmVyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gdGhpcy52MS5hZGQodGhpcy52Mi5zdWIodGhpcy52MSkubXVsKHQpKTtcclxuICB9XHJcbiAgYmVmb3JlKHQ6IG51bWJlcik6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIHRoaXMudjEuYWRkKHRoaXMudjIuc3ViKHRoaXMudjEpLm11bCgtdCAvIHRoaXMubGVuKCkpKTtcclxuICB9XHJcbiAgYWZ0ZXIodDogbnVtYmVyKTogVmVjdG9yMiB7XHJcbiAgICByZXR1cm4gdGhpcy52MS5hZGQodGhpcy52Mi5zdWIodGhpcy52MSkubXVsKCh0aGlzLmxlbigpICsgdCkgLyB0aGlzLmxlbigpKSk7XHJcbiAgfVxyXG4gIGludGVyc2VjdGlvblRpbWVzV2l0aChvdGhlcjogTGluZSk6IFZlY3RvcjIge1xyXG4gICAgcmV0dXJuIHRoaXMudjEuaW50ZXJzZWN0aW9uVGltZXModGhpcy52Miwgb3RoZXIudjEsIG90aGVyLnYyKTtcclxuICB9XHJcbiAgdXBkYXRlKGR4MSA9IDAsIGR5MSA9IDAsIGR4MiA9IDAsIGR5MiA9IDApOiB2b2lkIHtcclxuICAgIHRoaXMudjEueCArPSBkeDE7XHJcbiAgICB0aGlzLnYxLnkgKz0gZHkxO1xyXG4gICAgdGhpcy52Mi54ICs9IGR4MjtcclxuICAgIHRoaXMudjIueSArPSBkeTI7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuL2xpbmVcIjtcclxuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlY3RvcjJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb2x5Z29uIHtcclxuICBjb25zdHJ1Y3RvcihyZWFkb25seSB2ZXJ0aWNlczogVmVjdG9yMltdID0gW10pIHtcclxuXHJcbiAgfVxyXG4gIHByaXZhdGUgYXJlYUJldHdlZW4oaTogbnVtYmVyLCBqOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgcmV0dXJuICh0aGlzLnZlcnRpY2VzW2pdLnggLSB0aGlzLnZlcnRpY2VzW2ldLngpICogKHRoaXMudmVydGljZXNbaV0ueSArIHRoaXMudmVydGljZXNbal0ueSkgLyAyO1xyXG4gIH1cclxuICBhcmVhKCk6IG51bWJlciB7XHJcbiAgICBsZXQgYSA9IDA7XHJcbiAgICBsZXQgaSA9IHRoaXMudmVydGljZXMubGVuZ3RoIC0gMTtcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICBhICs9IHRoaXMuYXJlYUJldHdlZW4oaSwgaik7XHJcbiAgICAgIGkgPSBqO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGE7XHJcbiAgfVxyXG4gIHNoYXJlRWRnZSh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogYm9vbGVhbiB7XHJcbiAgICBsZXQgaSA9IHRoaXMudmVydGljZXMubGVuZ3RoIC0gMTtcclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGorKykge1xyXG4gICAgICBpZiAodGhpcy52ZXJ0aWNlc1tpXS5lcXVhbHModSkgJiYgdGhpcy52ZXJ0aWNlc1tqXS5lcXVhbHModikpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBpID0gajtcclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgaW50ZXJzZWN0aW9uV2l0aChsaW5lOiBMaW5lKSB7XHJcbiAgICBcclxuICB9XHJcbiAgcmV2ZXJzZSgpOiB2b2lkIHtcclxuICAgIHRoaXMudmVydGljZXMucmV2ZXJzZSgpO1xyXG4gIH1cclxuICB0b1N0cmluZygpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIGAke3RoaXMudmVydGljZXMubGVuZ3RofSBwb2ludHM6IGAgKyB0aGlzLnZlcnRpY2VzLm1hcCh2ID0+IGAoJHt2LngudG9GaXhlZCgpfSwgJHt2LnkudG9GaXhlZCgpfSlgKS5qb2luKCcsICcpICsgYCAoYXJlYTogJHt0aGlzLmFyZWEoKS50b0ZpeGVkKCl9KWA7XHJcbiAgfVxyXG59IiwiaW1wb3J0IHsgUG9scGxvdFJlbmRlcmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9wb2xwbG90LXJlbmRlcmVyXCI7XHJcbmltcG9ydCB7IExpbmUgfSBmcm9tIFwiLi9saW5lXCI7XHJcbmltcG9ydCB7IFBvbHlnb24gfSBmcm9tIFwiLi9wb2x5Z29uXCI7XHJcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9scGxvdCB7XHJcbiAgbGluZXM6IExpbmVbXSA9IFtdO1xyXG4gIGludGVyc2VjdGlvblRpbWVzOiBudW1iZXJbXVtdID0gW107XHJcbiAgaW50ZXJzZWN0aW9uczogVmVjdG9yMltdID0gW107XHJcbiAgaW50ZXJzZWN0aW9uSW5kZXg6IG51bWJlcltdW10gPSBbXTtcclxuICBjb25zdHJ1Y3RvcihyZWFkb25seSByZW5kZXJlcjogUG9scGxvdFJlbmRlcmVyKSB7XHJcbiAgICBsZXQgZHJhZ2dlZExpbmU6IExpbmU7XHJcbiAgICBsZXQgZHJhZ2dlZFZlY3RvcjI6IFZlY3RvcjI7XHJcblxyXG4gICAgdGhpcy5yZW5kZXJlci5zZXRNb3VzZURvd25IYW5kbGVyKChldmVudCwgY2xpY2tlZExpbmUsIGNsaWNrZWRWZWN0b3IyKSA9PiB7XHJcbiAgICAgIGRyYWdnZWRMaW5lID0gY2xpY2tlZExpbmUgfHwgbnVsbDtcclxuICAgICAgZHJhZ2dlZFZlY3RvcjIgPSBjbGlja2VkVmVjdG9yMiB8fCBudWxsO1xyXG4gICAgICBpZiAoIWRyYWdnZWRMaW5lKSB7XHJcbiAgICAgICAgZHJhZ2dlZExpbmUgPSBuZXcgTGluZShldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZLCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcclxuICAgICAgICBkcmFnZ2VkVmVjdG9yMiA9IGRyYWdnZWRMaW5lLnYyO1xyXG4gICAgICAgIHRoaXMuYWRkTGluZShkcmFnZ2VkTGluZSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGxldCBzZWxlY3RlZExpbmU6IExpbmU7XHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldE1vdXNlVXBIYW5kbGVyKChldmVudCwgY2xpY2tlZExpbmUsIGNsaWNrZWRWZWN0b3IyKSA9PiB7XHJcbiAgICAgIGlmIChjbGlja2VkTGluZSkge1xyXG4gICAgICAgIGlmIChzZWxlY3RlZExpbmUgJiYgc2VsZWN0ZWRMaW5lICE9PSBjbGlja2VkTGluZSkge1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShzZWxlY3RlZExpbmUsIGNsaWNrZWRMaW5lID09PSBob3ZlcmVkTGluZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxlY3RlZExpbmUgPSBjbGlja2VkTGluZTtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKHNlbGVjdGVkTGluZSwgY2xpY2tlZExpbmUgPT09IGhvdmVyZWRMaW5lLCB0cnVlKTtcclxuICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZExpbmUpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKHNlbGVjdGVkTGluZSwgY2xpY2tlZExpbmUgPT09IGhvdmVyZWRMaW5lLCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgICAgZHJhZ2dlZExpbmUgPSBudWxsO1xyXG4gICAgICBkcmFnZ2VkVmVjdG9yMiA9IG51bGw7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgaG92ZXJlZExpbmU6IExpbmU7XHJcbiAgICB0aGlzLnJlbmRlcmVyLnNldE1vdXNlTW92ZUhhbmRsZXIoKGV2ZW50LCBjbGlja2VkTGluZSwgY2xpY2tlZFZlY3RvcjIpID0+IHtcclxuICAgICAgaWYgKGNsaWNrZWRMaW5lKSB7XHJcbiAgICAgICAgaWYgKGhvdmVyZWRMaW5lICYmIGhvdmVyZWRMaW5lICE9PSBjbGlja2VkTGluZSkge1xyXG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShob3ZlcmVkTGluZSwgZmFsc2UsIGNsaWNrZWRMaW5lID09PSBzZWxlY3RlZExpbmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBob3ZlcmVkTGluZSA9IGNsaWNrZWRMaW5lO1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoaG92ZXJlZExpbmUsIHRydWUsIGNsaWNrZWRMaW5lID09PSBzZWxlY3RlZExpbmUpOyBcclxuICAgICAgfSBlbHNlIGlmIChob3ZlcmVkTGluZSkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoaG92ZXJlZExpbmUsIGZhbHNlLCBjbGlja2VkTGluZSA9PT0gc2VsZWN0ZWRMaW5lKTtcclxuICAgICAgICBob3ZlcmVkTGluZSA9IG51bGw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGRyYWdnZWRMaW5lKSB7XHJcbiAgICAgICAgaWYgKGRyYWdnZWRWZWN0b3IyKSB7XHJcbiAgICAgICAgICBkcmFnZ2VkVmVjdG9yMi54ID0gZXZlbnQuY2xpZW50WDtcclxuICAgICAgICAgIGRyYWdnZWRWZWN0b3IyLnkgPSBldmVudC5jbGllbnRZO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBkcmFnZ2VkTGluZS51cGRhdGUoZXZlbnQubW92ZW1lbnRYLCBldmVudC5tb3ZlbWVudFksIGV2ZW50Lm1vdmVtZW50WCwgZXZlbnQubW92ZW1lbnRZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVJbnRlcnNlY3Rpb25UaW1lcyhkcmFnZ2VkTGluZSk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShkcmFnZ2VkTGluZSwgZHJhZ2dlZExpbmUgPT09IGhvdmVyZWRMaW5lLCBkcmFnZ2VkTGluZSA9PT0gc2VsZWN0ZWRMaW5lKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZExpbmUobGluZTogTGluZSk6IHZvaWQge1xyXG4gICAgdGhpcy5hZGRJbnRlcnNlY3Rpb25UaW1lcyhsaW5lKTtcclxuICAgIHRoaXMubGluZXMucHVzaChsaW5lKTtcclxuICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUobGluZSwgZmFsc2UsIGZhbHNlKTtcclxuICB9XHJcbiAgYWRkSW50ZXJzZWN0aW9uVGltZXMoXHJcbiAgICBsaW5lOiBMaW5lLFxyXG4gICAgbGluZXMgPSB0aGlzLmxpbmVzLFxyXG4gICAgaW50ZXJzZWN0aW9uVGltZXMgPSB0aGlzLmludGVyc2VjdGlvblRpbWVzLFxyXG4gICAgaW50ZXJzZWN0aW9ucyA9IHRoaXMuaW50ZXJzZWN0aW9ucyxcclxuICAgIGludGVyc2VjdGlvbkluZGV4ID0gdGhpcy5pbnRlcnNlY3Rpb25JbmRleCxcclxuICApOiB2b2lkIHtcclxuICAgIGNvbnN0IG5ld0ludGVyc2VjdGlvblRpbWVzOiBudW1iZXJbXSA9IFtdO1xyXG4gICAgY29uc3QgbmV3SW50ZXJzZWN0aW9uSW5kZXg6IG51bWJlcltdID0gW107XHJcbiAgICBsZXQgdGltZXM6IFZlY3RvcjI7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRpbWVzID0gbGluZXNbaV0uaW50ZXJzZWN0aW9uVGltZXNXaXRoKGxpbmUpO1xyXG4gICAgICBpbnRlcnNlY3Rpb25UaW1lc1tpXS5wdXNoKHRpbWVzLngpO1xyXG4gICAgICBpbnRlcnNlY3Rpb25zLnB1c2gobGluZXNbaV0ucG9pbnRBdCh0aW1lcy54KSk7XHJcbiAgICAgIGludGVyc2VjdGlvbkluZGV4W2ldLnB1c2goaW50ZXJzZWN0aW9ucy5sZW5ndGggLSAxKTtcclxuICAgICAgbmV3SW50ZXJzZWN0aW9uVGltZXMucHVzaCh0aW1lcy55KTtcclxuICAgICAgbmV3SW50ZXJzZWN0aW9uSW5kZXgucHVzaChpbnRlcnNlY3Rpb25zLmxlbmd0aCAtIDEpO1xyXG4gICAgfVxyXG4gICAgbmV3SW50ZXJzZWN0aW9uVGltZXMucHVzaChOYU4pO1xyXG4gICAgbmV3SW50ZXJzZWN0aW9uSW5kZXgucHVzaChudWxsKTtcclxuICAgIGludGVyc2VjdGlvblRpbWVzLnB1c2gobmV3SW50ZXJzZWN0aW9uVGltZXMpO1xyXG4gICAgaW50ZXJzZWN0aW9uSW5kZXgucHVzaChuZXdJbnRlcnNlY3Rpb25JbmRleCk7XHJcbiAgICB0aGlzLnJlbmRlckludGVyc2VjdGlvbnMoKTtcclxuICB9XHJcbiAgdXBkYXRlSW50ZXJzZWN0aW9uVGltZXMoXHJcbiAgICBsaW5lOiBMaW5lLFxyXG4gICAgbGluZXMgPSB0aGlzLmxpbmVzLFxyXG4gICAgaW50ZXJzZWN0aW9uVGltZXMgPSB0aGlzLmludGVyc2VjdGlvblRpbWVzLFxyXG4gICAgaW50ZXJzZWN0aW9ucyA9IHRoaXMuaW50ZXJzZWN0aW9ucyxcclxuICAgIGludGVyc2VjdGlvbkluZGV4ID0gdGhpcy5pbnRlcnNlY3Rpb25JbmRleCxcclxuICApOiB2b2lkIHtcclxuICAgIGNvbnN0IGluZGV4ID0gbGluZXMuaW5kZXhPZihsaW5lKTtcclxuICAgIGxldCB0aW1lczogVmVjdG9yMjtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGkgIT09IGluZGV4KSB7XHJcbiAgICAgICAgdGltZXMgPSBsaW5lc1tpXS5pbnRlcnNlY3Rpb25UaW1lc1dpdGgobGluZSk7XHJcbiAgICAgICAgaW50ZXJzZWN0aW9uVGltZXNbaV1baW5kZXhdID0gdGltZXMueDtcclxuICAgICAgICBpbnRlcnNlY3Rpb25UaW1lc1tpbmRleF1baV0gPSB0aW1lcy55O1xyXG4gICAgICAgIGlmIChpIDwgaW5kZXgpIHtcclxuICAgICAgICAgIGludGVyc2VjdGlvbnNbaW50ZXJzZWN0aW9uSW5kZXhbaV1baW5kZXhdXSA9IGxpbmVzW2ldLnBvaW50QXQodGltZXMueCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGludGVyc2VjdGlvbnNbaW50ZXJzZWN0aW9uSW5kZXhbaW5kZXhdW2ldXSA9IGxpbmVzW2ldLnBvaW50QXQodGltZXMueCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICB0aGlzLnJlbmRlckludGVyc2VjdGlvbnMoKTtcclxuICB9XHJcbiAgcmVuZGVySW50ZXJzZWN0aW9ucygpOiB2b2lkIHtcclxuICAgIGNvbnNvbGUubG9nKCdyZW5kZXJJbnRlcnNlY3Rpb25zJyk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLmludGVyc2VjdGlvblRpbWVzKTtcclxuICAgIGNvbnNvbGUubG9nKHRoaXMuaW50ZXJzZWN0aW9ucyk7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLmludGVyc2VjdGlvbkluZGV4KTtcclxuICAgIHRoaXMucmVuZGVyZXIuY2xlYXJJbnRlcnNlY3Rpb25zKCk7XHJcbiAgICB0aGlzLmludGVyc2VjdGlvbnMuZm9yRWFjaChpbnRlcnNlY3Rpb24gPT4ge1xyXG4gICAgICB0aGlzLnJlbmRlcmVyLmRyYXdQb2ludChpbnRlcnNlY3Rpb24pO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnJlbmRlcmVyLmNsZWFyUG9seWdvbnMoKTtcclxuICAgIGNvbnN0IHBhcnRpYWxzID0gdGhpcy5idWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvblRpbWVzKCk7XHJcbiAgICBjb25zdCBwb2x5Z29uSW5kZXhlcyA9IHRoaXMuYnVpbGRQb2x5Z29uSW5kZXhlc0Zyb21QYXJ0aWFscyhwYXJ0aWFscyk7XHJcbiAgICBjb25zdCBwb2x5Z29ucyA9IHBvbHlnb25JbmRleGVzLm1hcChwb2x5Z29uSW5kZXggPT4gbmV3IFBvbHlnb24ocG9seWdvbkluZGV4Lm1hcChpID0+IHRoaXMuaW50ZXJzZWN0aW9uc1tpXSkpKTtcclxuICAgIHBvbHlnb25zLmZvckVhY2gocG9seWdvbiA9PiB7XHJcbiAgICAgIGlmIChwb2x5Z29uLmFyZWEoKSA+IDApIHtcclxuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdQb2x5Z29uKHBvbHlnb24pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbiAgdGVzdFNpZGUodTogVmVjdG9yMiwgdjogVmVjdG9yMiwgdzogVmVjdG9yMik6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHYuc3ViKHUpLmNyb3NzKHcuc3ViKHUpKSA+IDA7XHJcbiAgfVxyXG4gIHBhcnRpYWxzT3ZlcmxhcHMocDE6IG51bWJlcltdLCBwMjogbnVtYmVyW10pOiBib29sZWFuIHtcclxuICAgIHJldHVybiBwMVtwMS5sZW5ndGggLSAyXSA9PT0gcDJbMF0gJiYgcDFbcDEubGVuZ3RoIC0gMV0gPT09IHAyWzFdO1xyXG4gIH1cclxuICBidWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvbkluZGV4ZXMoXHJcbiAgICBjZW50ZXI6IG51bWJlcixcclxuICAgIGluZGV4ZXM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLFxyXG4gICk6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdIHtcclxuICAgIGNvbnN0IHBhcnRzOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICh0eXBlb2YgaW5kZXhlc1tpXSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICBsZXQgaiA9IGkgKyAxO1xyXG4gICAgICAgIGlmIChqID09PSBpbmRleGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgaiA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdoaWxlICh0eXBlb2YgaW5kZXhlc1tqXSAhPT0gJ251bWJlcicpwqB7XHJcbiAgICAgICAgICBqKys7XHJcbiAgICAgICAgICBpZiAoaiA9PT0gaW5kZXhlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgaiA9IDA7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpICE9PSBqKSB7XHJcbiAgICAgICAgICBwYXJ0cy5wdXNoKFtpbmRleGVzW2ldLCBjZW50ZXIsIGluZGV4ZXNbal1dKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJ0cztcclxuICB9XHJcbiAgYnVpbGRQYXJ0aWFsc0Zyb21JbnRlcnNlY3Rpb25UaW1lcyhcclxuICAgIGxpbmVzID0gdGhpcy5saW5lcyxcclxuICAgIGludGVyc2VjdGlvblRpbWVzID0gdGhpcy5pbnRlcnNlY3Rpb25UaW1lcyxcclxuICAgIGludGVyc2VjdGlvbkluZGV4ID0gdGhpcy5pbnRlcnNlY3Rpb25JbmRleFxyXG4gICk6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdidWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvblRpbWVzJyk7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ2xpbmVzLmxlbmd0aCA9ICcsIGxpbmVzLmxlbmd0aCk7XHJcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXkgPSBpbnRlcnNlY3Rpb25UaW1lc1xyXG4gICAgICAubWFwKChpbnRlcnNlY3Rpb25UaW1lc0F0SSwgaSkgPT4ge1xyXG4gICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb25UaW1lc0F0SVxyXG4gICAgICAgICAgLm1hcCgoXywgaikgPT4gailcclxuICAgICAgICAgIC5maWx0ZXIoaiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaXNOYU4oaW50ZXJzZWN0aW9uVGltZXNBdElbal0pICYmIDAgPD0gaW50ZXJzZWN0aW9uVGltZXNBdElbal0gJiYgaW50ZXJzZWN0aW9uVGltZXNBdElbal0gPD0gMSAmJlxyXG4gICAgICAgICAgICAgICFpc05hTihpbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSkgJiYgMCA8PSBpbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSAmJiBpbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSA8PSAxO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5zb3J0KChpLCBqKSA9PiBpbnRlcnNlY3Rpb25UaW1lc0F0SVtpXSAtIGludGVyc2VjdGlvblRpbWVzQXRJW2pdKTtcclxuICAgICAgfSk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXkpO1xyXG4gICAgY29uc3QgcGFydGlhbHM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdID0gW107XHJcbiAgICBmb3IgKGxldCBsb2NhbEluZGV4ID0gMDsgbG9jYWxJbmRleCA8IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheS5sZW5ndGg7IGxvY2FsSW5kZXgrKykge1xyXG4gICAgICBmb3IgKGxldCBsb2NhbEludGVySW5kZXggPSAwOyBsb2NhbEludGVySW5kZXggPCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF0ubGVuZ3RoOyBsb2NhbEludGVySW5kZXgrKykge1xyXG4gICAgICAgIGNvbnN0IGZvcmVpZ25JbmRleCA9IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XVtsb2NhbEludGVySW5kZXhdO1xyXG4gICAgICAgIGlmIChsb2NhbEluZGV4IDwgZm9yZWlnbkluZGV4KSB7XHJcbiAgICAgICAgICBjb25zdCBpbnRlciA9IGludGVyc2VjdGlvbkluZGV4W2xvY2FsSW5kZXhdW2ludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XVtsb2NhbEludGVySW5kZXhdXTtcclxuXHJcbiAgICAgICAgICBjb25zdCBwcmV2TG9jYWxJbnRlckluZGV4ID0gbG9jYWxJbnRlckluZGV4IC0gMTtcclxuICAgICAgICAgIGNvbnN0IG5leHRMb2NhbEludGVySW5kZXggPSBsb2NhbEludGVySW5kZXggKyAxO1xyXG5cclxuICAgICAgICAgIGNvbnN0IGZvcmVpZ25JbnRlckluZGV4ID0gaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF0uZmluZEluZGV4KGkgPT4gaSA9PT0gbG9jYWxJbmRleCk7XHJcbiAgICAgICAgICBjb25zdCBmb3JlaWduaXNSaWdodFNpZGVkID0gdGhpcy50ZXN0U2lkZShsaW5lc1tsb2NhbEluZGV4XS52MSwgbGluZXNbbG9jYWxJbmRleF0udjIsIGxpbmVzW2ZvcmVpZ25JbmRleF0udjEpO1xyXG4gICAgICAgICAgY29uc3QgcHJldkZvcmVpZ25JbnRlckluZGV4ID0gZm9yZWlnbmlzUmlnaHRTaWRlZCA/IGZvcmVpZ25JbnRlckluZGV4IC0gMSA6IGZvcmVpZ25JbnRlckluZGV4ICsgMTtcclxuICAgICAgICAgIGNvbnN0IG5leHRGb3JlaWduSW50ZXJJbmRleCA9IGZvcmVpZ25pc1JpZ2h0U2lkZWQgPyBmb3JlaWduSW50ZXJJbmRleCArIDEgOiBmb3JlaWduSW50ZXJJbmRleCAtIDE7XHJcblxyXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coYFxyXG4gICAgICAgICAgLy8gICBsb2NhbEluZGV4OiAke2xvY2FsSW5kZXh9XHJcbiAgICAgICAgICAvLyAgIGxvY2FsSW50ZXJzZWN0aW9ucyAke2ludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XVxyXG4gICAgICAgICAgLy8gICAgIC5tYXAoKF8sIGkpID0+IGkgPT09IGxvY2FsSW50ZXJJbmRleCA/IGBbJHtffV1gIDogXylcclxuICAgICAgICAgIC8vICAgICAuam9pbignLCAnKX1cclxuICAgICAgICAgIC8vICAgZm9yZWlnbkluZGV4OiAke2ZvcmVpZ25JbmRleH1cclxuICAgICAgICAgIC8vICAgZm9yZWlnbkludGVyc2VjdGlvbnMgJHtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbZm9yZWlnbkluZGV4XVxyXG4gICAgICAgICAgLy8gICAgIC5tYXAoKF8sIGkpID0+IGkgPT09IGZvcmVpZ25JbnRlckluZGV4ID8gYFske199XWAgOiBfKVxyXG4gICAgICAgICAgLy8gICAgIC5qb2luKCcsICcpfVxyXG4gICAgICAgICAgLy8gYCk7XHJcblxyXG4gICAgICAgICAgY29uc3QgcHJldkxvY2FsSW50ZXIgPSAwIDwgbG9jYWxJbnRlckluZGV4XHJcbiAgICAgICAgICAgID8gaW50ZXJzZWN0aW9uSW5kZXhbbG9jYWxJbmRleF1baW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2xvY2FsSW5kZXhdW3ByZXZMb2NhbEludGVySW5kZXhdXVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICBjb25zdCBuZXh0TG9jYWxJbnRlciA9IGxvY2FsSW50ZXJJbmRleCA8IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XS5sZW5ndGggLSAxXHJcbiAgICAgICAgICAgID8gaW50ZXJzZWN0aW9uSW5kZXhbbG9jYWxJbmRleF1baW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2xvY2FsSW5kZXhdW25leHRMb2NhbEludGVySW5kZXhdXVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICBjb25zdCBwcmV2Rm9yZWlnbkludGVyID0gLTEgPCBwcmV2Rm9yZWlnbkludGVySW5kZXggJiYgcHJldkZvcmVpZ25JbnRlckluZGV4IDwgaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF0ubGVuZ3RoXHJcbiAgICAgICAgICAgID8gaW50ZXJzZWN0aW9uSW5kZXhbZm9yZWlnbkluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbZm9yZWlnbkluZGV4XVtwcmV2Rm9yZWlnbkludGVySW5kZXhdXVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICBjb25zdCBuZXh0Rm9yZWlnbkludGVyID0gLTEgPCBuZXh0Rm9yZWlnbkludGVySW5kZXggJiYgbmV4dEZvcmVpZ25JbnRlckluZGV4IDwgaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF0ubGVuZ3RoXHJcbiAgICAgICAgICAgID8gaW50ZXJzZWN0aW9uSW5kZXhbZm9yZWlnbkluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbZm9yZWlnbkluZGV4XVtuZXh0Rm9yZWlnbkludGVySW5kZXhdXVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIF5cclxuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgfFxyXG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgbmV4dEZvcmVpZ25JbnRlclxyXG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICAvLyAgLS0tcHJldkxvY2FsSW50ZXItLS1pbnRlci0tLW5leHRMb2NhbEludGVyLS0tPlxyXG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB8XHJcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICBwcmV2Rm9yZWlnbkludGVyXHJcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHxcclxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gdGhpcy5idWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvbkluZGV4ZXMoXHJcbiAgICAgICAgICAgIGludGVyLFxyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgcHJldkxvY2FsSW50ZXIsXHJcbiAgICAgICAgICAgICAgbmV4dEZvcmVpZ25JbnRlcixcclxuICAgICAgICAgICAgICBuZXh0TG9jYWxJbnRlcixcclxuICAgICAgICAgICAgICBwcmV2Rm9yZWlnbkludGVyXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBwYXJ0aWFscy5wdXNoKC4uLnBhcnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGNvbnNvbGUubG9nKCdwYXJ0aWFscycsIHBhcnRpYWxzKTtcclxuICAgIHJldHVybiBwYXJ0aWFscztcclxuICB9XHJcbiAgYnVpbGRQb2x5Z29uSW5kZXhlc0Zyb21QYXJ0aWFscyhwYXJ0aWFsczogW251bWJlciwgbnVtYmVyLCBudW1iZXJdW10pOiBudW1iZXJbXVtdIHtcclxuICAgIGNvbnN0IHBvbHlnb25JbmRleGVzOiBudW1iZXJbXVtdID0gW107XHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICB3aGlsZSAoaSA8IHBhcnRpYWxzLmxlbmd0aCkge1xyXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhcnRpYWxzLmxlbmd0aDsgaisrKcKge1xyXG4gICAgICAgIGlmIChpICE9PSBqKSB7XHJcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWFsc092ZXJsYXBzKHBhcnRpYWxzW2ldLCBwYXJ0aWFsc1tqXSkpIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFxyXG4gICAgICAgICAgICAvLyAgIHBhcnRpYWxzW2ldOiAke3BhcnRpYWxzW2ldLnRvU3RyaW5nKCl9LFxyXG4gICAgICAgICAgICAvLyAgIHBhcnRpYWxzW2pdOiAke3BhcnRpYWxzW2pdLnRvU3RyaW5nKCl9LFxyXG4gICAgICAgICAgICAvLyBgKTtcclxuICAgICAgICAgICAgcGFydGlhbHNbaV0uc3BsaWNlKC0yLCAyLCAuLi5wYXJ0aWFsc1tqXSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBcclxuICAgICAgICAgICAgLy8gICBwYXJ0aWFsc1tpXTogJHtwYXJ0aWFsc1tpXS50b1N0cmluZygpfSBbTkVXXSxcclxuICAgICAgICAgICAgLy8gYCk7XHJcbiAgICAgICAgICAgIHBhcnRpYWxzLnNwbGljZShqLCAxKTtcclxuICAgICAgICAgICAgaWYgKGogPCBpKSB7XHJcbiAgICAgICAgICAgICAgaS0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnRpYWxzT3ZlcmxhcHMocGFydGlhbHNbaV0sIHBhcnRpYWxzW2ldKSkge1xyXG4gICAgICAgICAgICAgIHBhcnRpYWxzW2ldLnNwbGljZSgwLCAyKTtcclxuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgXHJcbiAgICAgICAgICAgICAgLy8gICBwYXJ0aWFsc1tpXTogJHtwYXJ0aWFsc1tpXS50b1N0cmluZygpfSBbQ0xPU0VEXSxcclxuICAgICAgICAgICAgICAvLyBgKTtcclxuICAgICAgICAgICAgICBwb2x5Z29uSW5kZXhlcy5wdXNoKHBhcnRpYWxzW2ldKTtcclxuICAgICAgICAgICAgICBwYXJ0aWFscy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaSA9IC0xO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaSsrO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2coJ2luY29tcGxldGUgcG9seWdvbnMnKTtcclxuICAgIC8vIHBhcnRpYWxzLm1hcChwID0+IGNvbnNvbGUubG9nKHAudG9TdHJpbmcoKSkpO1xyXG4gICAgLy8gY29uc29sZS5sb2coJ3BvbHlnb25zJywgcG9seWdvbnMpO1xyXG4gICAgLy8gcG9seWdvbnMubWFwKHAgPT4gY29uc29sZS5sb2cocC50b1N0cmluZygpKSk7XHJcbiAgICByZXR1cm4gcG9seWdvbkluZGV4ZXM7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBjb25zdCBsaW5lczogTGluZVtdID0gW107XHJcbi8vIGNvbnN0IGlUaW1lczogbnVtYmVyW11bXSA9IFtdO1xyXG4vLyBjb25zdCBpUG9pbnRzOiBWZWN0b3IyW11bXSA9IFtdO1xyXG4vLyBbXHJcbi8vICAgWzMwMCwgMzAwLCA2MDAsIDYwMF0sXHJcbi8vICAgWzMwMCwgNjAwLCA2MDAsIDMwMF0sXHJcbi8vICAgWzQwMCwgMzAwLCAzMDAsIDQwMF0sXHJcbi8vICAgWzUwMCwgNjAwLCA2MDAsIDQwMF0sXHJcbi8vICAgWzMwMCwgNTAwLCA0MDAsIDYwMF0sXHJcbi8vICAgWzUwMCwgNjAwLCA2MDAsIDQwMF0sXHJcbi8vIF0uZm9yRWFjaCgoW3gxLCB5MSwgeDIsIHkyXSkgPT4ge1xyXG4vLyAgIHRoaXMuYWRkSW50ZXJzZWN0aW9uVGltZXMobDEsIGxpbmVzLCBpVGltZXMsIGlQb2ludHMpO1xyXG4vLyAgIGxpbmVzLnB1c2gobDEpO1xyXG4vLyB9KTtcclxuLy8gY29uc3QgcGFydGlhbHMgPSB0aGlzLmJ1aWxkUGFydGlhbHNGcm9tSW50ZXJzZWN0aW9uVGltZXMobGluZXMsIGlUaW1lcyk7XHJcbi8vIGNvbnNvbGUubG9nKHBhcnRpYWxzKTsiLCJpbXBvcnQgeyBDbGlja0hhbmRsZXIsIFBvbHBsb3RSZW5kZXJlciB9IGZyb20gXCIuL2ludGVyZmFjZXMvcG9scGxvdC1yZW5kZXJlclwiO1xyXG5pbXBvcnQgeyBMaW5lIH0gZnJvbSBcIi4vbGluZVwiO1xyXG5pbXBvcnQgeyBQb2x5Z29uIH0gZnJvbSBcIi4vcG9seWdvblwiO1xyXG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xyXG5cclxuY29uc3QgZ1RlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XHJcbmdUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdibGFjaycpO1xyXG5nVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMC40cHgnKTtcclxuXHJcbmNvbnN0IGxpbmVUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xyXG5saW5lVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5JywgJzEwLCA0LCAxLCA0Jyk7XHJcblxyXG5jb25zdCBhbmNob3JUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xyXG5hbmNob3JUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoXHJcbiAgJ2QnLFxyXG4gICdNIDAsIDAnICtcclxuICAnQSAxMCwgMTAsIDAsIDAsIDAsIC01LCAtNScgKyBcclxuICAnQSAxMCwgMTAsIDAsIDEsIDEsIDUsIC01JyArXHJcbiAgJ0EgMTAsIDEwLCAwLCAwLCAwLCAwLCAwJ1xyXG4pO1xyXG5hbmNob3JUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnd2hpdGUnKTtcclxuXHJcbmdUZW1wbGF0ZS5hcHBlbmRDaGlsZChsaW5lVGVtcGxhdGUpO1xyXG5nVGVtcGxhdGUuYXBwZW5kQ2hpbGQoYW5jaG9yVGVtcGxhdGUpO1xyXG5nVGVtcGxhdGUuYXBwZW5kQ2hpbGQoYW5jaG9yVGVtcGxhdGUuY2xvbmVOb2RlKCkpO1xyXG5cclxuY29uc3QgcG9pbnRUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnY2lyY2xlJyk7XHJcbnBvaW50VGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2dyZWVuJyk7XHJcbnBvaW50VGVtcGxhdGUuc2V0QXR0cmlidXRlKCdyJywgJzMnKTtcclxuXHJcbmNvbnN0IHBvbHlnb25UZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xyXG5wb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2dyZWVuJyk7XHJcbnBvbHlnb25UZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwtb3BhY2l0eScsICcwLjcnKTtcclxucG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzMnKTtcclxucG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2dyZXknKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdmdSZW5kZXJlciBpbXBsZW1lbnRzIFBvbHBsb3RSZW5kZXJlciB7XHJcbiAgcmVhZG9ubHkgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcclxuICBwcml2YXRlIGludGVyc2VjdGlvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xyXG4gIHByaXZhdGUgcG9seWdvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xyXG4gIHByaXZhdGUgc3ZnR0J5TGluZSA9IG5ldyBNYXA8TGluZSwgU1ZHR0VsZW1lbnQ+KCk7XHJcbiAgcHJpdmF0ZSBsaW5lQnlTdmdHID0gbmV3IE1hcDxTVkdHRWxlbWVudCwgTGluZT4oKTtcclxuICBwcml2YXRlIG9uTW91c2VEb3duOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IGFueTtcclxuICBwcml2YXRlIG9uTW91c2VVcDogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhbnk7XHJcbiAgcHJpdmF0ZSBvbk1vdXNlTW92ZTogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhbnk7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLmludGVyc2VjdGlvbkNvbnRhaW5lcik7XHJcbiAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLnBvbHlnb25Db250YWluZXIpO1xyXG4gIH1cclxuICBjbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhbnkge1xyXG4gICAgcmV0dXJuIGV2ZW50ID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudEF0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcclxuICAgICAgY29uc3QgbGluZSA9IHRoaXMubGluZUJ5U3ZnRy5nZXQoZWxlbWVudEF0LnBhcmVudE5vZGUgYXMgU1ZHR0VsZW1lbnQpO1xyXG4gICAgICBpZiAoZWxlbWVudEF0IGluc3RhbmNlb2YgU1ZHUGF0aEVsZW1lbnQgJiYgZWxlbWVudEF0LnBhcmVudE5vZGUgIT09IHRoaXMucG9seWdvbkNvbnRhaW5lcikge1xyXG4gICAgICAgIGlmIChlbGVtZW50QXQucGFyZW50Tm9kZS5jaGlsZHJlblsxXSA9PT0gZWxlbWVudEF0KSB7XHJcbiAgICAgICAgICBjbGlja0hhbmRsZXIoZXZlbnQsIGxpbmUsIGxpbmUudjEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBjbGlja0hhbmRsZXIoZXZlbnQsIGxpbmUsIGxpbmUudjIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChlbGVtZW50QXQgaW5zdGFuY2VvZiBTVkdMaW5lRWxlbWVudCkge1xyXG4gICAgICAgIGNsaWNrSGFuZGxlcihldmVudCwgbGluZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY2xpY2tIYW5kbGVyKGV2ZW50KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcbiAgc2V0TW91c2VEb3duSGFuZGxlcihjbGlja0hhbmRsZXI6IENsaWNrSGFuZGxlcik6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMub25Nb3VzZURvd24pIHtcclxuICAgICAgdGhpcy5zdmcucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XHJcbiAgICB9XHJcbiAgICB0aGlzLm9uTW91c2VEb3duID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XHJcbiAgICB0aGlzLnN2Zy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcclxuICB9XHJcbiAgc2V0TW91c2VVcEhhbmRsZXIoY2xpY2tIYW5kbGVyOiBDbGlja0hhbmRsZXIpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLm9uTW91c2VVcCkge1xyXG4gICAgICB0aGlzLnN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xyXG4gICAgfVxyXG4gICAgdGhpcy5vbk1vdXNlVXAgPSB0aGlzLmNsaWNrSGFuZGxlcldyYXBwZXIoY2xpY2tIYW5kbGVyKTtcclxuICAgIHRoaXMuc3ZnLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XHJcbiAgfVxyXG4gIHNldE1vdXNlTW92ZUhhbmRsZXIoY2xpY2tIYW5kbGVyOiBDbGlja0hhbmRsZXIpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLm9uTW91c2VNb3ZlKSB7XHJcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5vbk1vdXNlTW92ZSA9IHRoaXMuY2xpY2tIYW5kbGVyV3JhcHBlcihjbGlja0hhbmRsZXIpO1xyXG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XHJcbiAgfVxyXG4gIGRyYXdMaW5lKGxpbmU6IExpbmUsIGlzSG92ZXJlZCA9IGZhbHNlLCBpc1NlbGVjdGVkID0gZmFsc2UpOiB2b2lkIHtcclxuICAgIGxldCBzdmdHOiBTVkdHRWxlbWVudDtcclxuICAgIGlmICghdGhpcy5zdmdHQnlMaW5lLmhhcyhsaW5lKSkge1xyXG4gICAgICBzdmdHID0gZ1RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKSBhcyBTVkdHRWxlbWVudDtcclxuICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQoc3ZnRyk7XHJcbiAgICAgIHRoaXMuc3ZnR0J5TGluZS5zZXQobGluZSwgc3ZnRyk7XHJcbiAgICAgIHRoaXMubGluZUJ5U3ZnRy5zZXQoc3ZnRywgbGluZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdmdHID0gdGhpcy5zdmdHQnlMaW5lLmdldChsaW5lKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHN2Z0xpbmUgPSBzdmdHLmNoaWxkcmVuWzBdIGFzIFNWR0xpbmVFbGVtZW50O1xyXG4gICAgY29uc3Qgc3ZnUGF0aEFuY2hvclN0YXJ0ID0gc3ZnRy5jaGlsZHJlblsxXSBhcyBTVkdQYXRoRWxlbWVudDtcclxuICAgIGNvbnN0IHN2Z1BhdGhBbmNob3JFbmQgPSBzdmdHLmNoaWxkcmVuWzJdIGFzIFNWR1BhdGhFbGVtZW50O1xyXG4gICAgY29uc3QgeDEgPSBsaW5lLngxLnRvRml4ZWQoKTtcclxuICAgIGNvbnN0IHkxID0gbGluZS55MS50b0ZpeGVkKCk7XHJcbiAgICBjb25zdCB4MiA9IGxpbmUueDIudG9GaXhlZCgpO1xyXG4gICAgY29uc3QgeTIgPSBsaW5lLnkyLnRvRml4ZWQoKTtcclxuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd4MScsIHgxKTtcclxuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd5MScsIHkxKTtcclxuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd4MicsIHgyKTtcclxuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd5MicsIHkyKTtcclxuICAgIGlmIChpc0hvdmVyZWQpIHtcclxuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcwLjhweCcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcwLjRweCcpO1xyXG4gICAgfVxyXG4gICAgaWYgKGlzU2VsZWN0ZWQpIHtcclxuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMTlhMTk0Jyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzdmdHLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2JsYWNrJyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBhbmdsZSA9IDE4MCAqIChsaW5lLnYyLnN1YihsaW5lLnYxKS5hbmdsZSgpIC0gTWF0aC5QSSAvIDIpIC8gTWF0aC5QSTtcclxuICAgIHN2Z1BhdGhBbmNob3JTdGFydC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt4MX0sICR7eTF9KSByb3RhdGUoJHtpc05hTihhbmdsZSkgPyAwIDogYW5nbGV9KWApO1xyXG4gICAgc3ZnUGF0aEFuY2hvckVuZC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt4Mn0sICR7eTJ9KSByb3RhdGUoJHtpc05hTihhbmdsZSkgPyAwIDogMTgwICsgYW5nbGV9KWApO1xyXG4gIH1cclxuICBlcmFzZUxpbmUobGluZTogTGluZSk6IHZvaWQge1xyXG4gICAgY29uc3Qgc3ZnRyA9IHRoaXMuc3ZnR0J5TGluZS5nZXQobGluZSk7XHJcbiAgICBpZiAoc3ZnRykge1xyXG4gICAgICB0aGlzLnN2Zy5yZW1vdmVDaGlsZChzdmdHKTtcclxuICAgICAgdGhpcy5zdmdHQnlMaW5lLmRlbGV0ZShsaW5lKTtcclxuICAgIH1cclxuICB9XHJcbiAgZHJhd1BvaW50KHBvaW50OiBWZWN0b3IyKTogdm9pZCB7XHJcbiAgICBjb25zdCBzdmdDaXJjbGUgPSBwb2ludFRlbXBsYXRlLmNsb25lTm9kZSgpIGFzIFNWR0NpcmNsZUVsZW1lbnQ7XHJcbiAgICBzdmdDaXJjbGUuc2V0QXR0cmlidXRlKCdjeCcsIHBvaW50LngudG9GaXhlZCgpKTtcclxuICAgIHN2Z0NpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N5JywgcG9pbnQueS50b0ZpeGVkKCkpO1xyXG4gICAgdGhpcy5pbnRlcnNlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoc3ZnQ2lyY2xlKTtcclxuICB9XHJcbiAgcHJpdmF0ZSBjbGVhckNvbnRhaW5lcihjb250YWluZXI6IFNWR0dFbGVtZW50KTogdm9pZCB7XHJcbiAgICB3aGlsZSAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcclxuICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGNvbnRhaW5lci5maXJzdENoaWxkKTtcclxuICAgIH1cclxuICB9XHJcbiAgY2xlYXJJbnRlcnNlY3Rpb25zKCk6IHZvaWQge1xyXG4gICAgdGhpcy5jbGVhckNvbnRhaW5lcih0aGlzLmludGVyc2VjdGlvbkNvbnRhaW5lcik7XHJcbiAgfVxyXG4gIGRyYXdQb2x5Z29uKHBvbHlnb246IFBvbHlnb24pOiB2b2lkIHtcclxuICAgIGNvbnN0IHN2Z1BhdGggPSBwb2x5Z29uVGVtcGxhdGUuY2xvbmVOb2RlKCkgYXMgU1ZHUGF0aEVsZW1lbnQ7XHJcbiAgICBzdmdQYXRoLnNldEF0dHJpYnV0ZSgnZCcsICdNICcgKyBwb2x5Z29uLnZlcnRpY2VzLm1hcCh2ID0+IGAke3YueC50b0ZpeGVkKCl9ICR7di55LnRvRml4ZWQoKX1gKS5qb2luKCcgTCAnKSArICdaJyk7XHJcbiAgICBzdmdQYXRoLnNldEF0dHJpYnV0ZSgnZmlsbCcsICcjJyArIChNYXRoLmZsb29yKCgxNjc3NzIxNSAtIDFlNSkgKiBNYXRoLnJhbmRvbSgpKSArIDFlNSkudG9TdHJpbmcoMTYpKTtcclxuICAgIHRoaXMucG9seWdvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzdmdQYXRoKTtcclxuICB9XHJcbiAgY2xlYXJQb2x5Z29ucygpOiB2b2lkIHtcclxuICAgIHRoaXMuY2xlYXJDb250YWluZXIodGhpcy5wb2x5Z29uQ29udGFpbmVyKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBQb2xwbG90IH0gZnJvbSBcIi4vcG9scGxvdFwiO1xyXG5pbXBvcnQgeyBTdmdSZW5kZXJlciB9IGZyb20gXCIuL3N2Zy1yZW5kZXJlclwiO1xyXG5cclxuY29uc3Qgc3ZnUmVuZGVyZXIgPSBuZXcgU3ZnUmVuZGVyZXIoKTtcclxuY29uc3QgcG9scGxvdCA9IG5ldyBQb2xwbG90KHN2Z1JlbmRlcmVyKTtcclxuY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuYm9keS5hcHBlbmRDaGlsZChzdmdSZW5kZXJlci5zdmcpOyJdLCJzb3VyY2VSb290IjoiIn0=