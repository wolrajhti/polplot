(()=>{"use strict";var t=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.dotRaw=function(t,e,n,r){return t*n+e*r},t.dot=function(t,e){return this.dotRaw(t.x,t.y,e.x,e.y)},t.prototype.dot=function(e){return t.dot(this,e)},t.crossRaw=function(t,e,n,r){return t*r-n*e},t.cross=function(t,e){return this.crossRaw(t.x,t.y,e.x,e.y)},t.prototype.cross=function(e){return t.cross(this,e)},t.lenRaw=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},t.len=function(t){return this.lenRaw(t.x,t.y)},t.prototype.len=function(){return t.len(this)},t.normalizeRaw=function(t,e,n){void 0===n&&(n=1);var r=n/this.lenRaw(t,e);return this.mulRaw(t,e,r)},t.normalize=function(t,e){return void 0===e&&(e=1),this.normalizeRaw(t.x,t.y,e)},t.prototype.normalize=function(e){return void 0===e&&(e=1),t.normalize(this,e)},t.equalsRaw=function(t,e,n,r){return t===n&&e===r},t.equals=function(t,e){return this.equalsRaw(t.x,t.y,e.x,e.y)},t.prototype.equals=function(e){return t.equals(this,e)},t.addRaw=function(e,n,r,i){return new t(e+r,n+i)},t.add=function(t,e){return this.addRaw(t.x,t.y,e.x,e.y)},t.prototype.add=function(e){return t.add(this,e)},t.subRaw=function(e,n,r,i){return new t(e-r,n-i)},t.sub=function(t,e){return this.subRaw(t.x,t.y,e.x,e.y)},t.prototype.sub=function(e){return t.sub(this,e)},t.mulRaw=function(e,n,r){return new t(e*r,n*r)},t.mul=function(t,e){return this.mulRaw(t.x,t.y,e)},t.prototype.mul=function(e){return t.mul(this,e)},t.intersectionTimesRaw=function(e,n,r,i,o,s,u,a){var h=this.crossRaw(r-e,i-n,u-o,a-s);return new t(this.crossRaw(u-o,a-s,e-o,n-s)/h,this.crossRaw(r-e,i-n,e-o,n-s)/h)},t.intersectionTimes=function(t,e,n,r){return this.intersectionTimesRaw(t.x,t.y,e.x,e.y,n.x,n.y,r.x,r.y)},t.prototype.intersectionTimes=function(e,n,r){return t.intersectionTimes(this,e,n,r)},t.intersectionRaw=function(t,e,n,r,i,o,s,u){var a=this.intersectionTimesRaw(t,e,n,r,i,o,s,u);if(a)return a.y=e+(r-e)*a.x,a.x=t+(n-t)*a.x,a},t.intersection=function(t,e,n,r){return this.intersectionRaw(t.x,t.y,e.x,e.y,n.x,n.y,r.x,r.y)},t.prototype.intersection=function(e,n,r){return t.intersection(this,e,n,r)},t.prototype.angle=function(t){if(t){var e=this.angle(),n=t.angle();return n<e?n+2*Math.PI-e:n-e}return this.y>0?Math.acos(this.x/this.len()):2*Math.PI-Math.acos(this.x/this.len())},t}(),e=function(){function e(e,n,r,i){this.v1=new t(e,n),this.v2=new t(r,i)}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.v1.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.v1.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.v2.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.v2.y},enumerable:!1,configurable:!0}),e.prototype.len=function(){return this.v2.sub(this.v1).len()},e.prototype.before=function(t){return this.v1.add(this.v2.sub(this.v1).mul(-t/this.len()))},e.prototype.after=function(t){return this.v1.add(this.v2.sub(this.v1).mul((this.len()+t)/this.len()))},e.prototype.intersectionTimesWith=function(t){return this.v1.intersectionTimes(this.v2,t.v1,t.v2)},e.prototype.update=function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.v1.x+=t,this.v1.y+=e,this.v2.x+=n,this.v2.y+=r},e}(),n=document.createElementNS("http://www.w3.org/2000/svg","g");n.setAttribute("stroke","black"),n.setAttribute("stroke-width","0.4px");var r=document.createElementNS("http://www.w3.org/2000/svg","line");r.setAttribute("stroke-dasharray","10, 4, 1, 4");var i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d","M 0, 0A 10, 10, 0, 0, 0, -5, -5A 10, 10, 0, 1, 1, 5, -5A 10, 10, 0, 0, 0, 0, 0"),i.setAttribute("fill","white"),n.appendChild(r),n.appendChild(i),n.appendChild(i.cloneNode());var o=new(function(){function t(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgGByLine=new Map,this.lineBySvgG=new Map}return t.prototype.clickHandlerWrapper=function(t){var e=this;return function(n){var r=document.elementFromPoint(n.clientX,n.clientY),i=e.lineBySvgG.get(r.parentNode);r instanceof SVGPathElement?r.parentNode.children[1]===r?t(n,i,i.v1):t(n,i,i.v2):r instanceof SVGLineElement?t(n,i):t(n)}},t.prototype.setMouseDownHandler=function(t){this.onMouseDown&&this.svg.removeEventListener("mousedown",this.onMouseDown),this.onMouseDown=this.clickHandlerWrapper(t),this.svg.addEventListener("mousedown",this.onMouseDown)},t.prototype.setMouseUpHandler=function(t){this.onMouseUp&&this.svg.removeEventListener("mouseup",this.onMouseUp),this.onMouseUp=this.clickHandlerWrapper(t),this.svg.addEventListener("mouseup",this.onMouseUp)},t.prototype.setMouseMoveHandler=function(t){this.onMouseMove&&this.svg.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=this.clickHandlerWrapper(t),this.svg.addEventListener("mousemove",this.onMouseMove)},t.prototype.drawLine=function(t,e,r){var i;void 0===e&&(e=!1),void 0===r&&(r=!1),this.svgGByLine.has(t)?i=this.svgGByLine.get(t):(i=n.cloneNode(!0),this.svg.appendChild(i),this.svgGByLine.set(t,i),this.lineBySvgG.set(i,t));var o=i.children[0],s=i.children[1],u=i.children[2],a=t.x1.toFixed(),h=t.y1.toFixed(),c=t.x2.toFixed(),d=t.y2.toFixed();o.setAttribute("x1",a),o.setAttribute("y1",h),o.setAttribute("x2",c),o.setAttribute("y2",d),e?i.setAttribute("stroke-width","0.8px"):i.setAttribute("stroke-width","0.4px"),r?i.setAttribute("stroke","#19a194"):i.setAttribute("stroke","black");var l=180*(t.v2.sub(t.v1).angle()-Math.PI/2)/Math.PI;s.setAttribute("transform","translate("+a+", "+h+") rotate("+(isNaN(l)?0:l)+")"),u.setAttribute("transform","translate("+c+", "+d+") rotate("+(isNaN(l)?0:180+l)+")")},t.prototype.eraseLine=function(t){var e=this.svgGByLine.get(t);e&&(this.svg.removeChild(e),this.svgGByLine.delete(t))},t}());new function(t){var n,r,i,o,s=this;this.renderer=t,this.lines=[],this.renderer.setMouseDownHandler((function(t,i,o){r=o||null,(n=i||null)||(n=new e(t.clientX,t.clientY,t.clientX,t.clientY),r=n.v2,s.lines.push(n),s.renderer.drawLine(n,!1,!1))})),this.renderer.setMouseUpHandler((function(t,e,u){e?(i&&i!==e&&s.renderer.drawLine(i,e===o,!1),i=e,s.renderer.drawLine(i,e===o,!0)):i&&s.renderer.drawLine(i,e===o,!1),n=null,r=null})),this.renderer.setMouseMoveHandler((function(t,e,u){e?(o&&o!==e&&s.renderer.drawLine(o,!1,e===i),o=e,s.renderer.drawLine(o,!0,e===i)):o&&(s.renderer.drawLine(o,!1,e===i),o=null),n&&(r?(r.x=t.clientX,r.y=t.clientY):n.update(t.movementX,t.movementY,t.movementX,t.movementY),s.renderer.drawLine(n,n===o,n===i))}))}(o),document.querySelector("body").appendChild(o.svg)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3ZlY3RvcjIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9saW5lLnRzIiwid2VicGFjazovL3BvbHBsb3QvLi9zcmMvc3ZnLXJlbmRlcmVyLnRzIiwid2VicGFjazovL3BvbHBsb3QvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9wb2xwbG90LnRzIl0sIm5hbWVzIjpbIngiLCJ5IiwiZG90UmF3IiwieDEiLCJ5MSIsIngyIiwieTIiLCJkb3QiLCJ1IiwidiIsInRoaXMiLCJvdGhlciIsIlZlY3RvcjIiLCJjcm9zc1JhdyIsImNyb3NzIiwibGVuUmF3IiwiTWF0aCIsInNxcnQiLCJwb3ciLCJsZW4iLCJub3JtYWxpemVSYXciLCJieSIsImNvZWYiLCJtdWxSYXciLCJub3JtYWxpemUiLCJlcXVhbHNSYXciLCJlcXVhbHMiLCJhZGRSYXciLCJhZGQiLCJzdWJSYXciLCJzdWIiLCJtdWwiLCJpbnRlcnNlY3Rpb25UaW1lc1JhdyIsImZ4IiwiZnkiLCJ0eCIsInR5Iiwic3giLCJzeSIsImV4IiwiZXkiLCJkZXQiLCJpbnRlcnNlY3Rpb25UaW1lcyIsImZyb20iLCJ0byIsInN0YXJ0IiwiZW5kIiwiaW50ZXJzZWN0aW9uUmF3IiwidGltZXMiLCJpbnRlcnNlY3Rpb24iLCJhbmdsZSIsImExIiwiYTIiLCJQSSIsImFjb3MiLCJ2MSIsInYyIiwiYmVmb3JlIiwidCIsImFmdGVyIiwiaW50ZXJzZWN0aW9uVGltZXNXaXRoIiwidXBkYXRlIiwiZHgxIiwiZHkxIiwiZHgyIiwiZHkyIiwiZ1RlbXBsYXRlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJzZXRBdHRyaWJ1dGUiLCJsaW5lVGVtcGxhdGUiLCJhbmNob3JUZW1wbGF0ZSIsImFwcGVuZENoaWxkIiwiY2xvbmVOb2RlIiwic3ZnUmVuZGVyZXIiLCJzdmciLCJzdmdHQnlMaW5lIiwiTWFwIiwibGluZUJ5U3ZnRyIsImNsaWNrSGFuZGxlcldyYXBwZXIiLCJjbGlja0hhbmRsZXIiLCJldmVudCIsImVsZW1lbnRBdCIsImVsZW1lbnRGcm9tUG9pbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsImxpbmUiLCJnZXQiLCJwYXJlbnROb2RlIiwiU1ZHUGF0aEVsZW1lbnQiLCJjaGlsZHJlbiIsIlNWR0xpbmVFbGVtZW50Iiwic2V0TW91c2VEb3duSGFuZGxlciIsIm9uTW91c2VEb3duIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRNb3VzZVVwSGFuZGxlciIsIm9uTW91c2VVcCIsInNldE1vdXNlTW92ZUhhbmRsZXIiLCJvbk1vdXNlTW92ZSIsImRyYXdMaW5lIiwiaXNIb3ZlcmVkIiwiaXNTZWxlY3RlZCIsInN2Z0ciLCJoYXMiLCJzZXQiLCJzdmdMaW5lIiwic3ZnUGF0aEFuY2hvclN0YXJ0Iiwic3ZnUGF0aEFuY2hvckVuZCIsInRvRml4ZWQiLCJpc05hTiIsImVyYXNlTGluZSIsInJlbW92ZUNoaWxkIiwiZGVsZXRlIiwicmVuZGVyZXIiLCJkcmFnZ2VkTGluZSIsImRyYWdnZWRWZWN0b3IyIiwic2VsZWN0ZWRMaW5lIiwiaG92ZXJlZExpbmUiLCJsaW5lcyIsImNsaWNrZWRMaW5lIiwiY2xpY2tlZFZlY3RvcjIiLCJMaW5lIiwicHVzaCIsIm1vdmVtZW50WCIsIm1vdmVtZW50WSIsInF1ZXJ5U2VsZWN0b3IiXSwibWFwcGluZ3MiOiJtQkFBQSxpQkFDRSxXQUFtQkEsRUFBY0MsUUFBZCxJQUFBRCxNQUFBLFFBQWMsSUFBQUMsTUFBQSxHQUFkLEtBQUFELElBQWMsS0FBQUMsSUE0SG5DLE9BM0hTLEVBQUFDLE9BQVAsU0FBY0MsRUFBWUMsRUFBWUMsRUFBWUMsR0FDaEQsT0FBT0gsRUFBS0UsRUFBS0QsRUFBS0UsR0FFakIsRUFBQUMsSUFBUCxTQUFXQyxFQUFZQyxHQUNyQixPQUFPQyxLQUFLUixPQUFPTSxFQUFFUixFQUFHUSxFQUFFUCxFQUFHUSxFQUFFVCxFQUFHUyxFQUFFUixJQUV0QyxZ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LFNBQVNkLFNBQVNlLEVBQWFBLElBQWdCRyxFQUFhSCxJQUFnQkUsT0RuRHpFLENBQVkzQyxHQUNmUCxTQUFTMkQsY0FBYyxRQUMvQnRELFlBQVlFLEVBQVlDLE0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWZWN0b3IyIHtcbiAgY29uc3RydWN0b3IocHVibGljIHggPSAwLCBwdWJsaWMgeSA9IDApIHt9XG4gIHN0YXRpYyBkb3RSYXcoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHgxICogeDIgKyB5MSAqIHkyO1xuICB9XG4gIHN0YXRpYyBkb3QodTogVmVjdG9yMiwgdjogVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZG90UmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgZG90KG90aGVyOiBWZWN0b3IyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5kb3QodGhpcywgb3RoZXIpO1xuICB9XG4gIHN0YXRpYyBjcm9zc1Jhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4geDEgKiB5MiAtIHgyICogeTE7XG4gIH1cbiAgc3RhdGljIGNyb3NzKHU6IFZlY3RvcjIsIHY6IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNyb3NzUmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgY3Jvc3Mob3RoZXI6IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIHJldHVybiBWZWN0b3IyLmNyb3NzKHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgbGVuUmF3KHg6IG51bWJlciwgeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHgsIDIpICsgTWF0aC5wb3coeSwgMikpO1xuICB9XG4gIHN0YXRpYyBsZW4odTogVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubGVuUmF3KHUueCwgdS55KTtcbiAgfVxuICBsZW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5sZW4odGhpcyk7XG4gIH1cbiAgc3RhdGljIG5vcm1hbGl6ZVJhdyh4OiBudW1iZXIsIHk6IG51bWJlciwgYnk6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcbiAgICBjb25zdCBjb2VmID0gYnkgLyB0aGlzLmxlblJhdyh4LCB5KTtcbiAgICByZXR1cm4gdGhpcy5tdWxSYXcoeCwgeSwgY29lZik7XG4gIH1cbiAgc3RhdGljIG5vcm1hbGl6ZSh1OiBWZWN0b3IyLCBieTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZVJhdyh1LngsIHUueSwgYnkpO1xuICB9XG4gIG5vcm1hbGl6ZShieTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xuICAgIHJldHVybiBWZWN0b3IyLm5vcm1hbGl6ZSh0aGlzLCBieSk7XG4gIH1cbiAgc3RhdGljIGVxdWFsc1Jhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHgxID09PSB4MiAmJiB5MSA9PT0geTI7XG4gIH1cbiAgc3RhdGljIGVxdWFscyh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZXF1YWxzUmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgZXF1YWxzKG90aGVyOiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFZlY3RvcjIuZXF1YWxzKHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgYWRkUmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoeDEgKyB4MiwgeTEgKyB5Mik7XG4gIH1cbiAgc3RhdGljIGFkZCh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuYWRkUmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgYWRkKG90aGVyOiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIFZlY3RvcjIuYWRkKHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgc3ViUmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoeDEgLSB4MiwgeTEgLSB5Mik7XG4gIH1cbiAgc3RhdGljIHN1Yih1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc3ViUmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgc3ViKG90aGVyOiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIFZlY3RvcjIuc3ViKHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgbXVsUmF3KHg6IG51bWJlciwgeTogbnVtYmVyLCBieTogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHggKiBieSwgeSAqIGJ5KTtcbiAgfVxuICBzdGF0aWMgbXVsKHU6IFZlY3RvcjIsIGJ5OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5tdWxSYXcodS54LCB1LnksIGJ5KTtcbiAgfVxuICBtdWwoYnk6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiBWZWN0b3IyLm11bCh0aGlzLCBieSk7XG4gIH1cbiAgc3RhdGljIGludGVyc2VjdGlvblRpbWVzUmF3KFxuICAgIGZ4OiBudW1iZXIsIGZ5OiBudW1iZXIsIHR4OiBudW1iZXIsIHR5OiBudW1iZXIsXG4gICAgc3g6IG51bWJlciwgc3k6IG51bWJlciwgZXg6IG51bWJlciwgZXk6IG51bWJlclxuICApOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBkZXQgPSB0aGlzLmNyb3NzUmF3KHR4IC0gZngsIHR5IC0gZnksIGV4IC0gc3gsIGV5IC0gc3kpO1xuICAgIHJldHVybiBuZXcgVmVjdG9yMihcbiAgICAgIHRoaXMuY3Jvc3NSYXcoZXggLSBzeCwgZXkgLSBzeSwgZnggLSBzeCwgZnkgLSBzeSkgLyBkZXQsXG4gICAgICB0aGlzLmNyb3NzUmF3KHR4IC0gZngsIHR5IC0gZnksIGZ4IC0gc3gsIGZ5IC0gc3kpIC8gZGV0XG4gICAgKTtcbiAgfVxuICBzdGF0aWMgaW50ZXJzZWN0aW9uVGltZXMoXG4gICAgZnJvbTogVmVjdG9yMiwgdG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjJcbiAgKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJzZWN0aW9uVGltZXNSYXcoZnJvbS54LCBmcm9tLnksIHRvLngsIHRvLnksIHN0YXJ0LngsIHN0YXJ0LnksIGVuZC54LCBlbmQueSk7XG4gIH1cbiAgaW50ZXJzZWN0aW9uVGltZXModG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjIpOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gVmVjdG9yMi5pbnRlcnNlY3Rpb25UaW1lcyh0aGlzLCB0bywgc3RhcnQsIGVuZCk7XG4gIH1cbiAgc3RhdGljIGludGVyc2VjdGlvblJhdyhcbiAgICBmeDogbnVtYmVyLCBmeTogbnVtYmVyLCB0eDogbnVtYmVyLCB0eTogbnVtYmVyLFxuICAgIHN4OiBudW1iZXIsIHN5OiBudW1iZXIsIGV4OiBudW1iZXIsIGV5OiBudW1iZXJcbiAgKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgdGltZXMgPSB0aGlzLmludGVyc2VjdGlvblRpbWVzUmF3KGZ4LCBmeSwgdHgsIHR5LCBzeCwgc3ksIGV4LCBleSk7XG4gICAgaWYgKHRpbWVzKSB7XG4gICAgICB0aW1lcy55ID0gZnkgKyAodHkgLSBmeSkgKiB0aW1lcy54O1xuICAgICAgdGltZXMueCA9IGZ4ICsgKHR4IC0gZngpICogdGltZXMueDtcbiAgICAgIHJldHVybiB0aW1lcztcbiAgICB9XG4gIH1cbiAgc3RhdGljIGludGVyc2VjdGlvbihmcm9tOiBWZWN0b3IyLCB0bzogVmVjdG9yMiwgc3RhcnQ6IFZlY3RvcjIsIGVuZDogVmVjdG9yMik6IFZlY3RvcjIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmludGVyc2VjdGlvblJhdyhmcm9tLngsIGZyb20ueSwgdG8ueCwgdG8ueSwgc3RhcnQueCwgc3RhcnQueSwgZW5kLngsIGVuZC55KTtcbiAgfVxuICBpbnRlcnNlY3Rpb24odG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjIpOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gVmVjdG9yMi5pbnRlcnNlY3Rpb24odGhpcywgdG8sIHN0YXJ0LCBlbmQpO1xuICB9XG4gIGFuZ2xlKG90aGVyPzogVmVjdG9yMik6IG51bWJlciB7XG4gICAgaWYgKG90aGVyKSB7XG4gICAgICAgY29uc3QgYTEgPSB0aGlzLmFuZ2xlKCk7XG4gICAgICAgY29uc3QgYTIgPSBvdGhlci5hbmdsZSgpO1xuICAgICAgIGlmIChhMiA8IGExKSB7XG4gICAgICAgIHJldHVybiBhMiArIDIgKiBNYXRoLlBJIC0gYTE7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGEyIC0gYTE7XG4gICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy55ID4gMCkge1xuICAgICAgcmV0dXJuIE1hdGguYWNvcyh0aGlzLnggLyB0aGlzLmxlbigpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDIgKiBNYXRoLlBJIC0gTWF0aC5hY29zKHRoaXMueCAvIHRoaXMubGVuKCkpO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XG5cbmV4cG9ydCBjbGFzcyBMaW5lIHtcbiAgdjE6IFZlY3RvcjI7XG4gIHYyOiBWZWN0b3IyO1xuICBjb25zdHJ1Y3RvcihcbiAgICB4MT86IG51bWJlcixcbiAgICB5MT86IG51bWJlcixcbiAgICB4Mj86IG51bWJlcixcbiAgICB5Mj86IG51bWJlclxuICApIHtcbiAgICB0aGlzLnYxID0gbmV3IFZlY3RvcjIoeDEsIHkxKTtcbiAgICB0aGlzLnYyID0gbmV3IFZlY3RvcjIoeDIsIHkyKTtcbiAgfVxuICBnZXQgeDEoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52MS54O1xuICB9XG4gIGdldCB5MSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnYxLnk7XG4gIH1cbiAgZ2V0IHgyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudjIueDtcbiAgfVxuICBnZXQgeTIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52Mi55O1xuICB9XG4gIGxlbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnYyLnN1Yih0aGlzLnYxKS5sZW4oKTtcbiAgfVxuICBiZWZvcmUodDogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMudjEuYWRkKHRoaXMudjIuc3ViKHRoaXMudjEpLm11bCgtdCAvIHRoaXMubGVuKCkpKTtcbiAgfVxuICBhZnRlcih0OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy52MS5hZGQodGhpcy52Mi5zdWIodGhpcy52MSkubXVsKCh0aGlzLmxlbigpICsgdCkgLyB0aGlzLmxlbigpKSk7XG4gIH1cbiAgaW50ZXJzZWN0aW9uVGltZXNXaXRoKG90aGVyOiBMaW5lKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMudjEuaW50ZXJzZWN0aW9uVGltZXModGhpcy52Miwgb3RoZXIudjEsIG90aGVyLnYyKTtcbiAgfVxuICB1cGRhdGUoZHgxID0gMCwgZHkxID0gMCwgZHgyID0gMCwgZHkyID0gMCk6IHZvaWQge1xuICAgIHRoaXMudjEueCArPSBkeDE7XG4gICAgdGhpcy52MS55ICs9IGR5MTtcbiAgICB0aGlzLnYyLnggKz0gZHgyO1xuICAgIHRoaXMudjIueSArPSBkeTI7XG4gIH1cbn0iLCJpbXBvcnQgeyBDbGlja0hhbmRsZXIsIFBvbHBsb3RSZW5kZXJlciB9IGZyb20gXCIuL2ludGVyZmFjZXMvcG9scGxvdC1yZW5kZXJlclwiO1xuaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuL2xpbmVcIjtcblxuY29uc3QgZ1RlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XG5nVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnYmxhY2snKTtcbmdUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcwLjRweCcpO1xuXG5jb25zdCBsaW5lVGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcbmxpbmVUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCAnMTAsIDQsIDEsIDQnKTtcblxuY29uc3QgYW5jaG9yVGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcbmFuY2hvclRlbXBsYXRlLnNldEF0dHJpYnV0ZShcbiAgJ2QnLFxuICAnTSAwLCAwJyArXG4gICdBIDEwLCAxMCwgMCwgMCwgMCwgLTUsIC01JyArIFxuICAnQSAxMCwgMTAsIDAsIDEsIDEsIDUsIC01JyArXG4gICdBIDEwLCAxMCwgMCwgMCwgMCwgMCwgMCdcbik7XG5hbmNob3JUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnd2hpdGUnKTtcblxuZ1RlbXBsYXRlLmFwcGVuZENoaWxkKGxpbmVUZW1wbGF0ZSk7XG5nVGVtcGxhdGUuYXBwZW5kQ2hpbGQoYW5jaG9yVGVtcGxhdGUpO1xuZ1RlbXBsYXRlLmFwcGVuZENoaWxkKGFuY2hvclRlbXBsYXRlLmNsb25lTm9kZSgpKTtcblxuZXhwb3J0IGNsYXNzIFN2Z1JlbmRlcmVyIGltcGxlbWVudHMgUG9scGxvdFJlbmRlcmVyIHtcbiAgcmVhZG9ubHkgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgcHJpdmF0ZSBzdmdHQnlMaW5lID0gbmV3IE1hcDxMaW5lLCBTVkdHRWxlbWVudD4oKTtcbiAgcHJpdmF0ZSBsaW5lQnlTdmdHID0gbmV3IE1hcDxTVkdHRWxlbWVudCwgTGluZT4oKTtcbiAgcHJpdmF0ZSBvbk1vdXNlRG93bjogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhbnk7XG4gIHByaXZhdGUgb25Nb3VzZVVwOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IGFueTtcbiAgcHJpdmF0ZSBvbk1vdXNlTW92ZTogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhbnk7XG4gIGNsaWNrSGFuZGxlcldyYXBwZXIoY2xpY2tIYW5kbGVyOiBDbGlja0hhbmRsZXIpOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IGFueSB7XG4gICAgcmV0dXJuIGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnRBdCA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5saW5lQnlTdmdHLmdldChlbGVtZW50QXQucGFyZW50Tm9kZSBhcyBTVkdHRWxlbWVudCk7XG4gICAgICBpZiAoZWxlbWVudEF0IGluc3RhbmNlb2YgU1ZHUGF0aEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnRBdC5wYXJlbnROb2RlLmNoaWxkcmVuWzFdID09PSBlbGVtZW50QXQpIHtcbiAgICAgICAgICBjbGlja0hhbmRsZXIoZXZlbnQsIGxpbmUsIGxpbmUudjEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsaWNrSGFuZGxlcihldmVudCwgbGluZSwgbGluZS52Mik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZWxlbWVudEF0IGluc3RhbmNlb2YgU1ZHTGluZUVsZW1lbnQpIHtcbiAgICAgICAgY2xpY2tIYW5kbGVyKGV2ZW50LCBsaW5lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsaWNrSGFuZGxlcihldmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBzZXRNb3VzZURvd25IYW5kbGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub25Nb3VzZURvd24pIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgIH1cbiAgICB0aGlzLm9uTW91c2VEb3duID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gIH1cbiAgc2V0TW91c2VVcEhhbmRsZXIoY2xpY2tIYW5kbGVyOiBDbGlja0hhbmRsZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vbk1vdXNlVXApIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgfVxuICAgIHRoaXMub25Nb3VzZVVwID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgfVxuICBzZXRNb3VzZU1vdmVIYW5kbGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub25Nb3VzZU1vdmUpIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgIH1cbiAgICB0aGlzLm9uTW91c2VNb3ZlID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gIH1cbiAgZHJhd0xpbmUobGluZTogTGluZSwgaXNIb3ZlcmVkID0gZmFsc2UsIGlzU2VsZWN0ZWQgPSBmYWxzZSk6IHZvaWQge1xuICAgIGxldCBzdmdHOiBTVkdHRWxlbWVudDtcbiAgICBpZiAoIXRoaXMuc3ZnR0J5TGluZS5oYXMobGluZSkpIHtcbiAgICAgIHN2Z0cgPSBnVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpIGFzIFNWR0dFbGVtZW50O1xuICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQoc3ZnRyk7XG4gICAgICB0aGlzLnN2Z0dCeUxpbmUuc2V0KGxpbmUsIHN2Z0cpO1xuICAgICAgdGhpcy5saW5lQnlTdmdHLnNldChzdmdHLCBsaW5lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnRyA9IHRoaXMuc3ZnR0J5TGluZS5nZXQobGluZSk7XG4gICAgfVxuICAgIGNvbnN0IHN2Z0xpbmUgPSBzdmdHLmNoaWxkcmVuWzBdIGFzIFNWR0xpbmVFbGVtZW50O1xuICAgIGNvbnN0IHN2Z1BhdGhBbmNob3JTdGFydCA9IHN2Z0cuY2hpbGRyZW5bMV0gYXMgU1ZHUGF0aEVsZW1lbnQ7XG4gICAgY29uc3Qgc3ZnUGF0aEFuY2hvckVuZCA9IHN2Z0cuY2hpbGRyZW5bMl0gYXMgU1ZHUGF0aEVsZW1lbnQ7XG4gICAgY29uc3QgeDEgPSBsaW5lLngxLnRvRml4ZWQoKTtcbiAgICBjb25zdCB5MSA9IGxpbmUueTEudG9GaXhlZCgpO1xuICAgIGNvbnN0IHgyID0gbGluZS54Mi50b0ZpeGVkKCk7XG4gICAgY29uc3QgeTIgPSBsaW5lLnkyLnRvRml4ZWQoKTtcbiAgICBzdmdMaW5lLnNldEF0dHJpYnV0ZSgneDEnLCB4MSk7XG4gICAgc3ZnTGluZS5zZXRBdHRyaWJ1dGUoJ3kxJywgeTEpO1xuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd4MicsIHgyKTtcbiAgICBzdmdMaW5lLnNldEF0dHJpYnV0ZSgneTInLCB5Mik7XG4gICAgaWYgKGlzSG92ZXJlZCkge1xuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcwLjhweCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdmdHLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzAuNHB4Jyk7XG4gICAgfVxuICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICBzdmdHLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMxOWExOTQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdibGFjaycpO1xuICAgIH1cbiAgICBjb25zdCBhbmdsZSA9IDE4MCAqIChsaW5lLnYyLnN1YihsaW5lLnYxKS5hbmdsZSgpIC0gTWF0aC5QSSAvIDIpIC8gTWF0aC5QSTtcbiAgICBzdmdQYXRoQW5jaG9yU3RhcnQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7eDF9LCAke3kxfSkgcm90YXRlKCR7aXNOYU4oYW5nbGUpID8gMCA6IGFuZ2xlfSlgKTtcbiAgICBzdmdQYXRoQW5jaG9yRW5kLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3gyfSwgJHt5Mn0pIHJvdGF0ZSgke2lzTmFOKGFuZ2xlKSA/IDAgOiAxODAgKyBhbmdsZX0pYCk7XG4gIH1cbiAgZXJhc2VMaW5lKGxpbmU6IExpbmUpOiB2b2lkIHtcbiAgICBjb25zdCBzdmdHID0gdGhpcy5zdmdHQnlMaW5lLmdldChsaW5lKTtcbiAgICBpZiAoc3ZnRykge1xuICAgICAgdGhpcy5zdmcucmVtb3ZlQ2hpbGQoc3ZnRyk7XG4gICAgICB0aGlzLnN2Z0dCeUxpbmUuZGVsZXRlKGxpbmUpO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCB7IFBvbFBsb3QgfSBmcm9tIFwiLi9wb2xwbG90XCI7XG5pbXBvcnQgeyBTdmdSZW5kZXJlciB9IGZyb20gXCIuL3N2Zy1yZW5kZXJlclwiO1xuXG5jb25zdCBzdmdSZW5kZXJlciA9IG5ldyBTdmdSZW5kZXJlcigpO1xuY29uc3QgcG9scGxvdCA9IG5ldyBQb2xQbG90KHN2Z1JlbmRlcmVyKTtcbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5ib2R5LmFwcGVuZENoaWxkKHN2Z1JlbmRlcmVyLnN2Zyk7IiwiaW1wb3J0IHsgUG9scGxvdFJlbmRlcmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9wb2xwbG90LXJlbmRlcmVyXCI7XG5pbXBvcnQgeyBMaW5lIH0gZnJvbSBcIi4vbGluZVwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlY3RvcjJcIjtcblxuZXhwb3J0IGNsYXNzIFBvbFBsb3Qge1xuICBsaW5lczogTGluZVtdID0gW107XG4gIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHJlbmRlcmVyOiBQb2xwbG90UmVuZGVyZXIpIHtcbiAgICBsZXQgZHJhZ2dlZExpbmU6IExpbmU7XG4gICAgbGV0IGRyYWdnZWRWZWN0b3IyOiBWZWN0b3IyO1xuXG4gICAgdGhpcy5yZW5kZXJlci5zZXRNb3VzZURvd25IYW5kbGVyKChldmVudCwgY2xpY2tlZExpbmUsIGNsaWNrZWRWZWN0b3IyKSA9PiB7XG4gICAgICBkcmFnZ2VkTGluZSA9IGNsaWNrZWRMaW5lIHx8IG51bGw7XG4gICAgICBkcmFnZ2VkVmVjdG9yMiA9IGNsaWNrZWRWZWN0b3IyIHx8IG51bGw7XG4gICAgICBpZiAoIWRyYWdnZWRMaW5lKSB7XG4gICAgICAgIGRyYWdnZWRMaW5lID0gbmV3IExpbmUoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSwgZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG4gICAgICAgIGRyYWdnZWRWZWN0b3IyID0gZHJhZ2dlZExpbmUudjI7XG4gICAgICAgIHRoaXMubGluZXMucHVzaChkcmFnZ2VkTGluZSk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoZHJhZ2dlZExpbmUsIGZhbHNlLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgc2VsZWN0ZWRMaW5lOiBMaW5lO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0TW91c2VVcEhhbmRsZXIoKGV2ZW50LCBjbGlja2VkTGluZSwgY2xpY2tlZFZlY3RvcjIpID0+IHtcbiAgICAgIGlmIChjbGlja2VkTGluZSkge1xuICAgICAgICBpZiAoc2VsZWN0ZWRMaW5lICYmIHNlbGVjdGVkTGluZSAhPT0gY2xpY2tlZExpbmUpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKHNlbGVjdGVkTGluZSwgY2xpY2tlZExpbmUgPT09IGhvdmVyZWRMaW5lLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZWN0ZWRMaW5lID0gY2xpY2tlZExpbmU7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoc2VsZWN0ZWRMaW5lLCBjbGlja2VkTGluZSA9PT0gaG92ZXJlZExpbmUsIHRydWUpO1xuICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZExpbmUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShzZWxlY3RlZExpbmUsIGNsaWNrZWRMaW5lID09PSBob3ZlcmVkTGluZSwgZmFsc2UpO1xuICAgICAgfVxuICAgICAgZHJhZ2dlZExpbmUgPSBudWxsO1xuICAgICAgZHJhZ2dlZFZlY3RvcjIgPSBudWxsO1xuICAgIH0pO1xuXG4gICAgbGV0IGhvdmVyZWRMaW5lOiBMaW5lO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0TW91c2VNb3ZlSGFuZGxlcigoZXZlbnQsIGNsaWNrZWRMaW5lLCBjbGlja2VkVmVjdG9yMikgPT4ge1xuICAgICAgaWYgKGNsaWNrZWRMaW5lKSB7XG4gICAgICAgIGlmIChob3ZlcmVkTGluZSAmJiBob3ZlcmVkTGluZSAhPT0gY2xpY2tlZExpbmUpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKGhvdmVyZWRMaW5lLCBmYWxzZSwgY2xpY2tlZExpbmUgPT09IHNlbGVjdGVkTGluZSk7XG4gICAgICAgIH1cbiAgICAgICAgaG92ZXJlZExpbmUgPSBjbGlja2VkTGluZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShob3ZlcmVkTGluZSwgdHJ1ZSwgY2xpY2tlZExpbmUgPT09IHNlbGVjdGVkTGluZSk7IFxuICAgICAgfSBlbHNlIGlmIChob3ZlcmVkTGluZSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKGhvdmVyZWRMaW5lLCBmYWxzZSwgY2xpY2tlZExpbmUgPT09IHNlbGVjdGVkTGluZSk7XG4gICAgICAgIGhvdmVyZWRMaW5lID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChkcmFnZ2VkTGluZSkge1xuICAgICAgICBpZiAoZHJhZ2dlZFZlY3RvcjIpIHtcbiAgICAgICAgICBkcmFnZ2VkVmVjdG9yMi54ID0gZXZlbnQuY2xpZW50WDtcbiAgICAgICAgICBkcmFnZ2VkVmVjdG9yMi55ID0gZXZlbnQuY2xpZW50WTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkcmFnZ2VkTGluZS51cGRhdGUoZXZlbnQubW92ZW1lbnRYLCBldmVudC5tb3ZlbWVudFksIGV2ZW50Lm1vdmVtZW50WCwgZXZlbnQubW92ZW1lbnRZKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKGRyYWdnZWRMaW5lLCBkcmFnZ2VkTGluZSA9PT0gaG92ZXJlZExpbmUsIGRyYWdnZWRMaW5lID09PSBzZWxlY3RlZExpbmUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==