(()=>{"use strict";var t=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.dotRaw=function(t,e,n,i){return t*n+e*i},t.dot=function(t,e){return this.dotRaw(t.x,t.y,e.x,e.y)},t.prototype.dot=function(e){return t.dot(this,e)},t.crossRaw=function(t,e,n,i){return t*i-n*e},t.cross=function(t,e){return this.crossRaw(t.x,t.y,e.x,e.y)},t.prototype.cross=function(e){return t.cross(this,e)},t.lenRaw=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},t.len=function(t){return this.lenRaw(t.x,t.y)},t.prototype.len=function(){return t.len(this)},t.normalizeRaw=function(t,e,n){void 0===n&&(n=1);var i=n/this.lenRaw(t,e);return this.mulRaw(t,e,i)},t.normalize=function(t,e){return void 0===e&&(e=1),this.normalizeRaw(t.x,t.y,e)},t.prototype.normalize=function(e){return void 0===e&&(e=1),t.normalize(this,e)},t.equalsRaw=function(t,e,n,i){return Math.abs(t-n)<3&&Math.abs(e-i)<3},t.equals=function(t,e){return this.equalsRaw(t.x,t.y,e.x,e.y)},t.prototype.equals=function(e){return t.equals(this,e)},t.addRaw=function(e,n,i,r){return new t(e+i,n+r)},t.add=function(t,e){return this.addRaw(t.x,t.y,e.x,e.y)},t.prototype.add=function(e){return t.add(this,e)},t.subRaw=function(e,n,i,r){return new t(e-i,n-r)},t.sub=function(t,e){return this.subRaw(t.x,t.y,e.x,e.y)},t.prototype.sub=function(e){return t.sub(this,e)},t.mulRaw=function(e,n,i){return new t(e*i,n*i)},t.mul=function(t,e){return this.mulRaw(t.x,t.y,e)},t.prototype.mul=function(e){return t.mul(this,e)},t.intersectionTimesRaw=function(e,n,i,r,o,s,u,a){var c=this.crossRaw(i-e,r-n,u-o,a-s);return new t(this.crossRaw(u-o,a-s,e-o,n-s)/c,this.crossRaw(i-e,r-n,e-o,n-s)/c)},t.intersectionTimes=function(t,e,n,i){return this.intersectionTimesRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersectionTimes=function(e,n,i){return t.intersectionTimes(this,e,n,i)},t.intersectionRaw=function(t,e,n,i,r,o,s,u){var a=this.intersectionTimesRaw(t,e,n,i,r,o,s,u);if(a)return a.y=e+(i-e)*a.x,a.x=t+(n-t)*a.x,a},t.intersection=function(t,e,n,i){return this.intersectionRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersection=function(e,n,i){return t.intersection(this,e,n,i)},t.prototype.angle=function(t){if(t){var e=this.angle(),n=t.angle();return n<e?n+2*Math.PI-e:n-e}return this.y>0?Math.acos(this.x/this.len()):2*Math.PI-Math.acos(this.x/this.len())},t}(),e=function(){function e(e,n,i,r){this.v1=new t(e,n),this.v2=new t(i,r)}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.v1.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.v1.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.v2.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.v2.y},enumerable:!1,configurable:!0}),e.prototype.len=function(){return this.v2.sub(this.v1).len()},e.prototype.pointAt=function(t){return this.v1.add(this.v2.sub(this.v1).mul(t))},e.prototype.before=function(t){return this.v1.add(this.v2.sub(this.v1).mul(-t/this.len()))},e.prototype.after=function(t){return this.v1.add(this.v2.sub(this.v1).mul((this.len()+t)/this.len()))},e.prototype.intersectionTimesWith=function(t){return this.v1.intersectionTimes(this.v2,t.v1,t.v2)},e.prototype.update=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.v1.x+=t,this.v1.y+=e,this.v2.x+=n,this.v2.y+=i},e}(),n=function(){function t(t){void 0===t&&(t=[]),this.vertices=t}return t.prototype.areaBetween=function(t,e){return(this.vertices[e].x-this.vertices[t].x)*(this.vertices[t].y+this.vertices[e].y)/2},t.prototype.area=function(){for(var t=0,e=this.vertices.length-1,n=0;n<this.vertices.length;n++)t+=this.areaBetween(e,n),e=n;return t},t.prototype.shareEdge=function(t,e){for(var n=this.vertices.length-1,i=0;i<this.vertices.length;i++){if(this.vertices[n].equals(t)&&this.vertices[i].equals(e))return!0;n=i}return!1},t.prototype.intersectionWith=function(t){},t.prototype.reverse=function(){this.vertices.reverse()},t.prototype.toString=function(){return this.vertices.length+" points: "+this.vertices.map((function(t){return"("+t.x.toFixed()+", "+t.y.toFixed()+")"})).join(", ")+" (area: "+this.area().toFixed()+")"},t}(),i=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,r++)i[r]=o[s];return i},r=function(){function r(t){var n,i,r,o,s=this;this.renderer=t,this.lines=[],this.intersectionTimes=[],this.intersectionPoints=[],this.test(),this.renderer.setMouseDownHandler((function(t,r,o){i=o||null,(n=r||null)||(n=new e(t.clientX,t.clientY,t.clientX,t.clientY),i=n.v2,s.addLine(n))})),this.renderer.setMouseUpHandler((function(t,e,u){e?(r&&r!==e&&s.renderer.drawLine(r,e===o,!1),r=e,s.renderer.drawLine(r,e===o,!0)):r&&s.renderer.drawLine(r,e===o,!1),n=null,i=null})),this.renderer.setMouseMoveHandler((function(t,e,u){e?(o&&o!==e&&s.renderer.drawLine(o,!1,e===r),o=e,s.renderer.drawLine(o,!0,e===r)):o&&(s.renderer.drawLine(o,!1,e===r),o=null),n&&(i?(i.x=t.clientX,i.y=t.clientY):n.update(t.movementX,t.movementY,t.movementX,t.movementY),s.updateIntersectionTimes(n),s.renderer.drawLine(n,n===o,n===r))})),document.addEventListener("keyup",(function(t){" "===t.key&&s.renderIntersections()}))}return r.prototype.addLine=function(t){this.addIntersectionTimes(t),this.lines.push(t),this.renderer.drawLine(t,!1,!1)},r.prototype.addIntersectionTimes=function(t,e,n,i){void 0===e&&(e=this.lines),void 0===n&&(n=this.intersectionTimes),void 0===i&&(i=this.intersectionPoints);for(var r,o=[],s=[],u=0;u<e.length;u++)r=e[u].intersectionTimesWith(t),n[u].push(r.x),i[u].push(0<=r.x&&r.x<=1&&0<=r.y&&r.y<=1?e[u].v1.add(e[u].v2.sub(e[u].v1).mul(r.x)):null),o.push(r.y),s.push(null);o.push(NaN),s.push(null),n.push(o),i.push(s)},r.prototype.updateIntersectionTimes=function(t,e,n,i){void 0===e&&(e=this.lines),void 0===n&&(n=this.intersectionTimes),void 0===i&&(i=this.intersectionPoints);for(var r,o=e.indexOf(t),s=0;s<e.length;s++)s!==o&&(r=e[s].intersectionTimesWith(t),n[s][o]=r.x,n[o][s]=r.y,s<o?i[s][o]=0<=r.x&&r.x<=1&&0<=r.y&&r.y<=1?e[s].v1.add(e[s].v2.sub(e[s].v1).mul(r.x)):null:i[o][s]=0<=r.x&&r.x<=1&&0<=r.y&&r.y<=1?e[s].v1.add(e[s].v2.sub(e[s].v1).mul(r.x)):null)},r.prototype.renderIntersections=function(){var t=this;this.renderer.clearIntersections(),this.intersectionPoints.forEach((function(e){e.forEach((function(e){e&&t.renderer.drawPoint(e)}))})),this.renderer.clearPolygons();var e=this.buildPartialsFromIntersectionTimes();this.buildPolygonsFromPartials(e).forEach((function(e){return t.renderer.drawPolygon(e)}))},r.prototype.testSide=function(t,e,n){return e.sub(t).cross(n.sub(t))>0},r.prototype.partialsAreConnected=function(t,e){return t.vertices[t.vertices.length-2].equals(e.vertices[0])&&t.vertices[t.vertices.length-1].equals(e.vertices[1])},r.prototype.buildPartialsFromPoints=function(t,e,i){for(var r=[],o=0;o<e.length;o++)if(e[o]){var s=o+1;for(s===e.length&&(s=0);!e[s];)++s===e.length&&(s=0);o!==s&&r.push(new n([e[o],t,e[s]]))}return 2===r.length&&0===r[0].area()?i.v1.y<i.v2.y&&r.forEach((function(t){return t.reverse()})):r.forEach((function(t){t.area()<0&&t.reverse()})),r},r.prototype.buildPartialsFromIntersectionTimes=function(t,e){void 0===t&&(t=this.lines),void 0===e&&(e=this.intersectionTimes),console.log("buildPartialsFromIntersectionTimes"),console.log("----------------------------------"),console.log("lines.length = ",t.length);var n=e.map((function(t,n){return t.map((function(t,e){return e})).filter((function(i){return!isNaN(t[i])&&0<=t[i]&&t[i]<=1&&!isNaN(e[i][n])&&0<=e[i][n]&&e[i][n]<=1})).sort((function(e,n){return t[e]-t[n]}))}));console.log(n);for(var i=[],r=function(r){for(var s=0;s<n[r].length;s++){var u=n[r][s];if(r<u){var a=t[r].pointAt(e[r][n[r][s]]),c=s-1,l=s+1,h=n[u].findIndex((function(t){return t===r})),p=h-1,d=h+1,v=0<s?t[r].pointAt(e[r][n[r][c]]):null,f=s<n[r].length-1?t[r].pointAt(e[r][n[r][l]]):null,y=0<h?t[u].pointAt(e[u][n[u][p]]):null,g=h<n[u].length-1?t[u].pointAt(e[u][n[u][d]]):null,w=o.buildPartialsFromPoints(a,[v,g,f,y],t[r]);i.push.apply(i,w)}}},o=this,s=0;s<n.length;s++)r(s);return i},r.prototype.buildPolygonsFromPartials=function(t){for(var e,n=[],r=0;r<t.length;){for(var o=0;o<t.length;o++)if(r!==o&&this.partialsAreConnected(t[r],t[o])){console.log("\n              partials[i]: "+t[r].toString()+",\n              partials[j]: "+t[o].toString()+",\n            "),(e=t[r].vertices).splice.apply(e,i([-2,2],t[o].vertices)),console.log("\n              partials[i]: "+t[r].toString()+" [NEW],\n            "),t.splice(o,1),o<r&&r--,this.partialsAreConnected(t[r],t[r])?(t[r].vertices.splice(0,2),console.log("\n                new connected polygon: "+t[r].toString()+"\n              "),n.push(t[r]),t.splice(r,1)):t[r].vertices[0].equals(t[r].vertices[t[r].vertices.length-1])&&(t[r].vertices.pop(),console.log("\n                new closed polygon: "+t[r].toString()+"\n              "),n.push(t[r]),t.splice(r,1)),r=-1;break}r++}return console.log("polygons",n),n.map((function(t){return console.log(t.toString())})),n},r.prototype.test=function(){var n=new e(300,300,600,600),i=(new e(300,600,600,300),new t(450,450)),r=new t(400,400),o=new t(500,500),s=new t(400,500),u=new t(500,400),a=this.buildPartialsFromPoints(i,[r,u,o,s],n);a.map((function(t){return console.log(t.toString())})),n=new e(300,300,600,600),new e(600,300,300,600),i=new t(450,450),r=new t(400,400),o=new t(500,500),s=new t(500,400),u=new t(400,500),(a=this.buildPartialsFromPoints(i,[r,u,o,s],n)).map((function(t){return console.log(t.toString())})),n=new e(300,300,600,600),new e(600,300,300,600),i=new t(450,450),r=new t(400,400),o=null,s=null,u=new t(400,500),(a=this.buildPartialsFromPoints(i,[r,u,o,s],n)).map((function(t){return console.log(t.toString())}))},r}(),o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("stroke","black"),o.setAttribute("stroke-width","0.4px");var s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("stroke-dasharray","10, 4, 1, 4");var u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d","M 0, 0A 10, 10, 0, 0, 0, -5, -5A 10, 10, 0, 1, 1, 5, -5A 10, 10, 0, 0, 0, 0, 0"),u.setAttribute("fill","white"),o.appendChild(s),o.appendChild(u),o.appendChild(u.cloneNode());var a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("fill","green"),a.setAttribute("r","3");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("fill","green"),c.setAttribute("fill-opacity","0.7"),c.setAttribute("stroke-width","3"),c.setAttribute("stroke","grey");var l=new(function(){function t(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.intersectionContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.polygonContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svgGByLine=new Map,this.lineBySvgG=new Map,this.svg.appendChild(this.intersectionContainer),this.svg.appendChild(this.polygonContainer)}return t.prototype.clickHandlerWrapper=function(t){var e=this;return function(n){var i=document.elementFromPoint(n.clientX,n.clientY),r=e.lineBySvgG.get(i.parentNode);i instanceof SVGPathElement&&i.parentNode!==e.polygonContainer?i.parentNode.children[1]===i?t(n,r,r.v1):t(n,r,r.v2):i instanceof SVGLineElement?t(n,r):t(n)}},t.prototype.setMouseDownHandler=function(t){this.onMouseDown&&this.svg.removeEventListener("mousedown",this.onMouseDown),this.onMouseDown=this.clickHandlerWrapper(t),this.svg.addEventListener("mousedown",this.onMouseDown)},t.prototype.setMouseUpHandler=function(t){this.onMouseUp&&this.svg.removeEventListener("mouseup",this.onMouseUp),this.onMouseUp=this.clickHandlerWrapper(t),this.svg.addEventListener("mouseup",this.onMouseUp)},t.prototype.setMouseMoveHandler=function(t){this.onMouseMove&&this.svg.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=this.clickHandlerWrapper(t),this.svg.addEventListener("mousemove",this.onMouseMove)},t.prototype.drawLine=function(t,e,n){var i;void 0===e&&(e=!1),void 0===n&&(n=!1),this.svgGByLine.has(t)?i=this.svgGByLine.get(t):(i=o.cloneNode(!0),this.svg.appendChild(i),this.svgGByLine.set(t,i),this.lineBySvgG.set(i,t));var r=i.children[0],s=i.children[1],u=i.children[2],a=t.x1.toFixed(),c=t.y1.toFixed(),l=t.x2.toFixed(),h=t.y2.toFixed();r.setAttribute("x1",a),r.setAttribute("y1",c),r.setAttribute("x2",l),r.setAttribute("y2",h),e?i.setAttribute("stroke-width","0.8px"):i.setAttribute("stroke-width","0.4px"),n?i.setAttribute("stroke","#19a194"):i.setAttribute("stroke","black");var p=180*(t.v2.sub(t.v1).angle()-Math.PI/2)/Math.PI;s.setAttribute("transform","translate("+a+", "+c+") rotate("+(isNaN(p)?0:p)+")"),u.setAttribute("transform","translate("+l+", "+h+") rotate("+(isNaN(p)?0:180+p)+")")},t.prototype.eraseLine=function(t){var e=this.svgGByLine.get(t);e&&(this.svg.removeChild(e),this.svgGByLine.delete(t))},t.prototype.drawPoint=function(t){var e=a.cloneNode();e.setAttribute("cx",t.x.toFixed()),e.setAttribute("cy",t.y.toFixed()),this.intersectionContainer.appendChild(e)},t.prototype.clearContainer=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},t.prototype.clearIntersections=function(){this.clearContainer(this.intersectionContainer)},t.prototype.drawPolygon=function(t){var e=c.cloneNode();e.setAttribute("d","M "+t.vertices.map((function(t){return t.x.toFixed()+" "+t.y.toFixed()})).join(" L ")+"Z"),e.setAttribute("fill","#"+(Math.floor(16677215*Math.random())+1e5).toString(16)),this.polygonContainer.appendChild(e)},t.prototype.clearPolygons=function(){this.clearContainer(this.polygonContainer)},t}());new r(l),document.querySelector("body").appendChild(l.svg)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3ZlY3RvcjIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9saW5lLnRzIiwid2VicGFjazovL3BvbHBsb3QvLi9zcmMvcG9seWdvbi50cyIsIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3BvbHBsb3QudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9zdmctcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJ4IiwieSIsImRvdFJhdyIsIngxIiwieTEiLCJ4MiIsInkyIiwiZG90IiwidSIsInYiLCJ0aGlzIiwib3RoZXIiLCJWZWN0b3IyIiwiY3Jvc3NSYXciLCJjcm9zcyIsImxlblJhdyIsIk1hdGgiLCJzcXJ0IiwicG93IiwibGVuIiwibm9ybWFsaXplUmF3IiwiYnkiLCJjb2VmIiwibXVsUmF3Iiwibm9ybWFsaXplIiwiZXF1YWxzUmF3IiwiYWJzIiwiZXF1YWxzIiwiYWRkUmF3IiwiYWRkIiwic3ViUmF3Iiwic3ViIiwibXVsIiwiaW50ZXJzZWN0aW9uVGltZXNSYXciLCJmeCIsImZ5IiwidHgiLCJ0eSIsInN4Iiwic3kiLCJleCIsImV5IiwiZGV0IiwiaW50ZXJzZWN0aW9uVGltZXMiLCJmcm9tIiwidG8iLCJzdGFydCIsImVuZCIsImludGVyc2VjdGlvblJhdyIsInRpbWVzIiwiaW50ZXJzZWN0aW9uIiwiYW5nbGUiLCJhMSIsImEyIiwiUEkiLCJhY29zIiwidjEiLCJ2MiIsInBvaW50QXQiLCJ0IiwiYmVmb3JlIiwiYWZ0ZXIiLCJpbnRlcnNlY3Rpb25UaW1lc1dpdGgiLCJ1cGRhdGUiLCJkeDEiLCJkeTEiLCJkeDIiLCJkeTIiLCJ2ZXJ0aWNlcyIsImFyZWFCZXR3ZWVuIiwiaSIsImoiLCJhcmVhIiwiYSIsImxlbmd0aCIsInNoYXJlRWRnZSIsImludGVyc2VjdGlvbldpdGgiLCJsaW5lIiwicmV2ZXJzZSIsInRvU3RyaW5nIiwibWFwIiwidG9GaXhlZCIsImpvaW4iLCJyZW5kZXJlciIsImRyYWdnZWRMaW5lIiwiZHJhZ2dlZFZlY3RvcjIiLCJzZWxlY3RlZExpbmUiLCJob3ZlcmVkTGluZSIsImxpbmVzIiwiaW50ZXJzZWN0aW9uUG9pbnRzIiwidGVzdCIsInNldE1vdXNlRG93bkhhbmRsZXIiLCJldmVudCIsImNsaWNrZWRMaW5lIiwiY2xpY2tlZFZlY3RvcjIiLCJMaW5lIiwiY2xpZW50WCIsImNsaWVudFkiLCJhZGRMaW5lIiwic2V0TW91c2VVcEhhbmRsZXIiLCJkcmF3TGluZSIsInNldE1vdXNlTW92ZUhhbmRsZXIiLCJtb3ZlbWVudFgiLCJtb3ZlbWVudFkiLCJ1cGRhdGVJbnRlcnNlY3Rpb25UaW1lcyIsImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImtleSIsInJlbmRlckludGVyc2VjdGlvbnMiLCJhZGRJbnRlcnNlY3Rpb25UaW1lcyIsInB1c2giLCJuZXdJbnRlcnNlY3Rpb25UaW1lcyIsIm5ld0ludGVyc2VjdGlvblBvaW50cyIsIk5hTiIsImluZGV4IiwiaW5kZXhPZiIsImNsZWFySW50ZXJzZWN0aW9ucyIsImZvckVhY2giLCJpbnRlcnNlY3Rpb25Qb2ludCIsImRyYXdQb2ludCIsImNsZWFyUG9seWdvbnMiLCJwYXJ0aWFscyIsImJ1aWxkUGFydGlhbHNGcm9tSW50ZXJzZWN0aW9uVGltZXMiLCJidWlsZFBvbHlnb25zRnJvbVBhcnRpYWxzIiwicG9seWdvbiIsImRyYXdQb2x5Z29uIiwidGVzdFNpZGUiLCJ3IiwicGFydGlhbHNBcmVDb25uZWN0ZWQiLCJwMSIsInAyIiwiYnVpbGRQYXJ0aWFsc0Zyb21Qb2ludHMiLCJsb2NhbEludGVyIiwicG9pbnRzIiwibG9jYWxMaW5lIiwicGFydHMiLCJQb2x5Z29uIiwicCIsImNvbnNvbGUiLCJsb2ciLCJpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXkiLCJpbnRlcnNlY3Rpb25UaW1lc0F0SSIsIl8iLCJmaWx0ZXIiLCJpc05hTiIsInNvcnQiLCJsb2NhbEluZGV4IiwibG9jYWxJbnRlckluZGV4IiwiZm9yZWlnbkluZGV4IiwicHJldkxvY2FsSW50ZXJJbmRleCIsIm5leHRMb2NhbEludGVySW5kZXgiLCJmb3JlaWduSW50ZXJJbmRleCIsImZpbmRJbmRleCIsInByZXZGb3JlaWduSW50ZXJJbmRleCIsIm5leHRGb3JlaWduSW50ZXJJbmRleCIsInByZXZMb2NhbEludGVyIiwibmV4dExvY2FsSW50ZXIiLCJwcmV2Rm9yZWlnbkludGVyIiwibmV4dEZvcmVpZ25JbnRlciIsInBvbHlnb25zIiwic3BsaWNlIiwicG9wIiwiZ1RlbXBsYXRlIiwiY3JlYXRlRWxlbWVudE5TIiwic2V0QXR0cmlidXRlIiwibGluZVRlbXBsYXRlIiwiYW5jaG9yVGVtcGxhdGUiLCJhcHBlbmRDaGlsZCIsImNsb25lTm9kZSIsInBvaW50VGVtcGxhdGUiLCJwb2x5Z29uVGVtcGxhdGUiLCJzdmdSZW5kZXJlciIsInN2ZyIsImludGVyc2VjdGlvbkNvbnRhaW5lciIsInBvbHlnb25Db250YWluZXIiLCJzdmdHQnlMaW5lIiwiTWFwIiwibGluZUJ5U3ZnRyIsImNsaWNrSGFuZGxlcldyYXBwZXIiLCJjbGlja0hhbmRsZXIiLCJlbGVtZW50QXQiLCJlbGVtZW50RnJvbVBvaW50IiwiZ2V0IiwicGFyZW50Tm9kZSIsIlNWR1BhdGhFbGVtZW50IiwiY2hpbGRyZW4iLCJTVkdMaW5lRWxlbWVudCIsIm9uTW91c2VEb3duIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uTW91c2VVcCIsIm9uTW91c2VNb3ZlIiwiaXNIb3ZlcmVkIiwiaXNTZWxlY3RlZCIsInN2Z0ciLCJoYXMiLCJzZXQiLCJzdmdMaW5lIiwic3ZnUGF0aEFuY2hvclN0YXJ0Iiwic3ZnUGF0aEFuY2hvckVuZCIsImVyYXNlTGluZSIsInJlbW92ZUNoaWxkIiwiZGVsZXRlIiwicG9pbnQiLCJzdmdDaXJjbGUiLCJjbGVhckNvbnRhaW5lciIsImNvbnRhaW5lciIsImZpcnN0Q2hpbGQiLCJzdmdQYXRoIiwiZmxvb3IiLCJy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QUFJeEUsRUFBRVIsRUFBRWdGLGFBQWFDLEtBQUssT0FBUyxLQUM5RzZILEVBQVEzQyxhQUFhLE9BQVEsS0FBT3BKLEtBQUtnTSxNQUFNLFNBQW1CaE0sS0FBS2lNLFVBQVksS0FBS2xJLFNBQVMsS0FDakdyRSxLQUFLb0ssaUJBQWlCUCxZQUFZd0MsSUFFcEMsWUFBQXZGLGNBQUEsV0FDRTlHLEtBQUtrTSxlQUFlbE0sS0FBS29LLG1CQUU3QixFQXBIQSxJQ2hDZ0IsSUFBSW9DLEVBQVF2QyxHQUNmbEUsU0FBUzBHLGNBQWMsUUFDL0I1QyxZQUFZSSxFQUFZQyxNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBFUFNJTE9OID0gMztcblxuZXhwb3J0IGNsYXNzIFZlY3RvcjIge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgeCA9IDAsIHB1YmxpYyB5ID0gMCkge31cbiAgc3RhdGljIGRvdFJhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4geDEgKiB4MiArIHkxICogeTI7XG4gIH1cbiAgc3RhdGljIGRvdCh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5kb3RSYXcodS54LCB1LnksIHYueCwgdi55KTtcbiAgfVxuICBkb3Qob3RoZXI6IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIHJldHVybiBWZWN0b3IyLmRvdCh0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIGNyb3NzUmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB4MSAqIHkyIC0geDIgKiB5MTtcbiAgfVxuICBzdGF0aWMgY3Jvc3ModTogVmVjdG9yMiwgdjogVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY3Jvc3NSYXcodS54LCB1LnksIHYueCwgdi55KTtcbiAgfVxuICBjcm9zcyhvdGhlcjogVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIFZlY3RvcjIuY3Jvc3ModGhpcywgb3RoZXIpO1xuICB9XG4gIHN0YXRpYyBsZW5SYXcoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coeCwgMikgKyBNYXRoLnBvdyh5LCAyKSk7XG4gIH1cbiAgc3RhdGljIGxlbih1OiBWZWN0b3IyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5sZW5SYXcodS54LCB1LnkpO1xuICB9XG4gIGxlbigpOiBudW1iZXIge1xuICAgIHJldHVybiBWZWN0b3IyLmxlbih0aGlzKTtcbiAgfVxuICBzdGF0aWMgbm9ybWFsaXplUmF3KHg6IG51bWJlciwgeTogbnVtYmVyLCBieTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xuICAgIGNvbnN0IGNvZWYgPSBieSAvIHRoaXMubGVuUmF3KHgsIHkpO1xuICAgIHJldHVybiB0aGlzLm11bFJhdyh4LCB5LCBjb2VmKTtcbiAgfVxuICBzdGF0aWMgbm9ybWFsaXplKHU6IFZlY3RvcjIsIGJ5OiBudW1iZXIgPSAxKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMubm9ybWFsaXplUmF3KHUueCwgdS55LCBieSk7XG4gIH1cbiAgbm9ybWFsaXplKGJ5OiBudW1iZXIgPSAxKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIFZlY3RvcjIubm9ybWFsaXplKHRoaXMsIGJ5KTtcbiAgfVxuICBzdGF0aWMgZXF1YWxzUmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoeDEgLSB4MikgPCBFUFNJTE9OICYmIE1hdGguYWJzKHkxIC0geTIpIDwgRVBTSUxPTjtcbiAgICAvLyByZXR1cm4geDEgPT09IHgyICYmIHkxID09PSB5MjtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKHU6IFZlY3RvcjIsIHY6IFZlY3RvcjIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5lcXVhbHNSYXcodS54LCB1LnksIHYueCwgdi55KTtcbiAgfVxuICBlcXVhbHMob3RoZXI6IFZlY3RvcjIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gVmVjdG9yMi5lcXVhbHModGhpcywgb3RoZXIpO1xuICB9XG4gIHN0YXRpYyBhZGRSYXcoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiBuZXcgVmVjdG9yMih4MSArIHgyLCB5MSArIHkyKTtcbiAgfVxuICBzdGF0aWMgYWRkKHU6IFZlY3RvcjIsIHY6IFZlY3RvcjIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5hZGRSYXcodS54LCB1LnksIHYueCwgdi55KTtcbiAgfVxuICBhZGQob3RoZXI6IFZlY3RvcjIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5hZGQodGhpcywgb3RoZXIpO1xuICB9XG4gIHN0YXRpYyBzdWJSYXcoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiBuZXcgVmVjdG9yMih4MSAtIHgyLCB5MSAtIHkyKTtcbiAgfVxuICBzdGF0aWMgc3ViKHU6IFZlY3RvcjIsIHY6IFZlY3RvcjIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5zdWJSYXcodS54LCB1LnksIHYueCwgdi55KTtcbiAgfVxuICBzdWIob3RoZXI6IFZlY3RvcjIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5zdWIodGhpcywgb3RoZXIpO1xuICB9XG4gIHN0YXRpYyBtdWxSYXcoeDogbnVtYmVyLCB5OiBudW1iZXIsIGJ5OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoeCAqIGJ5LCB5ICogYnkpO1xuICB9XG4gIHN0YXRpYyBtdWwodTogVmVjdG9yMiwgYnk6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLm11bFJhdyh1LngsIHUueSwgYnkpO1xuICB9XG4gIG11bChieTogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIFZlY3RvcjIubXVsKHRoaXMsIGJ5KTtcbiAgfVxuICBzdGF0aWMgaW50ZXJzZWN0aW9uVGltZXNSYXcoXG4gICAgZng6IG51bWJlciwgZnk6IG51bWJlciwgdHg6IG51bWJlciwgdHk6IG51bWJlcixcbiAgICBzeDogbnVtYmVyLCBzeTogbnVtYmVyLCBleDogbnVtYmVyLCBleTogbnVtYmVyXG4gICk6IFZlY3RvcjIgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGRldCA9IHRoaXMuY3Jvc3NSYXcodHggLSBmeCwgdHkgLSBmeSwgZXggLSBzeCwgZXkgLSBzeSk7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKFxuICAgICAgdGhpcy5jcm9zc1JhdyhleCAtIHN4LCBleSAtIHN5LCBmeCAtIHN4LCBmeSAtIHN5KSAvIGRldCxcbiAgICAgIHRoaXMuY3Jvc3NSYXcodHggLSBmeCwgdHkgLSBmeSwgZnggLSBzeCwgZnkgLSBzeSkgLyBkZXRcbiAgICApO1xuICB9XG4gIHN0YXRpYyBpbnRlcnNlY3Rpb25UaW1lcyhcbiAgICBmcm9tOiBWZWN0b3IyLCB0bzogVmVjdG9yMiwgc3RhcnQ6IFZlY3RvcjIsIGVuZDogVmVjdG9yMlxuICApOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3Rpb25UaW1lc1Jhdyhmcm9tLngsIGZyb20ueSwgdG8ueCwgdG8ueSwgc3RhcnQueCwgc3RhcnQueSwgZW5kLngsIGVuZC55KTtcbiAgfVxuICBpbnRlcnNlY3Rpb25UaW1lcyh0bzogVmVjdG9yMiwgc3RhcnQ6IFZlY3RvcjIsIGVuZDogVmVjdG9yMik6IFZlY3RvcjIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBWZWN0b3IyLmludGVyc2VjdGlvblRpbWVzKHRoaXMsIHRvLCBzdGFydCwgZW5kKTtcbiAgfVxuICBzdGF0aWMgaW50ZXJzZWN0aW9uUmF3KFxuICAgIGZ4OiBudW1iZXIsIGZ5OiBudW1iZXIsIHR4OiBudW1iZXIsIHR5OiBudW1iZXIsXG4gICAgc3g6IG51bWJlciwgc3k6IG51bWJlciwgZXg6IG51bWJlciwgZXk6IG51bWJlclxuICApOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCB0aW1lcyA9IHRoaXMuaW50ZXJzZWN0aW9uVGltZXNSYXcoZngsIGZ5LCB0eCwgdHksIHN4LCBzeSwgZXgsIGV5KTtcbiAgICBpZiAodGltZXMpIHtcbiAgICAgIHRpbWVzLnkgPSBmeSArICh0eSAtIGZ5KSAqIHRpbWVzLng7XG4gICAgICB0aW1lcy54ID0gZnggKyAodHggLSBmeCkgKiB0aW1lcy54O1xuICAgICAgcmV0dXJuIHRpbWVzO1xuICAgIH1cbiAgfVxuICBzdGF0aWMgaW50ZXJzZWN0aW9uKGZyb206IFZlY3RvcjIsIHRvOiBWZWN0b3IyLCBzdGFydDogVmVjdG9yMiwgZW5kOiBWZWN0b3IyKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJzZWN0aW9uUmF3KGZyb20ueCwgZnJvbS55LCB0by54LCB0by55LCBzdGFydC54LCBzdGFydC55LCBlbmQueCwgZW5kLnkpO1xuICB9XG4gIGludGVyc2VjdGlvbih0bzogVmVjdG9yMiwgc3RhcnQ6IFZlY3RvcjIsIGVuZDogVmVjdG9yMik6IFZlY3RvcjIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBWZWN0b3IyLmludGVyc2VjdGlvbih0aGlzLCB0bywgc3RhcnQsIGVuZCk7XG4gIH1cbiAgYW5nbGUob3RoZXI/OiBWZWN0b3IyKTogbnVtYmVyIHtcbiAgICBpZiAob3RoZXIpIHtcbiAgICAgICBjb25zdCBhMSA9IHRoaXMuYW5nbGUoKTtcbiAgICAgICBjb25zdCBhMiA9IG90aGVyLmFuZ2xlKCk7XG4gICAgICAgaWYgKGEyIDwgYTEpIHtcbiAgICAgICAgcmV0dXJuIGEyICsgMiAqIE1hdGguUEkgLSBhMTtcbiAgICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYTIgLSBhMTtcbiAgICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnkgPiAwKSB7XG4gICAgICByZXR1cm4gTWF0aC5hY29zKHRoaXMueCAvIHRoaXMubGVuKCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gMiAqIE1hdGguUEkgLSBNYXRoLmFjb3ModGhpcy54IC8gdGhpcy5sZW4oKSk7XG4gICAgfVxuICB9XG59IiwiaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlY3RvcjJcIjtcblxuZXhwb3J0IGNsYXNzIExpbmUge1xuICB2MTogVmVjdG9yMjtcbiAgdjI6IFZlY3RvcjI7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHgxPzogbnVtYmVyLFxuICAgIHkxPzogbnVtYmVyLFxuICAgIHgyPzogbnVtYmVyLFxuICAgIHkyPzogbnVtYmVyXG4gICkge1xuICAgIHRoaXMudjEgPSBuZXcgVmVjdG9yMih4MSwgeTEpO1xuICAgIHRoaXMudjIgPSBuZXcgVmVjdG9yMih4MiwgeTIpO1xuICB9XG4gIGdldCB4MSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnYxLng7XG4gIH1cbiAgZ2V0IHkxKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudjEueTtcbiAgfVxuICBnZXQgeDIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52Mi54O1xuICB9XG4gIGdldCB5MigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnYyLnk7XG4gIH1cbiAgbGVuKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudjIuc3ViKHRoaXMudjEpLmxlbigpO1xuICB9XG4gIHBvaW50QXQodDogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMudjEuYWRkKHRoaXMudjIuc3ViKHRoaXMudjEpLm11bCh0KSk7XG4gIH1cbiAgYmVmb3JlKHQ6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLnYxLmFkZCh0aGlzLnYyLnN1Yih0aGlzLnYxKS5tdWwoLXQgLyB0aGlzLmxlbigpKSk7XG4gIH1cbiAgYWZ0ZXIodDogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMudjEuYWRkKHRoaXMudjIuc3ViKHRoaXMudjEpLm11bCgodGhpcy5sZW4oKSArIHQpIC8gdGhpcy5sZW4oKSkpO1xuICB9XG4gIGludGVyc2VjdGlvblRpbWVzV2l0aChvdGhlcjogTGluZSk6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLnYxLmludGVyc2VjdGlvblRpbWVzKHRoaXMudjIsIG90aGVyLnYxLCBvdGhlci52Mik7XG4gIH1cbiAgdXBkYXRlKGR4MSA9IDAsIGR5MSA9IDAsIGR4MiA9IDAsIGR5MiA9IDApOiB2b2lkIHtcbiAgICB0aGlzLnYxLnggKz0gZHgxO1xuICAgIHRoaXMudjEueSArPSBkeTE7XG4gICAgdGhpcy52Mi54ICs9IGR4MjtcbiAgICB0aGlzLnYyLnkgKz0gZHkyO1xuICB9XG59IiwiaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuL2xpbmVcIjtcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XG5cbmV4cG9ydCBjbGFzcyBQb2x5Z29uIHtcbiAgY29uc3RydWN0b3IocmVhZG9ubHkgdmVydGljZXM6IFZlY3RvcjJbXSA9IFtdKSB7XG5cbiAgfVxuICBwcml2YXRlIGFyZWFCZXR3ZWVuKGk6IG51bWJlciwgajogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMudmVydGljZXNbal0ueCAtIHRoaXMudmVydGljZXNbaV0ueCkgKiAodGhpcy52ZXJ0aWNlc1tpXS55ICsgdGhpcy52ZXJ0aWNlc1tqXS55KSAvIDI7XG4gIH1cbiAgYXJlYSgpOiBudW1iZXIge1xuICAgIGxldCBhID0gMDtcbiAgICBsZXQgaSA9IHRoaXMudmVydGljZXMubGVuZ3RoIC0gMTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGEgKz0gdGhpcy5hcmVhQmV0d2VlbihpLCBqKTtcbiAgICAgIGkgPSBqO1xuICAgIH1cbiAgICByZXR1cm4gYTtcbiAgfVxuICBzaGFyZUVkZ2UodTogVmVjdG9yMiwgdjogVmVjdG9yMik6IGJvb2xlYW4ge1xuICAgIGxldCBpID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGggLSAxO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKHRoaXMudmVydGljZXNbaV0uZXF1YWxzKHUpICYmIHRoaXMudmVydGljZXNbal0uZXF1YWxzKHYpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgaSA9IGo7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpbnRlcnNlY3Rpb25XaXRoKGxpbmU6IExpbmUpIHtcbiAgICBcbiAgfVxuICByZXZlcnNlKCk6IHZvaWQge1xuICAgIHRoaXMudmVydGljZXMucmV2ZXJzZSgpO1xuICB9XG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMudmVydGljZXMubGVuZ3RofSBwb2ludHM6IGAgKyB0aGlzLnZlcnRpY2VzLm1hcCh2ID0+IGAoJHt2LngudG9GaXhlZCgpfSwgJHt2LnkudG9GaXhlZCgpfSlgKS5qb2luKCcsICcpICsgYCAoYXJlYTogJHt0aGlzLmFyZWEoKS50b0ZpeGVkKCl9KWA7XG4gIH1cbn0iLCJpbXBvcnQgeyBQb2xwbG90UmVuZGVyZXIgfSBmcm9tIFwiLi9pbnRlcmZhY2VzL3BvbHBsb3QtcmVuZGVyZXJcIjtcbmltcG9ydCB7IExpbmUgfSBmcm9tIFwiLi9saW5lXCI7XG5pbXBvcnQgeyBQb2x5Z29uIH0gZnJvbSBcIi4vcG9seWdvblwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlY3RvcjJcIjtcblxuZXhwb3J0IGNsYXNzIFBvbFBsb3Qge1xuICBsaW5lczogTGluZVtdID0gW107XG4gIGludGVyc2VjdGlvblRpbWVzOiBudW1iZXJbXVtdID0gW107XG4gIGludGVyc2VjdGlvblBvaW50czogVmVjdG9yMltdW10gPSBbXTtcbiAgY29uc3RydWN0b3IocmVhZG9ubHkgcmVuZGVyZXI6IFBvbHBsb3RSZW5kZXJlcikge1xuICAgIHRoaXMudGVzdCgpO1xuICAgIGxldCBkcmFnZ2VkTGluZTogTGluZTtcbiAgICBsZXQgZHJhZ2dlZFZlY3RvcjI6IFZlY3RvcjI7XG5cbiAgICB0aGlzLnJlbmRlcmVyLnNldE1vdXNlRG93bkhhbmRsZXIoKGV2ZW50LCBjbGlja2VkTGluZSwgY2xpY2tlZFZlY3RvcjIpID0+IHtcbiAgICAgIGRyYWdnZWRMaW5lID0gY2xpY2tlZExpbmUgfHwgbnVsbDtcbiAgICAgIGRyYWdnZWRWZWN0b3IyID0gY2xpY2tlZFZlY3RvcjIgfHwgbnVsbDtcbiAgICAgIGlmICghZHJhZ2dlZExpbmUpIHtcbiAgICAgICAgZHJhZ2dlZExpbmUgPSBuZXcgTGluZShldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZLCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICAgICAgZHJhZ2dlZFZlY3RvcjIgPSBkcmFnZ2VkTGluZS52MjtcbiAgICAgICAgdGhpcy5hZGRMaW5lKGRyYWdnZWRMaW5lKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGxldCBzZWxlY3RlZExpbmU6IExpbmU7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRNb3VzZVVwSGFuZGxlcigoZXZlbnQsIGNsaWNrZWRMaW5lLCBjbGlja2VkVmVjdG9yMikgPT4ge1xuICAgICAgaWYgKGNsaWNrZWRMaW5lKSB7XG4gICAgICAgIGlmIChzZWxlY3RlZExpbmUgJiYgc2VsZWN0ZWRMaW5lICE9PSBjbGlja2VkTGluZSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoc2VsZWN0ZWRMaW5lLCBjbGlja2VkTGluZSA9PT0gaG92ZXJlZExpbmUsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxlY3RlZExpbmUgPSBjbGlja2VkTGluZTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShzZWxlY3RlZExpbmUsIGNsaWNrZWRMaW5lID09PSBob3ZlcmVkTGluZSwgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkTGluZSkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKHNlbGVjdGVkTGluZSwgY2xpY2tlZExpbmUgPT09IGhvdmVyZWRMaW5lLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBkcmFnZ2VkTGluZSA9IG51bGw7XG4gICAgICBkcmFnZ2VkVmVjdG9yMiA9IG51bGw7XG4gICAgfSk7XG5cbiAgICBsZXQgaG92ZXJlZExpbmU6IExpbmU7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRNb3VzZU1vdmVIYW5kbGVyKChldmVudCwgY2xpY2tlZExpbmUsIGNsaWNrZWRWZWN0b3IyKSA9PiB7XG4gICAgICBpZiAoY2xpY2tlZExpbmUpIHtcbiAgICAgICAgaWYgKGhvdmVyZWRMaW5lICYmIGhvdmVyZWRMaW5lICE9PSBjbGlja2VkTGluZSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoaG92ZXJlZExpbmUsIGZhbHNlLCBjbGlja2VkTGluZSA9PT0gc2VsZWN0ZWRMaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBob3ZlcmVkTGluZSA9IGNsaWNrZWRMaW5lO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKGhvdmVyZWRMaW5lLCB0cnVlLCBjbGlja2VkTGluZSA9PT0gc2VsZWN0ZWRMaW5lKTsgXG4gICAgICB9IGVsc2UgaWYgKGhvdmVyZWRMaW5lKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoaG92ZXJlZExpbmUsIGZhbHNlLCBjbGlja2VkTGluZSA9PT0gc2VsZWN0ZWRMaW5lKTtcbiAgICAgICAgaG92ZXJlZExpbmUgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGRyYWdnZWRMaW5lKSB7XG4gICAgICAgIGlmIChkcmFnZ2VkVmVjdG9yMikge1xuICAgICAgICAgIGRyYWdnZWRWZWN0b3IyLnggPSBldmVudC5jbGllbnRYO1xuICAgICAgICAgIGRyYWdnZWRWZWN0b3IyLnkgPSBldmVudC5jbGllbnRZO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRyYWdnZWRMaW5lLnVwZGF0ZShldmVudC5tb3ZlbWVudFgsIGV2ZW50Lm1vdmVtZW50WSwgZXZlbnQubW92ZW1lbnRYLCBldmVudC5tb3ZlbWVudFkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJzZWN0aW9uVGltZXMoZHJhZ2dlZExpbmUpO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKGRyYWdnZWRMaW5lLCBkcmFnZ2VkTGluZSA9PT0gaG92ZXJlZExpbmUsIGRyYWdnZWRMaW5lID09PSBzZWxlY3RlZExpbmUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZXZlbnQgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJyAnKSB7XG4gICAgICAgIHRoaXMucmVuZGVySW50ZXJzZWN0aW9ucygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIGFkZExpbmUobGluZTogTGluZSk6IHZvaWQge1xuICAgIHRoaXMuYWRkSW50ZXJzZWN0aW9uVGltZXMobGluZSk7XG4gICAgdGhpcy5saW5lcy5wdXNoKGxpbmUpO1xuICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUobGluZSwgZmFsc2UsIGZhbHNlKTtcbiAgfVxuICBhZGRJbnRlcnNlY3Rpb25UaW1lcyhcbiAgICBsaW5lOiBMaW5lLFxuICAgIGxpbmVzID0gdGhpcy5saW5lcyxcbiAgICBpbnRlcnNlY3Rpb25UaW1lcyA9IHRoaXMuaW50ZXJzZWN0aW9uVGltZXMsXG4gICAgaW50ZXJzZWN0aW9uUG9pbnRzID0gdGhpcy5pbnRlcnNlY3Rpb25Qb2ludHNcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgbmV3SW50ZXJzZWN0aW9uVGltZXM6IG51bWJlcltdID0gW107XG4gICAgY29uc3QgbmV3SW50ZXJzZWN0aW9uUG9pbnRzOiBWZWN0b3IyW10gPSBbXTtcbiAgICBsZXQgdGltZXM6IFZlY3RvcjI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGltZXMgPSBsaW5lc1tpXS5pbnRlcnNlY3Rpb25UaW1lc1dpdGgobGluZSk7XG4gICAgICBpbnRlcnNlY3Rpb25UaW1lc1tpXS5wdXNoKHRpbWVzLngpO1xuICAgICAgaW50ZXJzZWN0aW9uUG9pbnRzW2ldLnB1c2goXG4gICAgICAgIDAgPD0gdGltZXMueCAmJiB0aW1lcy54IDw9IDEgJiYgMCA8PSB0aW1lcy55ICYmIHRpbWVzLnkgPD0gMVxuICAgICAgICAgID8gbGluZXNbaV0udjEuYWRkKGxpbmVzW2ldLnYyLnN1YihsaW5lc1tpXS52MSkubXVsKHRpbWVzLngpKVxuICAgICAgICAgIDogbnVsbFxuICAgICAgKTtcbiAgICAgIG5ld0ludGVyc2VjdGlvblRpbWVzLnB1c2godGltZXMueSk7XG4gICAgICBuZXdJbnRlcnNlY3Rpb25Qb2ludHMucHVzaChudWxsKTtcbiAgICB9XG4gICAgbmV3SW50ZXJzZWN0aW9uVGltZXMucHVzaChOYU4pO1xuICAgIG5ld0ludGVyc2VjdGlvblBvaW50cy5wdXNoKG51bGwpO1xuICAgIGludGVyc2VjdGlvblRpbWVzLnB1c2gobmV3SW50ZXJzZWN0aW9uVGltZXMpO1xuICAgIGludGVyc2VjdGlvblBvaW50cy5wdXNoKG5ld0ludGVyc2VjdGlvblBvaW50cyk7XG4gICAgLy8gdGhpcy5yZW5kZXJJbnRlcnNlY3Rpb25zKCk7XG4gIH1cbiAgdXBkYXRlSW50ZXJzZWN0aW9uVGltZXMoXG4gICAgbGluZTogTGluZSxcbiAgICBsaW5lcyA9IHRoaXMubGluZXMsXG4gICAgaW50ZXJzZWN0aW9uVGltZXMgPSB0aGlzLmludGVyc2VjdGlvblRpbWVzLFxuICAgIGludGVyc2VjdGlvblBvaW50cyA9IHRoaXMuaW50ZXJzZWN0aW9uUG9pbnRzXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gbGluZXMuaW5kZXhPZihsaW5lKTtcbiAgICBsZXQgdGltZXM6IFZlY3RvcjI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgIT09IGluZGV4KSB7XG4gICAgICAgIHRpbWVzID0gbGluZXNbaV0uaW50ZXJzZWN0aW9uVGltZXNXaXRoKGxpbmUpO1xuICAgICAgICBpbnRlcnNlY3Rpb25UaW1lc1tpXVtpbmRleF0gPSB0aW1lcy54O1xuICAgICAgICBpbnRlcnNlY3Rpb25UaW1lc1tpbmRleF1baV0gPSB0aW1lcy55O1xuICAgICAgICBpZiAoaSA8IGluZGV4KSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnRzW2ldW2luZGV4XSA9IDAgPD0gdGltZXMueCAmJiB0aW1lcy54IDw9IDEgJiYgMCA8PSB0aW1lcy55ICYmIHRpbWVzLnkgPD0gMVxuICAgICAgICAgICAgPyBsaW5lc1tpXS52MS5hZGQobGluZXNbaV0udjIuc3ViKGxpbmVzW2ldLnYxKS5tdWwodGltZXMueCkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnRzW2luZGV4XVtpXSA9IDAgPD0gdGltZXMueCAmJiB0aW1lcy54IDw9IDEgJiYgMCA8PSB0aW1lcy55ICYmIHRpbWVzLnkgPD0gMVxuICAgICAgICAgICAgPyBsaW5lc1tpXS52MS5hZGQobGluZXNbaV0udjIuc3ViKGxpbmVzW2ldLnYxKS5tdWwodGltZXMueCkpXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gdGhpcy5yZW5kZXJJbnRlcnNlY3Rpb25zKCk7XG4gIH1cbiAgcmVuZGVySW50ZXJzZWN0aW9ucygpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlcmVyLmNsZWFySW50ZXJzZWN0aW9ucygpO1xuICAgIHRoaXMuaW50ZXJzZWN0aW9uUG9pbnRzLmZvckVhY2goaW50ZXJzZWN0aW9uUG9pbnRzID0+IHtcbiAgICAgIGludGVyc2VjdGlvblBvaW50cy5mb3JFYWNoKGludGVyc2VjdGlvblBvaW50ID0+IHtcbiAgICAgICAgaWYgKGludGVyc2VjdGlvblBvaW50KSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3UG9pbnQoaW50ZXJzZWN0aW9uUG9pbnQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLnJlbmRlcmVyLmNsZWFyUG9seWdvbnMoKTtcbiAgICBjb25zdCBwYXJ0aWFscyA9IHRoaXMuYnVpbGRQYXJ0aWFsc0Zyb21JbnRlcnNlY3Rpb25UaW1lcygpO1xuICAgIHRoaXMuYnVpbGRQb2x5Z29uc0Zyb21QYXJ0aWFscyhwYXJ0aWFscylcbiAgICAgIC5mb3JFYWNoKHBvbHlnb24gPT4gdGhpcy5yZW5kZXJlci5kcmF3UG9seWdvbihwb2x5Z29uKSk7XG4gIH1cbiAgdGVzdFNpZGUodTogVmVjdG9yMiwgdjogVmVjdG9yMiwgdzogVmVjdG9yMik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB2LnN1Yih1KS5jcm9zcyh3LnN1Yih1KSkgPiAwO1xuICB9XG4gIHBhcnRpYWxzQXJlQ29ubmVjdGVkKHAxOiBQb2x5Z29uLCBwMjogUG9seWdvbik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwMS52ZXJ0aWNlc1twMS52ZXJ0aWNlcy5sZW5ndGggLSAyXS5lcXVhbHMocDIudmVydGljZXNbMF0pICYmXG4gICAgICAgICAgIHAxLnZlcnRpY2VzW3AxLnZlcnRpY2VzLmxlbmd0aCAtIDFdLmVxdWFscyhwMi52ZXJ0aWNlc1sxXSk7XG4gIH1cbiAgYnVpbGRQYXJ0aWFsc0Zyb21Qb2ludHMoXG4gICAgbG9jYWxJbnRlcjogVmVjdG9yMixcbiAgICBwb2ludHM6IFtWZWN0b3IyLCBWZWN0b3IyLCBWZWN0b3IyLCBWZWN0b3IyXSxcbiAgICBsb2NhbExpbmU6IExpbmUsXG4gICk6IFBvbHlnb25bXSB7XG4gICAgY29uc3QgcGFydHM6IFBvbHlnb25bXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocG9pbnRzW2ldKSB7XG4gICAgICAgIGxldCBqID0gaSArIDE7XG4gICAgICAgIGlmIChqID09PSBwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgaiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKCFwb2ludHNbal0pwqB7XG4gICAgICAgICAgaisrO1xuICAgICAgICAgIGlmIChqID09PSBwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgIT09IGopIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKG5ldyBQb2x5Z29uKFtwb2ludHNbaV0sIGxvY2FsSW50ZXIsIHBvaW50c1tqXV0pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAyICYmIHBhcnRzWzBdLmFyZWEoKSA9PT0gMCkge1xuICAgICAgLy8gc3BlY2lhbCBjYXNlIHdoZXJlIHdlIG9ubHkgaGF2ZSBwcmV2TG9jYWxJbnRlciAob3B0aW9uYWxseSkgYW5kIG5leHRMb2NhbEludGVyXG4gICAgICAvLyBUT0RPIGNoZWNrIHRoaXMgc3BlY2lhbCBjYXNlIHdoZW4gZXZlcnkgdGhpbmcgd29ya3NcbiAgICAgIC8vIGNvbnNvbGUubG9nKHBhcnRzKTtcbiAgICAgIGlmIChsb2NhbExpbmUudjEueSA8IGxvY2FsTGluZS52Mi55KSB7XG4gICAgICAgIHBhcnRzLmZvckVhY2gocCA9PiBwLnJldmVyc2UoKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcnRzLmZvckVhY2gocCA9PiB7XG4gICAgICAgIGlmIChwLmFyZWEoKSA8IDApIHtcbiAgICAgICAgICBwLnJldmVyc2UoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGlmIChwYXJ0cy5zb21lKHAgPT4gcC5hcmVhKCkgPCAwKSkge1xuICAgIC8vICAgcGFydHMuZm9yRWFjaChwID0+IHAucmV2ZXJzZSgpKTtcbiAgICAvLyB9IGVsc2UgaWYgKCFwYXJ0cy5zb21lKHAgPT4gMCA8IHAuYXJlYSgpKSkge1xuICAgIC8vICAgLy8gc3BlY2lhbCBjYXNlIHdoZXJlIHdlIG9ubHkgaGF2ZSBwcmV2TG9jYWxJbnRlciAob3B0aW9uYWxseSkgYW5kIG5leHRMb2NhbEludGVyXG4gICAgLy8gICAvLyBUT0RPIGNoZWNrIHRoaXMgc3BlY2lhbCBjYXNlIHdoZW4gZXZlcnkgdGhpbmcgd29ya3NcbiAgICAvLyAgIC8vIGNvbnNvbGUubG9nKHBhcnRzKTtcbiAgICAvLyAgIGlmIChsb2NhbExpbmUudjEueSA8IGxvY2FsTGluZS52Mi55KSB7XG4gICAgLy8gICAgIHBhcnRzLmZvckVhY2gocCA9PiBwLnJldmVyc2UoKSk7XG4gICAgLy8gICB9XG4gICAgLy8gfVxuICAgIHJldHVybiBwYXJ0cztcbiAgfVxuICBidWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvblRpbWVzKFxuICAgIGxpbmVzID0gdGhpcy5saW5lcyxcbiAgICBpbnRlcnNlY3Rpb25UaW1lcyA9IHRoaXMuaW50ZXJzZWN0aW9uVGltZXNcbiAgKTogUG9seWdvbltdIHtcbiAgICBjb25zb2xlLmxvZygnYnVpbGRQYXJ0aWFsc0Zyb21JbnRlcnNlY3Rpb25UaW1lcycpO1xuICAgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJyk7XG4gICAgY29uc29sZS5sb2coJ2xpbmVzLmxlbmd0aCA9ICcsIGxpbmVzLmxlbmd0aCk7XG4gICAgY29uc3QgaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5ID0gaW50ZXJzZWN0aW9uVGltZXNcbiAgICAgIC5tYXAoKGludGVyc2VjdGlvblRpbWVzQXRJLCBpKSA9PiB7XG4gICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb25UaW1lc0F0SVxuICAgICAgICAgIC5tYXAoKF8sIGopID0+IGopXG4gICAgICAgICAgLmZpbHRlcihqID0+IHtcbiAgICAgICAgICAgIHJldHVybiAhaXNOYU4oaW50ZXJzZWN0aW9uVGltZXNBdElbal0pICYmIDAgPD0gaW50ZXJzZWN0aW9uVGltZXNBdElbal0gJiYgaW50ZXJzZWN0aW9uVGltZXNBdElbal0gPD0gMSAmJlxuICAgICAgICAgICAgICAhaXNOYU4oaW50ZXJzZWN0aW9uVGltZXNbal1baV0pICYmIDAgPD0gaW50ZXJzZWN0aW9uVGltZXNbal1baV0gJiYgaW50ZXJzZWN0aW9uVGltZXNbal1baV0gPD0gMTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zb3J0KChpLCBqKSA9PiBpbnRlcnNlY3Rpb25UaW1lc0F0SVtpXSAtIGludGVyc2VjdGlvblRpbWVzQXRJW2pdKTtcbiAgICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheSk7XG4gICAgY29uc3QgcGFydGlhbHM6IFBvbHlnb25bXSA9IFtdO1xuICAgIGZvciAobGV0IGxvY2FsSW5kZXggPSAwOyBsb2NhbEluZGV4IDwgaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5Lmxlbmd0aDsgbG9jYWxJbmRleCsrKSB7XG4gICAgICBmb3IgKGxldCBsb2NhbEludGVySW5kZXggPSAwOyBsb2NhbEludGVySW5kZXggPCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF0ubGVuZ3RoOyBsb2NhbEludGVySW5kZXgrKykge1xuICAgICAgICBjb25zdCBmb3JlaWduSW5kZXggPSBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bbG9jYWxJbnRlckluZGV4XTtcbiAgICAgICAgaWYgKGxvY2FsSW5kZXggPCBmb3JlaWduSW5kZXgpIHtcbiAgICAgICAgICBjb25zdCBsb2NhbEludGVyID0gbGluZXNbbG9jYWxJbmRleF0ucG9pbnRBdChpbnRlcnNlY3Rpb25UaW1lc1tsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bbG9jYWxJbnRlckluZGV4XV0pO1xuICAgICAgICAgIGNvbnN0IHByZXZMb2NhbEludGVySW5kZXggPSBsb2NhbEludGVySW5kZXggLSAxO1xuICAgICAgICAgIGNvbnN0IG5leHRMb2NhbEludGVySW5kZXggPSBsb2NhbEludGVySW5kZXggKyAxO1xuICAgICAgICAgIGNvbnN0IGZvcmVpZ25JbnRlckluZGV4ID0gaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF0uZmluZEluZGV4KGkgPT4gaSA9PT0gbG9jYWxJbmRleCk7XG4gICAgICAgICAgY29uc3QgcHJldkZvcmVpZ25JbnRlckluZGV4ID0gZm9yZWlnbkludGVySW5kZXggLSAxO1xuICAgICAgICAgIGNvbnN0IG5leHRGb3JlaWduSW50ZXJJbmRleCA9IGZvcmVpZ25JbnRlckluZGV4ICsgMTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgXG4gICAgICAgICAgLy8gICBsb2NhbEluZGV4OiAke2xvY2FsSW5kZXh9XG4gICAgICAgICAgLy8gICBsb2NhbEludGVyc2VjdGlvbnMgJHtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1cbiAgICAgICAgICAvLyAgICAgLm1hcCgoXywgaSkgPT4gaSA9PT0gbG9jYWxJbnRlckluZGV4ID8gYFske199XWAgOiBfKVxuICAgICAgICAgIC8vICAgICAuam9pbignLCAnKX1cbiAgICAgICAgICAvLyAgIGZvcmVpZ25JbmRleDogJHtmb3JlaWduSW5kZXh9XG4gICAgICAgICAgLy8gICBmb3JlaWduSW50ZXJzZWN0aW9ucyAke2ludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtmb3JlaWduSW5kZXhdXG4gICAgICAgICAgLy8gICAgIC5tYXAoKF8sIGkpID0+IGkgPT09IGZvcmVpZ25JbnRlckluZGV4ID8gYFske199XWAgOiBfKVxuICAgICAgICAgIC8vICAgICAuam9pbignLCAnKX1cbiAgICAgICAgICAvLyBgKTtcbiAgICAgICAgICBjb25zdCBwcmV2TG9jYWxJbnRlciA9IDAgPCBsb2NhbEludGVySW5kZXhcbiAgICAgICAgICAgID8gbGluZXNbbG9jYWxJbmRleF0ucG9pbnRBdChpbnRlcnNlY3Rpb25UaW1lc1tsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bcHJldkxvY2FsSW50ZXJJbmRleF1dKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IG5leHRMb2NhbEludGVyID0gbG9jYWxJbnRlckluZGV4IDwgaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2xvY2FsSW5kZXhdLmxlbmd0aCAtIDFcbiAgICAgICAgICAgID8gbGluZXNbbG9jYWxJbmRleF0ucG9pbnRBdChpbnRlcnNlY3Rpb25UaW1lc1tsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bbmV4dExvY2FsSW50ZXJJbmRleF1dKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IHByZXZGb3JlaWduSW50ZXIgPSAwIDwgZm9yZWlnbkludGVySW5kZXhcbiAgICAgICAgICAgID8gbGluZXNbZm9yZWlnbkluZGV4XS5wb2ludEF0KGludGVyc2VjdGlvblRpbWVzW2ZvcmVpZ25JbmRleF1baW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF1bcHJldkZvcmVpZ25JbnRlckluZGV4XV0pXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgbmV4dEZvcmVpZ25JbnRlciA9IGZvcmVpZ25JbnRlckluZGV4IDwgaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF0ubGVuZ3RoIC0gMVxuICAgICAgICAgICAgPyBsaW5lc1tmb3JlaWduSW5kZXhdLnBvaW50QXQoaW50ZXJzZWN0aW9uVGltZXNbZm9yZWlnbkluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbZm9yZWlnbkluZGV4XVtuZXh0Rm9yZWlnbkludGVySW5kZXhdXSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgXlxuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICBuZXh0Rm9yZWlnbkludGVyXG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICAvLyAgLS0tcHJldkxvY2FsSW50ZXItLS1sb2NhbEludGVyLS0tbmV4dExvY2FsSW50ZXItLS0+XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgIHByZXZGb3JlaWduSW50ZXJcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gdGhpcy5idWlsZFBhcnRpYWxzRnJvbVBvaW50cyhcbiAgICAgICAgICAgIGxvY2FsSW50ZXIsXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIHByZXZMb2NhbEludGVyLFxuICAgICAgICAgICAgICBuZXh0Rm9yZWlnbkludGVyLFxuICAgICAgICAgICAgICBuZXh0TG9jYWxJbnRlcixcbiAgICAgICAgICAgICAgcHJldkZvcmVpZ25JbnRlclxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGxpbmVzW2xvY2FsSW5kZXhdXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwYXJ0aWFscy5wdXNoKC4uLnBhcnRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygncGFydGlhbHMnLCBwYXJ0aWFscyk7XG4gICAgcmV0dXJuIHBhcnRpYWxzO1xuICB9XG4gIGJ1aWxkUG9seWdvbnNGcm9tUGFydGlhbHMocGFydGlhbHM6IFBvbHlnb25bXSk6IFBvbHlnb25bXSB7XG4gICAgY29uc3QgcG9seWdvbnM6IFBvbHlnb25bXSA9IFtdO1xuICAgIGxldCBpID0gMDtcbiAgICB3aGlsZSAoaSA8IHBhcnRpYWxzLmxlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXJ0aWFscy5sZW5ndGg7IGorKynCoHtcbiAgICAgICAgaWYgKGkgIT09IGopIHtcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWFsc0FyZUNvbm5lY3RlZChwYXJ0aWFsc1tpXSwgcGFydGlhbHNbal0pKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXG4gICAgICAgICAgICAgIHBhcnRpYWxzW2ldOiAke3BhcnRpYWxzW2ldLnRvU3RyaW5nKCl9LFxuICAgICAgICAgICAgICBwYXJ0aWFsc1tqXTogJHtwYXJ0aWFsc1tqXS50b1N0cmluZygpfSxcbiAgICAgICAgICAgIGApO1xuICAgICAgICAgICAgcGFydGlhbHNbaV0udmVydGljZXMuc3BsaWNlKC0yLCAyLCAuLi5wYXJ0aWFsc1tqXS52ZXJ0aWNlcyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgXG4gICAgICAgICAgICAgIHBhcnRpYWxzW2ldOiAke3BhcnRpYWxzW2ldLnRvU3RyaW5nKCl9IFtORVddLFxuICAgICAgICAgICAgYCk7XG4gICAgICAgICAgICBwYXJ0aWFscy5zcGxpY2UoaiwgMSk7XG4gICAgICAgICAgICBpZiAoaiA8IGkpIHtcbiAgICAgICAgICAgICAgaS0tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGFydGlhbHNBcmVDb25uZWN0ZWQocGFydGlhbHNbaV0sIHBhcnRpYWxzW2ldKSkge1xuICAgICAgICAgICAgICBwYXJ0aWFsc1tpXS52ZXJ0aWNlcy5zcGxpY2UoMCwgMik7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcbiAgICAgICAgICAgICAgICBuZXcgY29ubmVjdGVkIHBvbHlnb246ICR7cGFydGlhbHNbaV0udG9TdHJpbmcoKX1cbiAgICAgICAgICAgICAgYCk7XG4gICAgICAgICAgICAgIHBvbHlnb25zLnB1c2gocGFydGlhbHNbaV0pO1xuICAgICAgICAgICAgICBwYXJ0aWFscy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRpYWxzW2ldLnZlcnRpY2VzWzBdLmVxdWFscyhwYXJ0aWFsc1tpXS52ZXJ0aWNlc1twYXJ0aWFsc1tpXS52ZXJ0aWNlcy5sZW5ndGggLSAxXSkpIHtcbiAgICAgICAgICAgICAgcGFydGlhbHNbaV0udmVydGljZXMucG9wKCk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBcbiAgICAgICAgICAgICAgICBuZXcgY2xvc2VkIHBvbHlnb246ICR7cGFydGlhbHNbaV0udG9TdHJpbmcoKX1cbiAgICAgICAgICAgICAgYCk7XG4gICAgICAgICAgICAgIHBvbHlnb25zLnB1c2gocGFydGlhbHNbaV0pO1xuICAgICAgICAgICAgICBwYXJ0aWFscy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpID0gLTE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ2luY29tcGxldGUgcG9seWdvbnMnKTtcbiAgICAvLyBwYXJ0aWFscy5tYXAocCA9PiBjb25zb2xlLmxvZyhwLnRvU3RyaW5nKCkpKTtcbiAgICBjb25zb2xlLmxvZygncG9seWdvbnMnLCBwb2x5Z29ucyk7XG4gICAgcG9seWdvbnMubWFwKHAgPT4gY29uc29sZS5sb2cocC50b1N0cmluZygpKSk7XG4gICAgcmV0dXJuIHBvbHlnb25zO1xuICB9XG4gIHRlc3QoKTogdm9pZCB7XG4gICAgLy8gbG9jYWxMaW5lIGluY3JlYXNlIGFuZCBmb3JlaWduIGRpY3JlYXNlXG4gICAgbGV0IGxvY2FsTGluZSA9IG5ldyBMaW5lKDMwMCwgMzAwLCA2MDAsIDYwMCk7XG4gICAgbGV0IGZvcmVpZ25MaW5lID0gbmV3IExpbmUoMzAwLCA2MDAsIDYwMCwgMzAwKTtcbiAgICBsZXQgbG9jYWxJbnRlciA9IG5ldyBWZWN0b3IyKDQ1MCwgNDUwKTtcbiAgICBsZXQgcHJldkxvY2FsSW50ZXIgPSBuZXcgVmVjdG9yMig0MDAsIDQwMCk7XG4gICAgbGV0IG5leHRMb2NhbEludGVyID0gbmV3IFZlY3RvcjIoNTAwLCA1MDApO1xuICAgIGxldCBwcmV2Rm9yZWlnbkludGVyID0gbmV3IFZlY3RvcjIoNDAwLCA1MDApO1xuICAgIGxldCBuZXh0Rm9yZWlnbkludGVyID0gbmV3IFZlY3RvcjIoNTAwLCA0MDApO1xuICAgIGxldCBwYXJ0cyA9IHRoaXMuYnVpbGRQYXJ0aWFsc0Zyb21Qb2ludHMoXG4gICAgICBsb2NhbEludGVyLFxuICAgICAgW1xuICAgICAgICBwcmV2TG9jYWxJbnRlcixcbiAgICAgICAgbmV4dEZvcmVpZ25JbnRlcixcbiAgICAgICAgbmV4dExvY2FsSW50ZXIsXG4gICAgICAgIHByZXZGb3JlaWduSW50ZXJcbiAgICAgIF0sXG4gICAgICBsb2NhbExpbmVcbiAgICApO1xuICAgIHBhcnRzLm1hcChwID0+IGNvbnNvbGUubG9nKHAudG9TdHJpbmcoKSkpO1xuICAgIC8vIHBhcnRzLmxlbmd0aCA9PT0gNFxuXG4gICAgLy8gbG9jYWxMaW5lIGluY3JlYXNlIGFuZCBmb3JlaWduIGluY3JlYXNlXG4gICAgbG9jYWxMaW5lID0gbmV3IExpbmUoMzAwLCAzMDAsIDYwMCwgNjAwKTtcbiAgICBmb3JlaWduTGluZSA9IG5ldyBMaW5lKDYwMCwgMzAwLCAzMDAsIDYwMCk7XG4gICAgbG9jYWxJbnRlciA9IG5ldyBWZWN0b3IyKDQ1MCwgNDUwKTtcbiAgICBwcmV2TG9jYWxJbnRlciA9IG5ldyBWZWN0b3IyKDQwMCwgNDAwKTtcbiAgICBuZXh0TG9jYWxJbnRlciA9IG5ldyBWZWN0b3IyKDUwMCwgNTAwKTtcbiAgICBwcmV2Rm9yZWlnbkludGVyID0gbmV3IFZlY3RvcjIoNTAwLCA0MDApO1xuICAgIG5leHRGb3JlaWduSW50ZXIgPSBuZXcgVmVjdG9yMig0MDAsIDUwMCk7XG4gICAgcGFydHMgPSB0aGlzLmJ1aWxkUGFydGlhbHNGcm9tUG9pbnRzKFxuICAgICAgbG9jYWxJbnRlcixcbiAgICAgIFtcbiAgICAgICAgcHJldkxvY2FsSW50ZXIsXG4gICAgICAgIG5leHRGb3JlaWduSW50ZXIsXG4gICAgICAgIG5leHRMb2NhbEludGVyLFxuICAgICAgICBwcmV2Rm9yZWlnbkludGVyXG4gICAgICBdLFxuICAgICAgbG9jYWxMaW5lXG4gICAgKTtcbiAgICBwYXJ0cy5tYXAocCA9PiBjb25zb2xlLmxvZyhwLnRvU3RyaW5nKCkpKTtcbiAgICAvLyBwYXJ0cy5sZW5ndGggPT09IDRcblxuICAgIC8vIGxvY2FsTGluZSBpbmNyZWFzZSBhbmQgZm9yZWlnbiBpbmNyZWFzZVxuICAgIGxvY2FsTGluZSA9IG5ldyBMaW5lKDMwMCwgMzAwLCA2MDAsIDYwMCk7XG4gICAgZm9yZWlnbkxpbmUgPSBuZXcgTGluZSg2MDAsIDMwMCwgMzAwLCA2MDApO1xuICAgIGxvY2FsSW50ZXIgPSBuZXcgVmVjdG9yMig0NTAsIDQ1MCk7XG4gICAgcHJldkxvY2FsSW50ZXIgPSBuZXcgVmVjdG9yMig0MDAsIDQwMCk7XG4gICAgbmV4dExvY2FsSW50ZXIgPSBudWxsO1xuICAgIHByZXZGb3JlaWduSW50ZXIgPSBudWxsO1xuICAgIG5leHRGb3JlaWduSW50ZXIgPSBuZXcgVmVjdG9yMig0MDAsIDUwMCk7XG4gICAgcGFydHMgPSB0aGlzLmJ1aWxkUGFydGlhbHNGcm9tUG9pbnRzKFxuICAgICAgbG9jYWxJbnRlcixcbiAgICAgIFtcbiAgICAgICAgcHJldkxvY2FsSW50ZXIsXG4gICAgICAgIG5leHRGb3JlaWduSW50ZXIsXG4gICAgICAgIG5leHRMb2NhbEludGVyLFxuICAgICAgICBwcmV2Rm9yZWlnbkludGVyXG4gICAgICBdLFxuICAgICAgbG9jYWxMaW5lXG4gICAgKTtcbiAgICBwYXJ0cy5tYXAocCA9PiBjb25zb2xlLmxvZyhwLnRvU3RyaW5nKCkpKTtcbiAgICAvLyBwYXJ0cy5sZW5ndGggPT09IDNcbiAgfVxufVxuXG5cbi8vIGNvbnN0IGxpbmVzOiBMaW5lW10gPSBbXTtcbiAgICAvLyBjb25zdCBpVGltZXM6IG51bWJlcltdW10gPSBbXTtcbiAgICAvLyBjb25zdCBpUG9pbnRzOiBWZWN0b3IyW11bXSA9IFtdO1xuICAgIC8vIFtcbiAgICAvLyAgIFszMDAsIDMwMCwgNjAwLCA2MDBdLFxuICAgIC8vICAgWzMwMCwgNjAwLCA2MDAsIDMwMF0sXG4gICAgLy8gICBbNDAwLCAzMDAsIDMwMCwgNDAwXSxcbiAgICAvLyAgIFs1MDAsIDYwMCwgNjAwLCA0MDBdLFxuICAgIC8vICAgWzMwMCwgNTAwLCA0MDAsIDYwMF0sXG4gICAgLy8gICBbNTAwLCA2MDAsIDYwMCwgNDAwXSxcbiAgICAvLyBdLmZvckVhY2goKFt4MSwgeTEsIHgyLCB5Ml0pID0+IHtcbiAgICAvLyAgIHRoaXMuYWRkSW50ZXJzZWN0aW9uVGltZXMobDEsIGxpbmVzLCBpVGltZXMsIGlQb2ludHMpO1xuICAgIC8vICAgbGluZXMucHVzaChsMSk7XG4gICAgLy8gfSk7XG4gICAgLy8gY29uc3QgcGFydGlhbHMgPSB0aGlzLmJ1aWxkUGFydGlhbHNGcm9tSW50ZXJzZWN0aW9uVGltZXMobGluZXMsIGlUaW1lcyk7XG4gICAgLy8gY29uc29sZS5sb2cocGFydGlhbHMpOyIsImltcG9ydCB7IENsaWNrSGFuZGxlciwgUG9scGxvdFJlbmRlcmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9wb2xwbG90LXJlbmRlcmVyXCI7XG5pbXBvcnQgeyBMaW5lIH0gZnJvbSBcIi4vbGluZVwiO1xuaW1wb3J0IHsgUG9seWdvbiB9IGZyb20gXCIuL3BvbHlnb25cIjtcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XG5cbmNvbnN0IGdUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xuZ1RlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2JsYWNrJyk7XG5nVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMC40cHgnKTtcblxuY29uc3QgbGluZVRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdsaW5lJyk7XG5saW5lVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2UtZGFzaGFycmF5JywgJzEwLCA0LCAxLCA0Jyk7XG5cbmNvbnN0IGFuY2hvclRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG5hbmNob3JUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoXG4gICdkJyxcbiAgJ00gMCwgMCcgK1xuICAnQSAxMCwgMTAsIDAsIDAsIDAsIC01LCAtNScgKyBcbiAgJ0EgMTAsIDEwLCAwLCAxLCAxLCA1LCAtNScgK1xuICAnQSAxMCwgMTAsIDAsIDAsIDAsIDAsIDAnXG4pO1xuYW5jaG9yVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3doaXRlJyk7XG5cbmdUZW1wbGF0ZS5hcHBlbmRDaGlsZChsaW5lVGVtcGxhdGUpO1xuZ1RlbXBsYXRlLmFwcGVuZENoaWxkKGFuY2hvclRlbXBsYXRlKTtcbmdUZW1wbGF0ZS5hcHBlbmRDaGlsZChhbmNob3JUZW1wbGF0ZS5jbG9uZU5vZGUoKSk7XG5cbmNvbnN0IHBvaW50VGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xucG9pbnRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnZ3JlZW4nKTtcbnBvaW50VGVtcGxhdGUuc2V0QXR0cmlidXRlKCdyJywgJzMnKTtcblxuY29uc3QgcG9seWdvblRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG5wb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2dyZWVuJyk7XG5wb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCAnMC43Jyk7XG5wb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMycpO1xucG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2dyZXknKTtcblxuZXhwb3J0IGNsYXNzIFN2Z1JlbmRlcmVyIGltcGxlbWVudHMgUG9scGxvdFJlbmRlcmVyIHtcbiAgcmVhZG9ubHkgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKTtcbiAgcHJpdmF0ZSBpbnRlcnNlY3Rpb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcbiAgcHJpdmF0ZSBwb2x5Z29uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XG4gIHByaXZhdGUgc3ZnR0J5TGluZSA9IG5ldyBNYXA8TGluZSwgU1ZHR0VsZW1lbnQ+KCk7XG4gIHByaXZhdGUgbGluZUJ5U3ZnRyA9IG5ldyBNYXA8U1ZHR0VsZW1lbnQsIExpbmU+KCk7XG4gIHByaXZhdGUgb25Nb3VzZURvd246IChldmVudDogTW91c2VFdmVudCkgPT4gYW55O1xuICBwcml2YXRlIG9uTW91c2VVcDogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhbnk7XG4gIHByaXZhdGUgb25Nb3VzZU1vdmU6IChldmVudDogTW91c2VFdmVudCkgPT4gYW55O1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLmludGVyc2VjdGlvbkNvbnRhaW5lcik7XG4gICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQodGhpcy5wb2x5Z29uQ29udGFpbmVyKTtcbiAgfVxuICBjbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBhbnkge1xuICAgIHJldHVybiBldmVudCA9PiB7XG4gICAgICBjb25zdCBlbGVtZW50QXQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuICAgICAgY29uc3QgbGluZSA9IHRoaXMubGluZUJ5U3ZnRy5nZXQoZWxlbWVudEF0LnBhcmVudE5vZGUgYXMgU1ZHR0VsZW1lbnQpO1xuICAgICAgaWYgKGVsZW1lbnRBdCBpbnN0YW5jZW9mIFNWR1BhdGhFbGVtZW50ICYmIGVsZW1lbnRBdC5wYXJlbnROb2RlICE9PSB0aGlzLnBvbHlnb25Db250YWluZXIpIHtcbiAgICAgICAgaWYgKGVsZW1lbnRBdC5wYXJlbnROb2RlLmNoaWxkcmVuWzFdID09PSBlbGVtZW50QXQpIHtcbiAgICAgICAgICBjbGlja0hhbmRsZXIoZXZlbnQsIGxpbmUsIGxpbmUudjEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsaWNrSGFuZGxlcihldmVudCwgbGluZSwgbGluZS52Mik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoZWxlbWVudEF0IGluc3RhbmNlb2YgU1ZHTGluZUVsZW1lbnQpIHtcbiAgICAgICAgY2xpY2tIYW5kbGVyKGV2ZW50LCBsaW5lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsaWNrSGFuZGxlcihldmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBzZXRNb3VzZURvd25IYW5kbGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub25Nb3VzZURvd24pIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICAgIH1cbiAgICB0aGlzLm9uTW91c2VEb3duID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gIH1cbiAgc2V0TW91c2VVcEhhbmRsZXIoY2xpY2tIYW5kbGVyOiBDbGlja0hhbmRsZXIpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vbk1vdXNlVXApIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gICAgfVxuICAgIHRoaXMub25Nb3VzZVVwID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25Nb3VzZVVwKTtcbiAgfVxuICBzZXRNb3VzZU1vdmVIYW5kbGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub25Nb3VzZU1vdmUpIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgIH1cbiAgICB0aGlzLm9uTW91c2VNb3ZlID0gdGhpcy5jbGlja0hhbmRsZXJXcmFwcGVyKGNsaWNrSGFuZGxlcik7XG4gICAgdGhpcy5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5vbk1vdXNlTW92ZSk7XG4gIH1cbiAgZHJhd0xpbmUobGluZTogTGluZSwgaXNIb3ZlcmVkID0gZmFsc2UsIGlzU2VsZWN0ZWQgPSBmYWxzZSk6IHZvaWQge1xuICAgIGxldCBzdmdHOiBTVkdHRWxlbWVudDtcbiAgICBpZiAoIXRoaXMuc3ZnR0J5TGluZS5oYXMobGluZSkpIHtcbiAgICAgIHN2Z0cgPSBnVGVtcGxhdGUuY2xvbmVOb2RlKHRydWUpIGFzIFNWR0dFbGVtZW50O1xuICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQoc3ZnRyk7XG4gICAgICB0aGlzLnN2Z0dCeUxpbmUuc2V0KGxpbmUsIHN2Z0cpO1xuICAgICAgdGhpcy5saW5lQnlTdmdHLnNldChzdmdHLCBsaW5lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnRyA9IHRoaXMuc3ZnR0J5TGluZS5nZXQobGluZSk7XG4gICAgfVxuICAgIGNvbnN0IHN2Z0xpbmUgPSBzdmdHLmNoaWxkcmVuWzBdIGFzIFNWR0xpbmVFbGVtZW50O1xuICAgIGNvbnN0IHN2Z1BhdGhBbmNob3JTdGFydCA9IHN2Z0cuY2hpbGRyZW5bMV0gYXMgU1ZHUGF0aEVsZW1lbnQ7XG4gICAgY29uc3Qgc3ZnUGF0aEFuY2hvckVuZCA9IHN2Z0cuY2hpbGRyZW5bMl0gYXMgU1ZHUGF0aEVsZW1lbnQ7XG4gICAgY29uc3QgeDEgPSBsaW5lLngxLnRvRml4ZWQoKTtcbiAgICBjb25zdCB5MSA9IGxpbmUueTEudG9GaXhlZCgpO1xuICAgIGNvbnN0IHgyID0gbGluZS54Mi50b0ZpeGVkKCk7XG4gICAgY29uc3QgeTIgPSBsaW5lLnkyLnRvRml4ZWQoKTtcbiAgICBzdmdMaW5lLnNldEF0dHJpYnV0ZSgneDEnLCB4MSk7XG4gICAgc3ZnTGluZS5zZXRBdHRyaWJ1dGUoJ3kxJywgeTEpO1xuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd4MicsIHgyKTtcbiAgICBzdmdMaW5lLnNldEF0dHJpYnV0ZSgneTInLCB5Mik7XG4gICAgaWYgKGlzSG92ZXJlZCkge1xuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcwLjhweCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdmdHLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzAuNHB4Jyk7XG4gICAgfVxuICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICBzdmdHLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJyMxOWExOTQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdibGFjaycpO1xuICAgIH1cbiAgICBjb25zdCBhbmdsZSA9IDE4MCAqIChsaW5lLnYyLnN1YihsaW5lLnYxKS5hbmdsZSgpIC0gTWF0aC5QSSAvIDIpIC8gTWF0aC5QSTtcbiAgICBzdmdQYXRoQW5jaG9yU3RhcnQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7eDF9LCAke3kxfSkgcm90YXRlKCR7aXNOYU4oYW5nbGUpID8gMCA6IGFuZ2xlfSlgKTtcbiAgICBzdmdQYXRoQW5jaG9yRW5kLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3gyfSwgJHt5Mn0pIHJvdGF0ZSgke2lzTmFOKGFuZ2xlKSA/IDAgOiAxODAgKyBhbmdsZX0pYCk7XG4gIH1cbiAgZXJhc2VMaW5lKGxpbmU6IExpbmUpOiB2b2lkIHtcbiAgICBjb25zdCBzdmdHID0gdGhpcy5zdmdHQnlMaW5lLmdldChsaW5lKTtcbiAgICBpZiAoc3ZnRykge1xuICAgICAgdGhpcy5zdmcucmVtb3ZlQ2hpbGQoc3ZnRyk7XG4gICAgICB0aGlzLnN2Z0dCeUxpbmUuZGVsZXRlKGxpbmUpO1xuICAgIH1cbiAgfVxuICBkcmF3UG9pbnQocG9pbnQ6IFZlY3RvcjIpOiB2b2lkIHtcbiAgICBjb25zdCBzdmdDaXJjbGUgPSBwb2ludFRlbXBsYXRlLmNsb25lTm9kZSgpIGFzIFNWR0NpcmNsZUVsZW1lbnQ7XG4gICAgc3ZnQ2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCBwb2ludC54LnRvRml4ZWQoKSk7XG4gICAgc3ZnQ2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCBwb2ludC55LnRvRml4ZWQoKSk7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoc3ZnQ2lyY2xlKTtcbiAgfVxuICBwcml2YXRlIGNsZWFyQ29udGFpbmVyKGNvbnRhaW5lcjogU1ZHR0VsZW1lbnQpOiB2b2lkIHtcbiAgICB3aGlsZSAoY29udGFpbmVyLmZpcnN0Q2hpbGQpIHtcbiAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9XG4gIGNsZWFySW50ZXJzZWN0aW9ucygpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyQ29udGFpbmVyKHRoaXMuaW50ZXJzZWN0aW9uQ29udGFpbmVyKTtcbiAgfVxuICBkcmF3UG9seWdvbihwb2x5Z29uOiBQb2x5Z29uKTogdm9pZCB7XG4gICAgY29uc3Qgc3ZnUGF0aCA9IHBvbHlnb25UZW1wbGF0ZS5jbG9uZU5vZGUoKSBhcyBTVkdQYXRoRWxlbWVudDtcbiAgICBzdmdQYXRoLnNldEF0dHJpYnV0ZSgnZCcsICdNICcgKyBwb2x5Z29uLnZlcnRpY2VzLm1hcCh2ID0+IGAke3YueC50b0ZpeGVkKCl9ICR7di55LnRvRml4ZWQoKX1gKS5qb2luKCcgTCAnKSArICdaJyk7XG4gICAgc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnIycgKyAoTWF0aC5mbG9vcigoMTY3NzcyMTUgLSAxZTUpICogTWF0aC5yYW5kb20oKSkgKyAxZTUpLnRvU3RyaW5nKDE2KSk7XG4gICAgdGhpcy5wb2x5Z29uQ29udGFpbmVyLmFwcGVuZENoaWxkKHN2Z1BhdGgpO1xuICB9XG4gIGNsZWFyUG9seWdvbnMoKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhckNvbnRhaW5lcih0aGlzLnBvbHlnb25Db250YWluZXIpO1xuICB9XG59IiwiaW1wb3J0IHsgUG9sUGxvdCB9IGZyb20gXCIuL3BvbHBsb3RcIjtcbmltcG9ydCB7IFN2Z1JlbmRlcmVyIH0gZnJvbSBcIi4vc3ZnLXJlbmRlcmVyXCI7XG5cbmNvbnN0IHN2Z1JlbmRlcmVyID0gbmV3IFN2Z1JlbmRlcmVyKCk7XG5jb25zdCBwb2xwbG90ID0gbmV3IFBvbFBsb3Qoc3ZnUmVuZGVyZXIpO1xuY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcbmJvZHkuYXBwZW5kQ2hpbGQoc3ZnUmVuZGVyZXIuc3ZnKTsiXSwic291cmNlUm9vdCI6IiJ9