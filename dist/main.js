(()=>{"use strict";var t,e=function(){function t(t,e,i,s){this.x1=t,this.y1=e,this.x2=i,this.y2=s}return t.prototype.len=function(){return Math.sqrt(Math.pow(this.x2-this.x1,2)+Math.pow(this.y2-this.y1,2))},t.prototype.xBefore=function(t){return this.x1-t*(this.x2-this.x1)/this.len()},t.prototype.yBefore=function(t){return this.y1-t*(this.y2-this.y1)/this.len()},t.prototype.xAfter=function(t){return this.x1+(this.len()+t)*(this.x2-this.x1)/this.len()},t.prototype.yAfter=function(t){return this.y1+(this.len()+t)*(this.y2-this.y1)/this.len()},t.prototype.intersect=function(t){},t}(),i=function(){function t(t){this.svg=t,this.svgLines=new Map,this.startSvgCircles=new Map,this.endSvgCircles=new Map,this.lines=new Map,this.startCircles=new Map,this.endCircles=new Map}return t.prototype.isDragging=function(){return!!this.draggedCircle},t.prototype.draw=function(t){var e,i,s;this.svgLines.has(t)?(e=this.svgLines.get(t),i=this.startSvgCircles.get(t),s=this.endSvgCircles.get(t)):((e=document.createElementNS("http://www.w3.org/2000/svg","line")).setAttribute("stroke","black"),this.svgLines.set(t,e),this.lines.set(e,t),this.svg.appendChild(e),(i=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("fill","red"),i.setAttribute("r","5"),this.startSvgCircles.set(t,i),this.startCircles.set(i,t),this.svg.appendChild(i),(s=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("fill","blue"),s.setAttribute("r","5"),this.endSvgCircles.set(t,s),this.endCircles.set(s,t),this.svg.appendChild(s)),e.setAttribute("x1",t.x1.toFixed()),e.setAttribute("y1",t.y1.toFixed()),e.setAttribute("x2",t.x2.toFixed()),e.setAttribute("y2",t.y2.toFixed()),i.setAttribute("cx",t.xBefore(10).toFixed()),i.setAttribute("cy",t.yBefore(10).toFixed()),s.setAttribute("cx",t.xAfter(10).toFixed()),s.setAttribute("cy",t.yAfter(10).toFixed())},t.prototype.drag=function(t){this.draggedCircle=t},t.prototype.moveTo=function(t,i){if(this.startCircles.has(this.draggedCircle)){var s=this.startCircles.get(this.draggedCircle),r=new e(t,i,s.x2,s.y2);s.x1=r.xBefore(-10),s.y1=r.yBefore(-10),this.draw(s)}else this.endCircles.has(this.draggedCircle)&&(s=this.endCircles.get(this.draggedCircle),r=new e(s.x1,s.y1,t,i),s.x2=r.xAfter(-10),s.y2=r.yAfter(-10),this.draw(s))},t.prototype.drop=function(){this.draggedCircle=null},t}(),s=document.querySelector("body"),r=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=[],o=null,l=null,h=new i(r);r.addEventListener("mousedown",(function(e){(t=document.elementFromPoint(e.clientX,e.clientY))&&t instanceof SVGCircleElement&&(h.drag(t),console.log("CIRCLE"))})),r.addEventListener("mouseup",(function(t){if(h.isDragging())h.drop();else if(null===o&&null===l)o=t.clientX,l=t.clientY;else{var i=new e(o,l,t.clientX,t.clientY);o=null,l=null,n.push(i),h.draw(i)}})),r.addEventListener("mousemove",(function(t){h.moveTo(t.clientX,t.clientY)})),s.appendChild(r)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL2xpbmUudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL2xpbmVSZW5kZXJlci50cyJdLCJuYW1lcyI6WyJlbGVtZW50QXQiLCJ4MSIsInkxIiwieDIiLCJ5MiIsImxlbiIsIk1hdGgiLCJzcXJ0IiwicG93IiwidGhpcyIsInhCZWZvcmUiLCJ0IiwieUJlZm9yZSIsInhBZnRlciIsInlBZnRlciIsImludGVyc2VjdCIsIm90aGVyIiwic3ZnIiwic3ZnTGluZXMiLCJNYXAiLCJzdGFydFN2Z0NpcmNsZXMiLCJlbmRTdmdDaXJjbGVzIiwibGluZXMiLCJzdGFydENpcmNsZXMiLCJlbmRDaXJjbGVzIiwiaXNEcmFnZ2luZyIsImRyYWdnZWRDaXJjbGUiLCJkcmF3IiwibGluZSIsInN2Z0xpbmUiLCJzdGFydFN2Z0NpcmNsZSIsImVuZFN2Z0NpcmNsZSIsImhhcyIsImdldCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwic2V0QXR0cmlidXRlIiwic2V0IiwiYXBwZW5kQ2hpbGQiLCJ0b0ZpeGVkIiwiZHJhZyIsImNpcmNsZSIsIm1vdmVUbyIsIngiLCJ5IiwibmV3TGluZSIsIkxpbmUiLCJkcm9wIiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJsaW5lUmVuZGVyZXIiLCJMaW5lUmVuZGVyZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJlbGVtZW50RnJvbVBvaW50IiwiY2xpZW50WCIsImNsaWVudFkiLCJTVkdDaXJjbGVFbGVtZW50IiwiY29uc29sZSIsImxvZyIsInB1c2giXSwibWFwcGluZ3MiOiJtQkFBQSxJQ1lJQSxFRFpKLGFBQ0UsV0FDU0MsRUFDQUMsRUFDQUMsRUFDQUMsR0FIQSxLQUFBSCxLQUNBLEtBQUFDLEtBQ0EsS0FBQUMsS0FDQSxLQUFBQyxLQXNCWCxPQWxCRSxZQUFBQyxJQUFBLFdBQ0UsT0FBT0MsS0FBS0MsS0FB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LEVBQUssS0FDTG9CLEVBQU1zQyxLQUFLaEMsR0FDWHNCLEVBQWF2QixLQUFLQyxPQUt4QlgsRUFBSW1DLGlCQUFpQixhQUFhLFNBQUFDLEdBQ2hDSCxFQUFhUixPQUFPVyxFQUFNRSxRQUFTRixFQUFNRyxZQUczQ1IsRUFBS1YsWUFBWXJCLEkiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBMaW5lIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHgxOiBudW1iZXIsXG4gICAgcHVibGljIHkxOiBudW1iZXIsXG4gICAgcHVibGljIHgyOiBudW1iZXIsXG4gICAgcHVibGljIHkyOiBudW1iZXJcbiAgKSB7XG5cbiAgfVxuICBsZW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHRoaXMueDIgLSB0aGlzLngxLCAyKSArIE1hdGgucG93KHRoaXMueTIgLSB0aGlzLnkxLCAyKSk7XG4gIH1cbiAgeEJlZm9yZSh0OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLngxIC0gdCAqICh0aGlzLngyIC0gdGhpcy54MSkgLyB0aGlzLmxlbigpO1xuICB9XG4gIHlCZWZvcmUodDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy55MSAtIHQgKiAodGhpcy55MiAtIHRoaXMueTEpIC8gdGhpcy5sZW4oKTtcbiAgfVxuICB4QWZ0ZXIodDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy54MSArICh0aGlzLmxlbigpICsgdCkgKiAodGhpcy54MiAtIHRoaXMueDEpIC8gdGhpcy5sZW4oKTtcbiAgfVxuICB5QWZ0ZXIodDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy55MSArICh0aGlzLmxlbigpICsgdCkgKiAodGhpcy55MiAtIHRoaXMueTEpIC8gdGhpcy5sZW4oKTtcbiAgfVxuICBpbnRlcnNlY3Qob3RoZXI6IExpbmUpIHtcblxuICB9XG59IiwiaW1wb3J0IHsgTGluZSB9IGZyb20gJy4vbGluZSc7XG5pbXBvcnQgeyBMaW5lUmVuZGVyZXIgfSBmcm9tICcuL2xpbmVSZW5kZXJlcic7XG5cbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cbmNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG5cbmNvbnN0IGxpbmVzOiBMaW5lW10gPSBbXTtcbmxldCB4MTogbnVtYmVyID0gbnVsbDtcbmxldCB5MTogbnVtYmVyID0gbnVsbDtcbmNvbnN0IGxpbmVSZW5kZXJlciA9IG5ldyBMaW5lUmVuZGVyZXIoc3ZnKTtcblxubGV0IGVsZW1lbnRBdDogRWxlbWVudDtcblxuc3ZnLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGV2ZW50ID0+IHtcbiAgaWYgKFxuICAgIChlbGVtZW50QXQgPSBkb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpKSAmJlxuICAgIGVsZW1lbnRBdCBpbnN0YW5jZW9mIFNWR0NpcmNsZUVsZW1lbnRcbiAgKSB7XG4gICAgbGluZVJlbmRlcmVyLmRyYWcoZWxlbWVudEF0KTtcbiAgICBjb25zb2xlLmxvZygnQ0lSQ0xFJyk7XG4gIH1cbn0pO1xuXG5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGV2ZW50ID0+IHtcbiAgaWYgKGxpbmVSZW5kZXJlci5pc0RyYWdnaW5nKCkpIHtcbiAgICBsaW5lUmVuZGVyZXIuZHJvcCgpO1xuICB9IGVsc2Uge1xuICAgIGlmICh4MSA9PT0gbnVsbCAmJiB5MSA9PT0gbnVsbCkge1xuICAgICAgLy8gcmVjb3JkIHRtcCBwb2ludFxuICAgICAgeDEgPSBldmVudC5jbGllbnRYO1xuICAgICAgeTEgPSBldmVudC5jbGllbnRZO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBsaW5lID0gbmV3IExpbmUoeDEsIHkxLCBldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICAgIHgxID0gbnVsbDtcbiAgICAgIHkxID0gbnVsbDtcbiAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICBsaW5lUmVuZGVyZXIuZHJhdyhsaW5lKTtcbiAgICB9XG4gIH1cbn0pO1xuXG5zdmcuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZXZlbnQgPT4ge1xuICBsaW5lUmVuZGVyZXIubW92ZVRvKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xufSk7XG5cbmJvZHkuYXBwZW5kQ2hpbGQoc3ZnKTsiLCJpbXBvcnQgeyBMaW5lIH0gZnJvbSAnLi9saW5lJztcblxuXG5cbmV4cG9ydCBjbGFzcyBMaW5lUmVuZGVyZXIge1xuICBwcml2YXRlIHN2Z0xpbmVzID0gbmV3IE1hcDxMaW5lLCBTVkdMaW5lRWxlbWVudD4oKTtcbiAgcHJpdmF0ZSBzdGFydFN2Z0NpcmNsZXMgPSBuZXcgTWFwPExpbmUsIFNWR0NpcmNsZUVsZW1lbnQ+KCk7XG4gIHByaXZhdGUgZW5kU3ZnQ2lyY2xlcyA9IG5ldyBNYXA8TGluZSwgU1ZHQ2lyY2xlRWxlbWVudD4oKTtcbiAgcHJpdmF0ZSBsaW5lcyA9IG5ldyBNYXA8U1ZHTGluZUVsZW1lbnQsIExpbmU+KCk7XG4gIHByaXZhdGUgc3RhcnRDaXJjbGVzID0gbmV3IE1hcDxTVkdDaXJjbGVFbGVtZW50LCBMaW5lPigpO1xuICBwcml2YXRlIGVuZENpcmNsZXMgPSBuZXcgTWFwPFNWR0NpcmNsZUVsZW1lbnQsIExpbmU+KCk7XG4gIHByaXZhdGUgZHJhZ2dlZENpcmNsZTogU1ZHQ2lyY2xlRWxlbWVudDtcbiAgY29uc3RydWN0b3IocmVhZG9ubHkgc3ZnOiBTVkdTVkdFbGVtZW50KSB7XG5cbiAgfVxuICBpc0RyYWdnaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIXRoaXMuZHJhZ2dlZENpcmNsZTtcbiAgfVxuICBkcmF3KGxpbmU6IExpbmUpIHtcbiAgICBsZXQgc3ZnTGluZTogU1ZHTGluZUVsZW1lbnQ7XG4gICAgbGV0IHN0YXJ0U3ZnQ2lyY2xlOiBTVkdDaXJjbGVFbGVtZW50O1xuICAgIGxldCBlbmRTdmdDaXJjbGU6IFNWR0NpcmNsZUVsZW1lbnQ7XG4gICAgaWYgKCF0aGlzLnN2Z0xpbmVzLmhhcyhsaW5lKSkge1xuICAgICAgc3ZnTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xuICAgICAgc3ZnTGluZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdibGFjaycpO1xuICAgICAgdGhpcy5zdmdMaW5lcy5zZXQobGluZSwgc3ZnTGluZSk7XG4gICAgICB0aGlzLmxpbmVzLnNldChzdmdMaW5lLCBsaW5lKTtcbiAgICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHN2Z0xpbmUpO1xuICAgICAgc3RhcnRTdmdDaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xuICAgICAgc3RhcnRTdmdDaXJjbGUuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3JlZCcpO1xuICAgICAgc3RhcnRTdmdDaXJjbGUuc2V0QXR0cmlidXRlKCdyJywgJzUnKTtcbiAgICAgIHRoaXMuc3RhcnRTdmdDaXJjbGVzLnNldChsaW5lLCBzdGFydFN2Z0NpcmNsZSk7XG4gICAgICB0aGlzLnN0YXJ0Q2lyY2xlcy5zZXQoc3RhcnRTdmdDaXJjbGUsIGxpbmUpO1xuICAgICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQoc3RhcnRTdmdDaXJjbGUpO1xuICAgICAgZW5kU3ZnQ2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdjaXJjbGUnKTtcbiAgICAgIGVuZFN2Z0NpcmNsZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnYmx1ZScpO1xuICAgICAgZW5kU3ZnQ2lyY2xlLnNldEF0dHJpYnV0ZSgncicsICc1Jyk7XG4gICAgICB0aGlzLmVuZFN2Z0NpcmNsZXMuc2V0KGxpbmUsIGVuZFN2Z0NpcmNsZSk7XG4gICAgICB0aGlzLmVuZENpcmNsZXMuc2V0KGVuZFN2Z0NpcmNsZSwgbGluZSk7XG4gICAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZChlbmRTdmdDaXJjbGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdmdMaW5lID0gdGhpcy5zdmdMaW5lcy5nZXQobGluZSk7XG4gICAgICBzdGFydFN2Z0NpcmNsZSA9IHRoaXMuc3RhcnRTdmdDaXJjbGVzLmdldChsaW5lKTtcbiAgICAgIGVuZFN2Z0NpcmNsZSA9IHRoaXMuZW5kU3ZnQ2lyY2xlcy5nZXQobGluZSk7XG4gICAgfVxuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd4MScsIGxpbmUueDEudG9GaXhlZCgpKTtcbiAgICBzdmdMaW5lLnNldEF0dHJpYnV0ZSgneTEnLCBsaW5lLnkxLnRvRml4ZWQoKSk7XG4gICAgc3ZnTGluZS5zZXRBdHRyaWJ1dGUoJ3gyJywgbGluZS54Mi50b0ZpeGVkKCkpO1xuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd5MicsIGxpbmUueTIudG9GaXhlZCgpKTtcbiAgICBzdGFydFN2Z0NpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N4JywgbGluZS54QmVmb3JlKDEwKS50b0ZpeGVkKCkpO1xuICAgIHN0YXJ0U3ZnQ2lyY2xlLnNldEF0dHJpYnV0ZSgnY3knLCBsaW5lLnlCZWZvcmUoMTApLnRvRml4ZWQoKSk7XG4gICAgZW5kU3ZnQ2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCBsaW5lLnhBZnRlcigxMCkudG9GaXhlZCgpKTtcbiAgICBlbmRTdmdDaXJjbGUuc2V0QXR0cmlidXRlKCdjeScsIGxpbmUueUFmdGVyKDEwKS50b0ZpeGVkKCkpO1xuICB9XG4gIGRyYWcoY2lyY2xlOiBTVkdDaXJjbGVFbGVtZW50KTogdm9pZCB7XG4gICAgdGhpcy5kcmFnZ2VkQ2lyY2xlID0gY2lyY2xlO1xuICB9XG4gIG1vdmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLnN0YXJ0Q2lyY2xlcy5oYXModGhpcy5kcmFnZ2VkQ2lyY2xlKSkge1xuICAgICAgY29uc3QgbGluZSA9IHRoaXMuc3RhcnRDaXJjbGVzLmdldCh0aGlzLmRyYWdnZWRDaXJjbGUpO1xuICAgICAgY29uc3QgbmV3TGluZSA9IG5ldyBMaW5lKHgsIHksIGxpbmUueDIsIGxpbmUueTIpO1xuICAgICAgbGluZS54MSA9IG5ld0xpbmUueEJlZm9yZSgtMTApO1xuICAgICAgbGluZS55MSA9IG5ld0xpbmUueUJlZm9yZSgtMTApO1xuICAgICAgdGhpcy5kcmF3KGxpbmUpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5lbmRDaXJjbGVzLmhhcyh0aGlzLmRyYWdnZWRDaXJjbGUpKSB7XG4gICAgICBjb25zdCBsaW5lID0gdGhpcy5lbmRDaXJjbGVzLmdldCh0aGlzLmRyYWdnZWRDaXJjbGUpO1xuICAgICAgY29uc3QgbmV3TGluZSA9IG5ldyBMaW5lKGxpbmUueDEsIGxpbmUueTEsIHgsIHkpO1xuICAgICAgbGluZS54MiA9IG5ld0xpbmUueEFmdGVyKC0xMCk7XG4gICAgICBsaW5lLnkyID0gbmV3TGluZS55QWZ0ZXIoLTEwKTtcbiAgICAgIHRoaXMuZHJhdyhsaW5lKTtcbiAgICB9XG4gIH1cbiAgZHJvcCgpOiB2b2lkIHtcbiAgICB0aGlzLmRyYWdnZWRDaXJjbGUgPSBudWxsO1xuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==