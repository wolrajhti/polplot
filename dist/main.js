(()=>{"use strict";var t=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.dotRaw=function(t,e,n,i){return t*n+e*i},t.dot=function(t,e){return this.dotRaw(t.x,t.y,e.x,e.y)},t.prototype.dot=function(e){return t.dot(this,e)},t.crossRaw=function(t,e,n,i){return t*i-n*e},t.cross=function(t,e){return this.crossRaw(t.x,t.y,e.x,e.y)},t.prototype.cross=function(e){return t.cross(this,e)},t.len2Raw=function(t,e){return Math.pow(t,2)+Math.pow(e,2)},t.len2=function(t){return this.len2Raw(t.x,t.y)},t.prototype.len2=function(){return t.len2(this)},t.lenRaw=function(t,e){return Math.sqrt(this.len2Raw(t,e))},t.len=function(t){return this.lenRaw(t.x,t.y)},t.prototype.len=function(){return t.len(this)},t.normalizeRaw=function(t,e,n){void 0===n&&(n=1);var i=n/this.lenRaw(t,e);return this.mulRaw(t,e,i)},t.normalize=function(t,e){return void 0===e&&(e=1),this.normalizeRaw(t.x,t.y,e)},t.prototype.normalize=function(e){return void 0===e&&(e=1),t.normalize(this,e)},t.equalsRaw=function(t,e,n,i){return t===n&&e===i},t.equals=function(t,e){return this.equalsRaw(t.x,t.y,e.x,e.y)},t.prototype.equals=function(e){return t.equals(this,e)},t.addRaw=function(e,n,i,r){return new t(e+i,n+r)},t.add=function(t,e){return this.addRaw(t.x,t.y,e.x,e.y)},t.prototype.add=function(e){return t.add(this,e)},t.subRaw=function(e,n,i,r){return new t(e-i,n-r)},t.sub=function(t,e){return this.subRaw(t.x,t.y,e.x,e.y)},t.prototype.sub=function(e){return t.sub(this,e)},t.mulRaw=function(e,n,i){return new t(e*i,n*i)},t.mul=function(t,e){return this.mulRaw(t.x,t.y,e)},t.prototype.mul=function(e){return t.mul(this,e)},t.intersectionTimesRaw=function(e,n,i,r,o,s,a,u){var h=this.crossRaw(i-e,r-n,a-o,u-s);return new t(this.crossRaw(a-o,u-s,e-o,n-s)/h,this.crossRaw(i-e,r-n,e-o,n-s)/h)},t.intersectionTimes=function(t,e,n,i){return this.intersectionTimesRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersectionTimes=function(e,n,i){return t.intersectionTimes(this,e,n,i)},t.intersectionRaw=function(t,e,n,i,r,o,s,a){var u=this.intersectionTimesRaw(t,e,n,i,r,o,s,a);if(u)return u.y=e+(i-e)*u.x,u.x=t+(n-t)*u.x,u},t.intersection=function(t,e,n,i){return this.intersectionRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersection=function(e,n,i){return t.intersection(this,e,n,i)},t.prototype.angle=function(t){if(t){var e=this.angle(),n=t.angle();return n<e?n+2*Math.PI-e:n-e}return this.y>0?Math.acos(this.x/this.len()):2*Math.PI-Math.acos(this.x/this.len())},t}(),e=function(){function e(e,n,i,r){this.v1=new t(e,n),this.v2=new t(i,r)}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.v1.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.v1.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.v2.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.v2.y},enumerable:!1,configurable:!0}),e.prototype.len=function(){return this.v2.sub(this.v1).len()},e.prototype.pointAt=function(t){return this.v1.add(this.v2.sub(this.v1).mul(t))},e.prototype.before=function(t){return this.v1.add(this.v2.sub(this.v1).mul(-t/this.len()))},e.prototype.after=function(t){return this.v1.add(this.v2.sub(this.v1).mul((this.len()+t)/this.len()))},e.prototype.intersectionTimesWith=function(t){return this.v1.intersectionTimes(this.v2,t.v1,t.v2)},e.prototype.update=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.v1.x+=t,this.v1.y+=e,this.v2.x+=n,this.v2.y+=i},e.prototype.nearestTo=function(e){if(this.v1.equals(this.v2))return new t(this.v1.x,this.v1.y);var n=this.v2.sub(this.v1),i=n.dot(e.sub(this.v1))/n.len2();return this.pointAt(Math.max(0,Math.min(i,1)))},e}(),n=function(t,e){this.type=t,this.depth=e},i=function(){function t(t){void 0===t&&(t=[]),this.vertices=t}return t.prototype.areaBetween=function(t,e){return(this.vertices[e].x-this.vertices[t].x)*(this.vertices[t].y+this.vertices[e].y)/2},t.prototype.area=function(){for(var t=0,e=this.vertices.length-1,n=0;n<this.vertices.length;n++)t+=this.areaBetween(e,n),e=n;return t},t.prototype.contains=function(t){for(var e=!1,n=0,i=this.vertices.length-1;n<this.vertices.length;i=n++)this.vertices[n].y>t.y!=this.vertices[i].y>t.y&&t.x<(this.vertices[i].x-this.vertices[n].x)*(t.y-this.vertices[n].y)/(this.vertices[i].y-this.vertices[n].y)+this.vertices[n].x&&(e=!e);return e},t.prototype.reverse=function(){this.vertices.reverse()},t.prototype.toString=function(){return this.vertices.length+" points: "+this.vertices.map((function(t){return"("+t.x.toFixed()+", "+t.y.toFixed()+")"})).join(", ")+" (area: "+this.area().toFixed()+")"},t}(),r=function(){function t(t,e,n){this.coordinates=t,this.lithology=e,this.polygon=n}return t.prototype.depth=function(){return this.lithology.reduce((function(t,e){return t+e.depth}),0)},t.prototype.quantities=function(){var t=new Map;if(this.polygon){var e=this.polygon.area();this.lithology.forEach((function(n){var i=t.get(n.type)||0;t.set(n.type,i+Math.round(e*n.depth))}))}return t},t}(),o=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i},s=function(){function s(n){var r=this;this.renderer=n,this.lines=[],this.intersectionTimes=[],this.intersections=[],this.intersectionIndex=[],this.polygons=[],this.surveys=[],this.quantities=new Map,this.mode=1,document.addEventListener("keyup",(function(t){"s"===t.key?r.mode=2:"l"===t.key?(r.mode=1,r.renderer.clearSurvey()):"Escape"===t.key&&r.renderer.clearSurvey()}));var o,s,a,u,h=-1,l=-1;this.renderer.setMouseDownHandler((function(n){if(!n.button){var i=new t(n.clientX,n.clientY);1===r.mode?-1===(h=r.nearestLineIndexFrom(i,20))?(r.addLine(new e(i.x,i.y,i.x,i.y)),h=r.lines.length-1,o=r.lines[h].v2):i.sub(r.lines[h].v1).len()<20?o=r.lines[h].v1:i.sub(r.lines[h].v2).len()<20&&(o=r.lines[h].v2):2===r.mode&&-1===(l=r.nearestSurveyIndexFrom(i,20))&&(r.addSurvey(i),l=r.surveys.length-1)}})),this.renderer.setMouseUpHandler((function(t){t.button||(1===r.mode?(h=-1,o=null):2===r.mode&&(-1!==l?(s=r.surveys[l],r.renderer.drawSurvey(s)):s=null,l=-1))})),this.renderer.setMouseMoveHandler((function(e){if(!e.button){1===r.mode?o?(o.x+=e.movementX,o.y+=e.movementY,r.updateIntersectionTimes(r.lines[h]),r.renderer.drawLine(r.lines[h],h.toString())):-1!==h&&(r.lines[h].update(e.movementX,e.movementY,e.movementX,e.movementY),r.updateIntersectionTimes(r.lines[h]),r.renderer.drawLine(r.lines[h],h.toString())):2===r.mode&&-1!==l&&(r.surveys[l].coordinates.x+=e.movementX,r.surveys[l].coordinates.y+=e.movementY,r.updateSurvey(r.surveys[l]));for(var n=new t(e.clientX,e.clientY),i=!1,s=a,u=0,d=r.polygons;u<d.length;u++){var c=d[u];if(c.contains(n)){c!==a&&(r.renderer.drawPolygon(c,"red"),a=c),i=!0;break}}i||(a=null),s&&s!==a&&r.renderer.drawPolygon(s,"white")}})),this.renderer.setSidebarMouseDownHandler((function(e){if(!e.button&&s)for(var n=new t(e.offsetX,e.offsetY),r=new t(300,100),o=0,a=s.lithology;o<a.length;o++){var h=a[o],l=new i([r.add(new t(-25,0)),r.add(new t(25,0)),r.add(new t(25,h.depth)),r.add(new t(-25,h.depth))]);if(r.y+=h.depth,l.contains(n)){u=h;break}}})),this.renderer.setSidebarMouseUpHandler((function(t){t.button||(u=null)})),this.renderer.setSidebarMouseMoveHandler((function(t){t.button||u&&(u.depth+=t.movementY,r.renderer.drawSurvey(s),r.updateQuantities())})),this.renderer.lithoChangeHandler=function(){r.updateQuantities()}}return s.prototype.nearestLineIndexFrom=function(t,e){void 0===e&&(e=1/0);for(var n,i=-1,r=1/0,o=0;o<this.lines.length;o++)(n=this.lines[o].nearestTo(t).sub(t).len())<e&&n<r&&(r=n,i=o);return i},s.prototype.nearestSurveyIndexFrom=function(t,e){void 0===e&&(e=1/0);for(var n,i=-1,r=1/0,o=0;o<this.surveys.length;o++)(n=this.surveys[o].coordinates.sub(t).len())<e&&n<r&&(r=n,i=o);return i},s.prototype.addSurvey=function(t){for(var e,i=0,o=this.polygons;i<o.length;i++){var s=o[i];if(s.contains(t)){e=s;break}}var a=new r(t,[new n("non identifié",50),new n("non identifié",50),new n("non identifié",50)],e);this.surveys.push(a),this.renderer.drawPoint(t,e?(e.area()/100).toFixed(2)+" m2":""),this.updateQuantities()},s.prototype.updateSurvey=function(t){t.polygon=null;for(var e=0,n=this.polygons;e<n.length;e++){var i=n[e];if(i.contains(t.coordinates)){t.polygon=i;break}}this.renderer.drawPoint(t.coordinates,t.polygon?(t.polygon.area()/100).toFixed(2)+" m2":""),this.updateQuantities()},s.prototype.updateQuantities=function(){var t=this;this.quantities.clear(),this.surveys.forEach((function(e){e.quantities().forEach((function(e,n){console.log(e,n),t.quantities.set(n,(t.quantities.get(n)||0)+e)}))})),this.renderer.drawQuantities(this.quantities)},s.prototype.addLine=function(t){this.addIntersectionTimes(t),this.lines.push(t),this.renderer.drawLine(t,(this.lines.length-1).toString())},s.prototype.addIntersectionTimes=function(t,e,n,i,r){void 0===e&&(e=this.lines),void 0===n&&(n=this.intersectionTimes),void 0===i&&(i=this.intersections),void 0===r&&(r=this.intersectionIndex);for(var o,s=[],a=[],u=0;u<e.length;u++)o=e[u].intersectionTimesWith(t),n[u].push(o.x),i.push(e[u].pointAt(o.x)),r[u].push(i.length-1),s.push(o.y),a.push(i.length-1);s.push(NaN),a.push(null),n.push(s),r.push(a),this.renderIntersections()},s.prototype.updateIntersectionTimes=function(t,e,n,i,r){void 0===e&&(e=this.lines),void 0===n&&(n=this.intersectionTimes),void 0===i&&(i=this.intersections),void 0===r&&(r=this.intersectionIndex);for(var o,s=e.indexOf(t),a=0;a<e.length;a++)a!==s&&(o=e[a].intersectionTimesWith(t),n[a][s]=o.x,n[s][a]=o.y,a<s?i[r[a][s]]=e[a].pointAt(o.x):i[r[s][a]]=e[a].pointAt(o.x));this.renderIntersections()},s.prototype.renderIntersections=function(){var t=this;this.renderer.clearPolygons(),this.polygons=[];var e=this.buildPartialsFromIntersectionTimes();this.buildPolygonIndexesFromPartials(e).map((function(e){return new i(e.map((function(e){return t.intersections[e]})))})).forEach((function(e){e.area()>0&&(t.polygons.push(e),t.renderer.drawPolygon(e,"white"))})),this.surveys.forEach((function(e){return t.updateSurvey(e)}))},s.prototype.testSide=function(t,e,n){return e.sub(t).cross(n.sub(t))>0},s.prototype.partialsOverlaps=function(t,e){return t[t.length-2]===e[0]&&t[t.length-1]===e[1]?2:0},s.prototype.partialsMeet=function(t,e){return t[t.length-1]===e[0]?1:0},s.prototype.buildPartialsFromIntersectionIndexes=function(t,e){for(var n=[],i=0;i<e.length;i++)if("number"==typeof e[i]){var r=i+1;for(r===e.length&&(r=0);"number"!=typeof e[r];)++r===e.length&&(r=0);i!==r&&n.push([e[i],t,e[r]])}return n},s.prototype.buildPartialsFromIntersectionTimes=function(t,e,n){void 0===t&&(t=this.lines),void 0===e&&(e=this.intersectionTimes),void 0===n&&(n=this.intersectionIndex);for(var i=e.map((function(t,n){return t.map((function(t,e){return e})).filter((function(i){return!isNaN(t[i])&&0<=t[i]&&t[i]<=1&&!isNaN(e[i][n])&&0<=e[i][n]&&e[i][n]<=1})).sort((function(e,n){return t[e]-t[n]}))})),r=[],o=function(e){for(var o=0;o<i[e].length;o++){var a=i[e][o];if(e<a){var u=n[e][i[e][o]],h=o-1,l=o+1,d=i[a].findIndex((function(t){return t===e})),c=s.testSide(t[e].v1,t[e].v2,t[a].v1),p=c?d-1:d+1,v=c?d+1:d-1,y=0<o?n[e][i[e][h]]:null,f=o<i[e].length-1?n[e][i[e][l]]:null,g=-1<p&&p<i[a].length?n[a][i[a][p]]:null,w=-1<v&&v<i[a].length?n[a][i[a][v]]:null,m=s.buildPartialsFromIntersectionIndexes(u,[y,w,f,g]);r.push.apply(r,m)}}},s=this,a=0;a<i.length;a++)o(a);return r},s.prototype.buildPolygonIndexesFromPartials=function(t){for(var e,n,i=[],r=0;r<t.length;){for(var s=0;s<t.length;s++)if(r!==s&&this.partialsOverlaps(t[r],t[s])){(e=t[r]).splice.apply(e,o([-2,2],t[s])),t.splice(s,1),s<r&&r--,(n=this.partialsOverlaps(t[r],t[r])||this.partialsMeet(t[r],t[r]))>0&&(t[r].splice(0,n),i.push(t[r]),t.splice(r,1)),r=-1;break}r++}return i},s}(),a=document.createElementNS("http://www.w3.org/2000/svg","g");a.setAttribute("stroke","black"),a.setAttribute("stroke-width","0.4px");var u=document.createElementNS("http://www.w3.org/2000/svg","line");u.setAttribute("stroke-dasharray","10, 4, 1, 4");var h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttribute("d","M 0, 0 A 10, 10, 0, 0, 0, -5, -5 A 10, 10, 0, 1, 1, 5, -5 A 10, 10, 0, 0, 0, 0, 0"),h.setAttribute("fill","white");var l=document.createElementNS("http://www.w3.org/2000/svg","text");l.setAttribute("text-anchor","middle"),l.setAttribute("alignment-baseline","central"),l.setAttribute("font-family",'consolas, "Liberation Mono", courier, monospace'),l.setAttribute("font-weight","100"),l.setAttribute("font-size","14px"),a.appendChild(u),a.appendChild(h),a.appendChild(h.cloneNode()),a.appendChild(l),a.appendChild(l.cloneNode());var d=document.createElementNS("http://www.w3.org/2000/svg","g");d.setAttribute("stroke","black"),d.setAttribute("stroke-width","0.4px");var c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("fill","green"),c.setAttribute("r","3");var p=document.createElementNS("http://www.w3.org/2000/svg","text");p.setAttribute("transform","translate(0, 10)"),p.setAttribute("text-anchor","middle"),p.setAttribute("alignment-baseline","hanging"),p.setAttribute("font-family",'consolas, "Liberation Mono", courier, monospace'),p.setAttribute("font-weight","100"),p.setAttribute("font-size","14px"),p.setAttribute("font-style","italic"),d.appendChild(c),d.appendChild(p);var v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("fill","green"),v.setAttribute("fill-opacity","0.7"),v.setAttribute("stroke-width","0.8px"),v.setAttribute("stroke-dasharray","5, 2"),v.setAttribute("stroke","black");var y=document.createElementNS("http://www.w3.org/2000/svg","g");y.setAttribute("transform","translate(300, 100)");var f=document.createElementNS("http://www.w3.org/2000/svg","path");f.setAttribute("fill","url(#earth-hatch)"),f.setAttribute("stroke-width","0");var g=document.createElementNS("http://www.w3.org/2000/svg","path");g.setAttribute("fill-opacity","0"),g.setAttribute("stroke","black"),g.setAttribute("stroke-width","0.8px");var w=document.createElementNS("http://www.w3.org/2000/svg","g");y.appendChild(w),y.appendChild(f),y.appendChild(g);var m=document.createElementNS("http://www.w3.org/2000/svg","rect"),b=document.createElementNS("http://www.w3.org/2000/svg","pattern");b.id="earth-hatch",b.setAttribute("patternUnits","userSpaceOnUse"),b.setAttribute("width","25"),b.setAttribute("height","25"),b.setAttribute("stroke","#222d32"),b.setAttribute("stroke-width","0.4px");for(var x=document.createElementNS("http://www.w3.org/2000/svg","path"),A=0,C=["M-1,1 l2,-2","M-1,9 l10,-10","M-1,18 l4,-4","M-1,26 l8,-8","M7,26 l4,-4","M16,26 l10,-10","M24,26 l2,-2","M14,3 l4,-4","M18,7 l8,-8","M22,11 l4,-4","M2,11 l13,13","M6,7 l13,13","M10,3 l13,13"];A<C.length;A++){var M=C[A];x.setAttribute("d",M),b.appendChild(x),x=x.cloneNode()}var S=document.createElement("select");S.style.position="absolute",S.style.transform="translateY(-49%)",S.style.left="24px";for(var N=document.createElement("option"),F=["non identifié","argile","calcaire"],E=new Map([[F[0],"#fde312"],[F[1],"#289fde"],[F[2],"#abfe12"]]),P=0,L=F;P<L.length;P++){var I=L[P];N.innerHTML=I,N.setAttribute("value",I),S.appendChild(N),N=N.cloneNode()}var R=document.createElement("p");R.style.borderLeftWidth="14px",R.style.fontFamily='consolas, "Liberation Mono", courier, monospace',R.style.fontWeight="100",R.style.fontSize="14px",R.style.height="14px",R.style.paddingLeft="8px",new s(new(function(){function t(){this.selectContainer=document.createElement("div"),this.pointContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.polygonContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.lineContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.surveyContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svgGByLine=new Map,this.svgPathByPolygon=new Map,this.svgGByPoint=new Map,this.handlers={},this.svg=document.querySelector(".content"),this.sidebarDiv=document.querySelector(".sidebar"),this.sidebarSvg=document.querySelector(".sidebar > svg"),this.svg.appendChild(b),this.svg.appendChild(this.polygonContainer),this.svg.appendChild(this.lineContainer),this.svg.appendChild(this.pointContainer),this.quantitiesContainer=document.querySelector(".quantities.container"),this.sidebarSvg.appendChild(this.surveyContainer),this.sidebarDiv.appendChild(this.selectContainer)}return t.prototype._setEventHandler=function(t,e,n){this.handlers[e]&&t.removeEventListener(e,this.handlers[e]),this.handlers[e]=n,t.addEventListener(e,this.handlers[e])},t.prototype.setMouseDownHandler=function(t){this._setEventHandler(this.svg,"mousedown",t)},t.prototype.setMouseUpHandler=function(t){this._setEventHandler(this.svg,"mouseup",t)},t.prototype.setMouseMoveHandler=function(t){this._setEventHandler(this.svg,"mousemove",t)},t.prototype.setSidebarMouseDownHandler=function(t){this._setEventHandler(this.sidebarSvg,"mousedown",t)},t.prototype.setSidebarMouseUpHandler=function(t){this._setEventHandler(this.sidebarSvg,"mouseup",t)},t.prototype.setSidebarMouseMoveHandler=function(t){this._setEventHandler(this.sidebarSvg,"mousemove",t)},t.prototype.drawLine=function(t,e){var n;this.svgGByLine.has(t)?n=this.svgGByLine.get(t):(n=a.cloneNode(!0),this.lineContainer.appendChild(n),this.svgGByLine.set(t,n));var i=n.children[0],r=n.children[1],o=n.children[2],s=n.children[3],u=n.children[4],h=t.x1.toFixed(),l=t.y1.toFixed(),d=t.x2.toFixed(),c=t.y2.toFixed();i.setAttribute("x1",h),i.setAttribute("y1",l),i.setAttribute("x2",d),i.setAttribute("y2",c),s.innerHTML=e,u.innerHTML=e;var p=180*(t.v2.sub(t.v1).angle()-Math.PI/2)/Math.PI,v=t.before(14),y=t.after(14);r.setAttribute("transform","translate("+h+", "+l+") rotate("+(isNaN(p)?0:p)+")"),o.setAttribute("transform","translate("+d+", "+c+") rotate("+(isNaN(p)?0:180+p)+")"),s.setAttribute("transform","translate("+(isNaN(v.x)?h:v.x.toFixed())+", "+(isNaN(v.y)?l:v.y.toFixed())+")"),u.setAttribute("transform","translate("+(isNaN(y.x)?d:y.x.toFixed())+", "+(isNaN(y.y)?c:y.y.toFixed())+")")},t.prototype.eraseLine=function(t){var e=this.svgGByLine.get(t);e&&(this.lineContainer.removeChild(e),this.svgGByLine.delete(t))},t.prototype.drawPoint=function(t,e){var n;this.svgGByPoint.has(t)?n=this.svgGByPoint.get(t):(n=d.cloneNode(!0),this.pointContainer.appendChild(n),this.svgGByPoint.set(t,n));var i=n.children[1];n.setAttribute("transform","translate("+t.x.toFixed()+", "+t.y.toFixed()+")"),i.innerHTML=e},t.prototype.clearContainer=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},t.prototype.clearIntersections=function(){this.clearContainer(this.pointContainer)},t.prototype.drawPolygon=function(t,e){var n;void 0===e&&(e="#"+(Math.floor(16677215*Math.random())+1e5).toString(16)),this.svgPathByPolygon.has(t)?n=this.svgPathByPolygon.get(t):(n=v.cloneNode(),this.polygonContainer.appendChild(n),this.svgPathByPolygon.set(t,n)),n.setAttribute("d","M "+t.vertices.map((function(t){return t.x.toFixed()+" "+t.y.toFixed()})).join(" L ")+" Z"),n.setAttribute("fill",e)},t.prototype.clearPolygons=function(){this.clearContainer(this.polygonContainer)},t.prototype.drawSurvey=function(t){var e=this;this.clearContainer(this.surveyContainer),this.clearContainer(this.selectContainer);var n="M "+(-100).toFixed()+", 0 h "+75..toFixed()+" v "+t.depth().toFixed()+" h "+50..toFixed()+" v "+-t.depth().toFixed()+" h "+75..toFixed(),i=n+" v "+10..toFixed()+" h "+(-65).toFixed()+" v "+t.depth().toFixed()+" h "+(-70).toFixed()+" v "+-t.depth().toFixed()+" h "+(-65).toFixed()+" Z",r=y.cloneNode(!0),o=r.children[0],s=r.children[1],a=r.children[2];s.setAttribute("d",i),a.setAttribute("d",n);for(var u=0,h=function(n){var i=m.cloneNode();i.setAttribute("x",(-25).toFixed()),i.setAttribute("y",u.toFixed()),i.setAttribute("width",50..toFixed()),i.setAttribute("height",t.lithology[n].depth.toFixed()),i.setAttribute("fill",E.get(t.lithology[n].type)),o.appendChild(i);var r=S.cloneNode(!0);r.querySelector('option[value="'+t.lithology[n].type+'"]').setAttribute("selected","selected"),r.addEventListener("change",(function(o){t.lithology[n].type=r.value,i.setAttribute("fill",E.get(r.value)),e.lithoChangeHandler()})),r.style.top=(u+100+t.lithology[n].depth/2).toFixed()+"px",l.selectContainer.appendChild(r),u+=t.lithology[n].depth},l=this,d=0;d<t.lithology.length;d++)h(d);this.surveyContainer.appendChild(r),this.sidebarDiv.classList.add("visible")},t.prototype.clearSurvey=function(){this.sidebarDiv.classList.remove("visible"),this.clearContainer(this.surveyContainer),this.clearContainer(this.selectContainer)},t.prototype.drawQuantities=function(t){var e=this;this.clearContainer(this.quantitiesContainer),t.forEach((function(t,n){var i=R.cloneNode();i.innerHTML=n+" ("+(t/5e3).toFixed(2)+" m³)",i.style.borderLeft="8px solid "+E.get(n),e.quantitiesContainer.appendChild(i)}))},t}()))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3ZlY3RvcjIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9saW5lLnRzIiwid2VicGFjazovL3BvbHBsb3QvLi9zcmMvbGl0aG9sb2dpY2FsLWxheWVyLnRzIiwid2VicGFjazovL3BvbHBsb3QvLi9zcmMvcG9seWdvbi50cyIsIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3N1cnZleS50cyIsIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3BvbHBsb3QudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9zdmctcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJ4IiwieSIsImRvdFJhdyIsIngxIiwieTEiLCJ4MiIsInkyIiwiZG90IiwidSIsInYiLCJ0aGlzIiwib3RoZXIiLCJWZWN0b3IyIiwiY3Jvc3NSYXciLCJjcm9zcyIsImxlbjJSYXciLCJNYXRoIiwicG93IiwibGVuMiIsImxlblJhdyIsInNxcnQiLCJsZW4iLCJub3JtYWxpemVSYXciLCJieSIsImNvZWYiLCJtdWxSYXciLCJub3JtYWxpemUiLCJlcXVhbHNSYXciLCJlcXVhbHMiLCJhZGRSYXciLCJhZGQiLCJzdWJSYXciLCJzdWIiLCJtdWwiLCJpbnRlcnNlY3Rpb25UaW1lc1JhdyIsImZ4IiwiZnkiLCJ0eCIsInR5Iiwic3giLCJzeSIsImV4IiwiZXkiLCJkZXQiLCJpbnRlcnNlY3Rpb25UaW1lcyIsImZyb20iLCJ0byIsInN0YXJ0IiwiZW5kIiwiaW50ZXJzZWN0aW9uUmF3IiwidGltZXMiLCJpbnRlcnNlY3Rpb24iLCJhbmdsZSIsImExIiwiYTIiLCJQSSIsImFjb3MiLCJ2MSIsInYyIiwicG9pbnRBdCIsInQiLCJiZWZvcmUiLCJhZnRlciIsImludGVyc2VjdGlvblRpbWVzV2l0aCIsInVwZGF0ZSIsImR4MSIsImR5MSIsImR4MiIsImR5MiIsIm5lYXJlc3RUbyIsInAiLCJtYXgiLCJtaW4iLCJ0eXBlIiwiZGVwdGgiLCJ2ZXJ0aWNlcyIsImFyZWFCZXR3ZWVuIiwiaSIsImoiLCJhcmVhIiwiYSIsImxlbmd0aCIsImNvbnRhaW5zIiwiYyIsInJldmVyc2UiLCJ0b1N0cmluZyIsIm1hcCIsInRvRml4ZWQiLCJqb2luIiwiY29vcmRpbmF0ZXMiLCJsaXRob2xvZ3kiLCJwb2x5Z29uIiwicmVkdWNlIiwibGF5ZXIiLCJxdWFudGl0aWVzIiwiTWFwIiwiZm9yRWFjaCIsImxpdGhvbG9naWNhbExheWVyIiwicXVhbnRpdHkiLCJnZXQiLCJzZXQiLCJyb3VuZCIsInJlbmRlcmVyIiwibGluZXMiLCJpbnRlcnNlY3Rpb25zIiwiaW50ZXJzZWN0aW9uSW5kZXgiLCJwb2x5Z29ucyIsInN1cnZleXMiLCJtb2RlIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJrZXkiLCJjbGVhclN1cnZleSIsImRyYWdnZWRWZWN0b3IyIiwiYWN0aXZlU3VydmV5IiwicG9seWdvbkNvbnRhaW5lciIsImRyYWdnZWRMaXRob2xvZ3lMYXllciIsImRyYWdnZWRMaW5lSW5kZXgiLCJkcmFnZ2VkU3VydmV5SW5kZXgiLCJzZXRNb3VzZURvd25IYW5kbGVyIiwiYnV0dG9uIiwibW91c2UiLCJjbGllbnRYIiwiY2xpZW50WSIsIm5lYXJlc3RMaW5lSW5kZXhGcm9tIiwiYWRkTGluZSIsIkxpbmUiLCJuZWFyZXN0U3VydmV5SW5kZXhGcm9tIiwiYWRkU3VydmV5Iiwic2V0TW91c2VVcEhhbmRsZXIiLCJkcmF3U3VydmV5Iiwic2V0TW91c2VNb3ZlSGFuZGxlciIsIm1vdmVtZW50WCIsIm1vdmVtZW50WSIsInVwZGF0ZUludGVyc2VjdGlvblRpbWVzIiwiZHJhd0xpbmUiLCJ1cGRhdGVTdXJ2ZXkiLCJpc0luc2lkZSIsIm9sZFBvbHlnb25Db250YWluZXIiLCJkcmF3UG9seWdvbiIsInNldFNpZGViYXJNb3VzZURvd25IYW5kbGVyIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJvZmZzZXQiLCJQb2x5Z29uIiwic2V0U2lkZWJhck1vdXNlVXBIYW5kbGVyIiwic2V0U2lkZWJhck1vdXNlTW92ZUhhbmRsZXIiLCJ1cGRhdGVRdWFudGl0aWVzIiwibGl0aG9DaGFuZ2VIYW5kbGVyIiwidGhyZXNob2xkIiwiZGlzdCIsIm5lYXJlc3RMaW5lSW5kZXgiLCJuZWFyZXN0RGlzdCIsIm5lYXJlc3RTdXJ2ZXlJbmRleCIsImNvbnRhaW5lciIsInN1cnZleSIsIlN1cnZleSIsIkxpdGhvbG9naWNhbExheWVyIiwicHVzaCIsImRyYXdQb2ludCIsImNsZWFyIiwiY29uc29sZSIsImxvZyIsImRyYXdRdWFudGl0aWVzIiwibGluZSIsImFkZEludGVyc2VjdGlvblRpbWVzIiwibmV3SW50ZXJzZWN0aW9uVGltZXMiLCJuZXdJbnRlcnNlY3Rpb25JbmRleCIsIk5hTiIsInJlbmRlckludGVyc2VjdGlvbnMiLCJpbmRleCIsImluZGV4T2YiLCJjbGVhclBvbHlnb25zIiwicGFydGlhbHMiLCJidWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvblRpbWVzIiwiYnVpbGRQb2x5Z29uSW5kZXhlc0Zyb21QYXJ0aWFscyIsInBvbHlnb25JbmRleCIsInRlc3RTaWRlIiwidyIsInBhcnRpYWxzT3ZlcmxhcHMiLCJwMSIsInAyIiwicGFydGlhbHNNZWV0IiwiYnVpbGRQYXJ0aWFsc0Zyb21JbnRlcnNlY3Rpb25JbmRleGVzIiwiY2VudGVyIiwiaW5kZXhlcyIsInBhcnRzIiwiaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5IiwiaW50ZXJzZWN0aW9uVGltZXNBdEkiLCJfIiwiZmlsdGVyIiwiaXNOYU4iLCJzb3J0IiwibG9jYWxJbmRleCIsImxvY2FsSW50ZXJJbmRleCIsImZvcmVpZ25JbmRleCIsImludGVyIiwicHJldkxvY2FsSW50ZXJJbmRleCIsIm5leHRMb2NhbEludGVySW5kZXgiLCJmb3JlaWduSW50ZXJJbmRleCIsImZpbmRJbmRleCIsImZvcmVpZ25pc1JpZ2h0U2lkZWQiLCJwcmV2Rm9yZWlnbkludGVySW5kZXgiLCJuZXh0Rm9yZWlnbkludGVySW5kZXgiLCJwcmV2TG9jYWxJbnRlciIsIm5leHRMb2NhbEludGVyIiwicHJldkZvcmVpZ25JbnRlciIsIm5leHRGb3JlaWduSW50ZXIiLCJvdmVybGFwIiwicG9seWdvbkluZGV4ZXMiLCJzcGxpY2UiLCJnVGVtcGxhdGUiLCJjcmVhdGVFbGVtZW50TlMiLCJzZXRBdHRyaWJ1dGUiLCJsaW5lVGVtcGxhdGUiLCJhbmNob3JUZW1wbGF0ZSIsInRleHRUZW1wbGF0ZSIsImFwcGVuZENoaWxkIiwiY2xvbmVOb2RlIiwiZ1BvaW50VGVtcGxhdGUiLCJwb2ludFRlbXBsYXRlIiwidGV4dFBvaW50VGVtcGxhdGUiLCJwb2x5Z29uVGVtcGxhdGUiLCJnU3VydmV5VGVtcGxhdGUiLCJzdXJ2ZXlCb3R0b21Qb2x5Z29uVGVtcGxhdGUiLCJzdXJ2ZXlUb3BQb2x5Z29uVGVtcGxhdGUiLCJzdXJ2ZXlMaXRob2xvZ3lUZW1wbGF0ZSIsImxpdGhvbG9naWNhbExheWVyUmVjdFRlbXBsYXRlIiwiaGF0Y2hQYXR0ZXJuIiwiaWQiLCJoYXRjaFBhdGgiLCJkIiwic2VsZWN0VGVtcGxhdGUiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJwb3NpdGlvbiIsInRyYW5zZm9ybSIsImxlZnQiLCJvcHRpb25UZW1wbGF0ZSIsInZhbHVlcyIsImNvbG9ycyIsInZhbHVlIiwiaW5uZXJIVE1MIiwicFRlbXBsYXRlIiwiYm9yZGVyTGVmdFdpZHRoIiwiZm9udEZhbWlseSIsImZvbnRXZWlnaHQiLCJmb250U2l6ZSIsImhlaWdodCIsInBhZGRpbmdMZWZ0IiwiUG9scGxvdCIsInNlbGVjdENvbnRhaW5lciIsInBvaW50Q29udGFpbmVyIiwibGluZUNvbnRhaW5lciIsInN1cnZleUNvbnRhaW5lciIsInN2Z0dCeUxpbmUiLCJzdmdQYXRoQnlQb2x5Z29uIiwic3ZnR0J5UG9pbnQiLCJoYW5kbGVycyIsInN2ZyIsInF1ZXJ5U2VsZWN0b3IiLCJzaWRlYmFyRGl2Iiwic2lkZWJhclN2ZyIsInF1YW50aXRpZXNDb250YWluZXIiLCJfc2V0RXZlbnRIYW5kbGVyIiwiaGFuZGxlciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJuYW1lIiwic3ZnRyIsImhhcyIsInN2Z0xpbmUiLCJjaGlsZHJlbiIsInN2Z1BhdGhBbmNob3JTdGFydCIsInN2Z1BhdGhBbmNob3JFbmQiLCJzdmdUZXh0U3RhcnQiLCJzdmdUZXh0RW5kIiwiZXJhc2VMaW5lIiwicmVtb3ZlQ2hpbGQiLCJkZWxldGUiLCJwb2ludCIsInN2Z1RleHQiLCJjbGVhckNvbnRhaW5lciIsImZpcnN0Q2hpbGQiLCJjbGVhckludGVyc2VjdGlvbnMiLCJmaWxsIiwic3ZnUGF0aCIsImZsb29yIiwicmFuZG9tIiwiZEJvdHRvbSIsImJvdHRvbVBvbHlnb24iLCJ0b3BQb2x5Z29uIiwidG9wIiwic2VsZWN0IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYm9yZGVyTGVmdCJdLCJtYXBwaW5ncyI6Im1CQUFBLGlCQUNFLFdBQW1CQSxFQUFjQyxRQUFkLElBQUFELE1BQUEsUUFBYyxJQUFBQyxNQUFBLEdBQWQsS0FBQUQsSUFBYyxLQUFBQyxJQXFJbkMsT0FwSVMsRUFBQUMsT0FBUCxTQUFjQyxFQUFZQyxFQUFZQyxFQUFZQyxHQUNoRCxPQUFPSCxFQUFLRSxFQUFLRCxFQUFLRSxHQUVqQixFQUFBQyxJQUFQLFNBQVdDLEVBQVlDLEdBQ3JCLE9BQU9DLEtBQUtSLE9BQU9NLEVBQUVSLEVBQUdRLEVBQUVQLEVBQUdRLEVBQUVULEVBQUdTLEVBQUVSLElBRXRDLFlBQUFNLElBQUEsU0FBSUksR0FDRixPQUFPQyxFQUFRTCxJQUFJRyxLQUFNQyxJQUVwQixFQUFBRSxTQUFQLFNBQWdCVixFQUFZQyxFQUFZQyxFQUFZQyxHQUNsRCxPQUFPSCxFQUFLRyxFQUFLRCxFQUFLRCxHQUVqQixFQUFBVSxNQUFQLFNBQWFOLEVBQVlDLEdBQ3ZCLE9BQU9DLEtBQUtHLFNBQVNMLEVBQUVSLEVBQUdRLEVBQUVQLEVBQUdRLEVBQUVULEVBQUdTLEVBQUVSLElBRXhDLFlBQUFhLE1B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aWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWZWN0b3IyIHtcbiAgY29uc3RydWN0b3IocHVibGljIHggPSAwLCBwdWJsaWMgeSA9IDApIHt9XG4gIHN0YXRpYyBkb3RSYXcoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHgxICogeDIgKyB5MSAqIHkyO1xuICB9XG4gIHN0YXRpYyBkb3QodTogVmVjdG9yMiwgdjogVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZG90UmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgZG90KG90aGVyOiBWZWN0b3IyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5kb3QodGhpcywgb3RoZXIpO1xuICB9XG4gIHN0YXRpYyBjcm9zc1Jhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4geDEgKiB5MiAtIHgyICogeTE7XG4gIH1cbiAgc3RhdGljIGNyb3NzKHU6IFZlY3RvcjIsIHY6IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNyb3NzUmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgY3Jvc3Mob3RoZXI6IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIHJldHVybiBWZWN0b3IyLmNyb3NzKHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgbGVuMlJhdyh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGgucG93KHgsIDIpICsgTWF0aC5wb3coeSwgMik7XG4gIH1cbiAgc3RhdGljIGxlbjIodTogVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubGVuMlJhdyh1LngsIHUueSk7XG4gIH1cbiAgbGVuMigpOiBudW1iZXIge1xuICAgIHJldHVybiBWZWN0b3IyLmxlbjIodGhpcyk7XG4gIH1cbiAgc3RhdGljIGxlblJhdyh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLmxlbjJSYXcoeCwgeSkpO1xuICB9XG4gIHN0YXRpYyBsZW4odTogVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubGVuUmF3KHUueCwgdS55KTtcbiAgfVxuICBsZW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5sZW4odGhpcyk7XG4gIH1cbiAgc3RhdGljIG5vcm1hbGl6ZVJhdyh4OiBudW1iZXIsIHk6IG51bWJlciwgYnk6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcbiAgICBjb25zdCBjb2VmID0gYnkgLyB0aGlzLmxlblJhdyh4LCB5KTtcbiAgICByZXR1cm4gdGhpcy5tdWxSYXcoeCwgeSwgY29lZik7XG4gIH1cbiAgc3RhdGljIG5vcm1hbGl6ZSh1OiBWZWN0b3IyLCBieTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZVJhdyh1LngsIHUueSwgYnkpO1xuICB9XG4gIG5vcm1hbGl6ZShieTogbnVtYmVyID0gMSk6IFZlY3RvcjIge1xuICAgIHJldHVybiBWZWN0b3IyLm5vcm1hbGl6ZSh0aGlzLCBieSk7XG4gIH1cbiAgc3RhdGljIGVxdWFsc1Jhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHgxID09PSB4MiAmJiB5MSA9PT0geTI7XG4gIH1cbiAgc3RhdGljIGVxdWFscyh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuZXF1YWxzUmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgZXF1YWxzKG90aGVyOiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIFZlY3RvcjIuZXF1YWxzKHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgYWRkUmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoeDEgKyB4MiwgeTEgKyB5Mik7XG4gIH1cbiAgc3RhdGljIGFkZCh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuYWRkUmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgYWRkKG90aGVyOiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIFZlY3RvcjIuYWRkKHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgc3ViUmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoeDEgLSB4MiwgeTEgLSB5Mik7XG4gIH1cbiAgc3RhdGljIHN1Yih1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc3ViUmF3KHUueCwgdS55LCB2LngsIHYueSk7XG4gIH1cbiAgc3ViKG90aGVyOiBWZWN0b3IyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIFZlY3RvcjIuc3ViKHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgbXVsUmF3KHg6IG51bWJlciwgeTogbnVtYmVyLCBieTogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHggKiBieSwgeSAqIGJ5KTtcbiAgfVxuICBzdGF0aWMgbXVsKHU6IFZlY3RvcjIsIGJ5OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5tdWxSYXcodS54LCB1LnksIGJ5KTtcbiAgfVxuICBtdWwoYnk6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiBWZWN0b3IyLm11bCh0aGlzLCBieSk7XG4gIH1cbiAgc3RhdGljIGludGVyc2VjdGlvblRpbWVzUmF3KFxuICAgIGZ4OiBudW1iZXIsIGZ5OiBudW1iZXIsIHR4OiBudW1iZXIsIHR5OiBudW1iZXIsXG4gICAgc3g6IG51bWJlciwgc3k6IG51bWJlciwgZXg6IG51bWJlciwgZXk6IG51bWJlclxuICApOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBkZXQgPSB0aGlzLmNyb3NzUmF3KHR4IC0gZngsIHR5IC0gZnksIGV4IC0gc3gsIGV5IC0gc3kpO1xuICAgIHJldHVybiBuZXcgVmVjdG9yMihcbiAgICAgIHRoaXMuY3Jvc3NSYXcoZXggLSBzeCwgZXkgLSBzeSwgZnggLSBzeCwgZnkgLSBzeSkgLyBkZXQsXG4gICAgICB0aGlzLmNyb3NzUmF3KHR4IC0gZngsIHR5IC0gZnksIGZ4IC0gc3gsIGZ5IC0gc3kpIC8gZGV0XG4gICAgKTtcbiAgfVxuICBzdGF0aWMgaW50ZXJzZWN0aW9uVGltZXMoXG4gICAgZnJvbTogVmVjdG9yMiwgdG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjJcbiAgKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJzZWN0aW9uVGltZXNSYXcoZnJvbS54LCBmcm9tLnksIHRvLngsIHRvLnksIHN0YXJ0LngsIHN0YXJ0LnksIGVuZC54LCBlbmQueSk7XG4gIH1cbiAgaW50ZXJzZWN0aW9uVGltZXModG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjIpOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gVmVjdG9yMi5pbnRlcnNlY3Rpb25UaW1lcyh0aGlzLCB0bywgc3RhcnQsIGVuZCk7XG4gIH1cbiAgc3RhdGljIGludGVyc2VjdGlvblJhdyhcbiAgICBmeDogbnVtYmVyLCBmeTogbnVtYmVyLCB0eDogbnVtYmVyLCB0eTogbnVtYmVyLFxuICAgIHN4OiBudW1iZXIsIHN5OiBudW1iZXIsIGV4OiBudW1iZXIsIGV5OiBudW1iZXJcbiAgKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgdGltZXMgPSB0aGlzLmludGVyc2VjdGlvblRpbWVzUmF3KGZ4LCBmeSwgdHgsIHR5LCBzeCwgc3ksIGV4LCBleSk7XG4gICAgaWYgKHRpbWVzKSB7XG4gICAgICB0aW1lcy55ID0gZnkgKyAodHkgLSBmeSkgKiB0aW1lcy54O1xuICAgICAgdGltZXMueCA9IGZ4ICsgKHR4IC0gZngpICogdGltZXMueDtcbiAgICAgIHJldHVybiB0aW1lcztcbiAgICB9XG4gIH1cbiAgc3RhdGljIGludGVyc2VjdGlvbihmcm9tOiBWZWN0b3IyLCB0bzogVmVjdG9yMiwgc3RhcnQ6IFZlY3RvcjIsIGVuZDogVmVjdG9yMik6IFZlY3RvcjIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmludGVyc2VjdGlvblJhdyhmcm9tLngsIGZyb20ueSwgdG8ueCwgdG8ueSwgc3RhcnQueCwgc3RhcnQueSwgZW5kLngsIGVuZC55KTtcbiAgfVxuICBpbnRlcnNlY3Rpb24odG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjIpOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gVmVjdG9yMi5pbnRlcnNlY3Rpb24odGhpcywgdG8sIHN0YXJ0LCBlbmQpO1xuICB9XG4gIGFuZ2xlKG90aGVyPzogVmVjdG9yMik6IG51bWJlciB7XG4gICAgaWYgKG90aGVyKSB7XG4gICAgICAgY29uc3QgYTEgPSB0aGlzLmFuZ2xlKCk7XG4gICAgICAgY29uc3QgYTIgPSBvdGhlci5hbmdsZSgpO1xuICAgICAgIGlmIChhMiA8IGExKSB7XG4gICAgICAgIHJldHVybiBhMiArIDIgKiBNYXRoLlBJIC0gYTE7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGEyIC0gYTE7XG4gICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy55ID4gMCkge1xuICAgICAgcmV0dXJuIE1hdGguYWNvcyh0aGlzLnggLyB0aGlzLmxlbigpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDIgKiBNYXRoLlBJIC0gTWF0aC5hY29zKHRoaXMueCAvIHRoaXMubGVuKCkpO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XG5cbmV4cG9ydCBjbGFzcyBMaW5lIHtcbiAgdjE6IFZlY3RvcjI7XG4gIHYyOiBWZWN0b3IyO1xuICBjb25zdHJ1Y3RvcihcbiAgICB4MT86IG51bWJlcixcbiAgICB5MT86IG51bWJlcixcbiAgICB4Mj86IG51bWJlcixcbiAgICB5Mj86IG51bWJlclxuICApIHtcbiAgICB0aGlzLnYxID0gbmV3IFZlY3RvcjIoeDEsIHkxKTtcbiAgICB0aGlzLnYyID0gbmV3IFZlY3RvcjIoeDIsIHkyKTtcbiAgfVxuICBnZXQgeDEoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52MS54O1xuICB9XG4gIGdldCB5MSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnYxLnk7XG4gIH1cbiAgZ2V0IHgyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudjIueDtcbiAgfVxuICBnZXQgeTIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52Mi55O1xuICB9XG4gIGxlbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnYyLnN1Yih0aGlzLnYxKS5sZW4oKTtcbiAgfVxuICBwb2ludEF0KHQ6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLnYxLmFkZCh0aGlzLnYyLnN1Yih0aGlzLnYxKS5tdWwodCkpO1xuICB9XG4gIGJlZm9yZSh0OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy52MS5hZGQodGhpcy52Mi5zdWIodGhpcy52MSkubXVsKC10IC8gdGhpcy5sZW4oKSkpO1xuICB9XG4gIGFmdGVyKHQ6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLnYxLmFkZCh0aGlzLnYyLnN1Yih0aGlzLnYxKS5tdWwoKHRoaXMubGVuKCkgKyB0KSAvIHRoaXMubGVuKCkpKTtcbiAgfVxuICBpbnRlcnNlY3Rpb25UaW1lc1dpdGgob3RoZXI6IExpbmUpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy52MS5pbnRlcnNlY3Rpb25UaW1lcyh0aGlzLnYyLCBvdGhlci52MSwgb3RoZXIudjIpO1xuICB9XG4gIHVwZGF0ZShkeDEgPSAwLCBkeTEgPSAwLCBkeDIgPSAwLCBkeTIgPSAwKTogdm9pZCB7XG4gICAgdGhpcy52MS54ICs9IGR4MTtcbiAgICB0aGlzLnYxLnkgKz0gZHkxO1xuICAgIHRoaXMudjIueCArPSBkeDI7XG4gICAgdGhpcy52Mi55ICs9IGR5MjtcbiAgfVxuICBuZWFyZXN0VG8ocDogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIGlmICh0aGlzLnYxLmVxdWFscyh0aGlzLnYyKSkge1xuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKHRoaXMudjEueCwgdGhpcy52MS55KTtcbiAgICB9XG4gICAgY29uc3QgdSA9IHRoaXMudjIuc3ViKHRoaXMudjEpO1xuICAgIGNvbnN0IHQgPSB1LmRvdChwLnN1Yih0aGlzLnYxKSkgLyB1LmxlbjIoKTtcbiAgICByZXR1cm4gdGhpcy5wb2ludEF0KE1hdGgubWF4KDAsIE1hdGgubWluKHQsIDEpKSk7XG4gIH1cbn0iLCJleHBvcnQgY2xhc3MgTGl0aG9sb2dpY2FsTGF5ZXIge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgdHlwZTogc3RyaW5nLFxuICAgIHB1YmxpYyBkZXB0aDogbnVtYmVyLFxuICApIHtcblxuICB9XG59IiwiaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuL2xpbmVcIjtcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XG5cbmV4cG9ydCBjbGFzcyBQb2x5Z29uIHtcbiAgY29uc3RydWN0b3IocmVhZG9ubHkgdmVydGljZXM6IFZlY3RvcjJbXSA9IFtdKSB7XG5cbiAgfVxuICBwcml2YXRlIGFyZWFCZXR3ZWVuKGk6IG51bWJlciwgajogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMudmVydGljZXNbal0ueCAtIHRoaXMudmVydGljZXNbaV0ueCkgKiAodGhpcy52ZXJ0aWNlc1tpXS55ICsgdGhpcy52ZXJ0aWNlc1tqXS55KSAvIDI7XG4gIH1cbiAgYXJlYSgpOiBudW1iZXIge1xuICAgIGxldCBhID0gMDtcbiAgICBsZXQgaSA9IHRoaXMudmVydGljZXMubGVuZ3RoIC0gMTtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGEgKz0gdGhpcy5hcmVhQmV0d2VlbihpLCBqKTtcbiAgICAgIGkgPSBqO1xuICAgIH1cbiAgICByZXR1cm4gYTtcbiAgfVxuICBjb250YWlucyh2OiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgbGV0IGMgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IHRoaXMudmVydGljZXMubGVuZ3RoIC0gMTsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBqID0gaSsrKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMudmVydGljZXNbaV0ueSA+IHYueSAhPT0gdGhpcy52ZXJ0aWNlc1tqXS55ID4gdi55ICYmXG4gICAgICAgIHYueCA8ICh0aGlzLnZlcnRpY2VzW2pdLnggLSB0aGlzLnZlcnRpY2VzW2ldLngpICogKHYueSAtIHRoaXMudmVydGljZXNbaV0ueSkgLyAodGhpcy52ZXJ0aWNlc1tqXS55IC0gdGhpcy52ZXJ0aWNlc1tpXS55KSArIHRoaXMudmVydGljZXNbaV0ueFxuICAgICAgKSB7XG4gICAgICAgIGMgPSAhYztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGM7XG4gIH1cbiAgcmV2ZXJzZSgpOiB2b2lkIHtcbiAgICB0aGlzLnZlcnRpY2VzLnJldmVyc2UoKTtcbiAgfVxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLnZlcnRpY2VzLmxlbmd0aH0gcG9pbnRzOiBgICsgdGhpcy52ZXJ0aWNlcy5tYXAodiA9PiBgKCR7di54LnRvRml4ZWQoKX0sICR7di55LnRvRml4ZWQoKX0pYCkuam9pbignLCAnKSArIGAgKGFyZWE6ICR7dGhpcy5hcmVhKCkudG9GaXhlZCgpfSlgO1xuICB9XG59IiwiaW1wb3J0IHsgTGl0aG9sb2dpY2FsTGF5ZXIgfSBmcm9tIFwiLi9saXRob2xvZ2ljYWwtbGF5ZXJcIjtcbmltcG9ydCB7IFBvbHlnb24gfSBmcm9tIFwiLi9wb2x5Z29uXCI7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xuXG5leHBvcnQgY2xhc3MgU3VydmV5IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGNvb3JkaW5hdGVzOiBWZWN0b3IyLFxuICAgIHB1YmxpYyBsaXRob2xvZ3k6IExpdGhvbG9naWNhbExheWVyW10sXG4gICAgcHVibGljIHBvbHlnb246IFBvbHlnb24sXG4gICkge1xuXG4gIH1cbiAgZGVwdGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5saXRob2xvZ3kucmVkdWNlKChkZXB0aCwgbGF5ZXIpID0+IGRlcHRoICsgbGF5ZXIuZGVwdGgsIDApO1xuICB9XG4gIHF1YW50aXRpZXMoKTogTWFwPHN0cmluZywgbnVtYmVyPiB7XG4gICAgY29uc3QgcXVhbnRpdGllcyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXI+KCk7XG4gICAgaWYgKHRoaXMucG9seWdvbikge1xuICAgICAgY29uc3QgYXJlYSA9IHRoaXMucG9seWdvbi5hcmVhKCk7XG4gICAgICB0aGlzLmxpdGhvbG9neS5mb3JFYWNoKGxpdGhvbG9naWNhbExheWVyID0+IHtcbiAgICAgICAgbGV0IHF1YW50aXR5ID0gcXVhbnRpdGllcy5nZXQobGl0aG9sb2dpY2FsTGF5ZXIudHlwZSkgfHwgMDtcbiAgICAgICAgcXVhbnRpdGllcy5zZXQobGl0aG9sb2dpY2FsTGF5ZXIudHlwZSwgcXVhbnRpdHkgKyBNYXRoLnJvdW5kKGFyZWEgKiBsaXRob2xvZ2ljYWxMYXllci5kZXB0aCkpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBxdWFudGl0aWVzO1xuICB9XG59IiwiaW1wb3J0IHsgUG9scGxvdFJlbmRlcmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9wb2xwbG90LXJlbmRlcmVyXCI7XG5pbXBvcnQgeyBMaW5lIH0gZnJvbSBcIi4vbGluZVwiO1xuaW1wb3J0IHsgTGl0aG9sb2dpY2FsTGF5ZXIgfSBmcm9tIFwiLi9saXRob2xvZ2ljYWwtbGF5ZXJcIjtcbmltcG9ydCB7IFBvbHlnb24gfSBmcm9tIFwiLi9wb2x5Z29uXCI7XG5pbXBvcnQgeyBTdXJ2ZXkgfSBmcm9tIFwiLi9zdXJ2ZXlcIjtcbmltcG9ydCB7IFZlY3RvcjIgfSBmcm9tIFwiLi92ZWN0b3IyXCI7XG5cbmNvbnN0IENMSUNLX1RIUkVTSE9MRCA9IDIwO1xuXG5jb25zdCBlbnVtIE1vZGVzIHtcbiAgUG9seWdvbixcbiAgTGluZSxcbiAgU3VydmV5XG59XG5cbmV4cG9ydCBjbGFzcyBQb2xwbG90IHtcbiAgbGluZXM6IExpbmVbXSA9IFtdO1xuICBpbnRlcnNlY3Rpb25UaW1lczogbnVtYmVyW11bXSA9IFtdO1xuICBpbnRlcnNlY3Rpb25zOiBWZWN0b3IyW10gPSBbXTtcbiAgaW50ZXJzZWN0aW9uSW5kZXg6IG51bWJlcltdW10gPSBbXTtcbiAgcG9seWdvbnM6IFBvbHlnb25bXSA9IFtdO1xuICBzdXJ2ZXlzOiBTdXJ2ZXlbXSA9IFtdO1xuICBxdWFudGl0aWVzID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcbiAgbW9kZSA9IE1vZGVzLkxpbmU7XG4gIGNvbnN0cnVjdG9yKHJlYWRvbmx5IHJlbmRlcmVyOiBQb2xwbG90UmVuZGVyZXIpIHtcbiAgICAvLyByZW1vdmUgbmV4dCBoYWNreSBldmVudExpc3RlbmVyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQua2V5ID09PSAncycpIHtcbiAgICAgICAgdGhpcy5tb2RlID0gTW9kZXMuU3VydmV5O1xuICAgICAgfSBlbHNlIGlmIChldmVudC5rZXkgPT09ICdsJykge1xuICAgICAgICB0aGlzLm1vZGUgPSBNb2Rlcy5MaW5lO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmNsZWFyU3VydmV5KCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5jbGVhclN1cnZleSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IGRyYWdnZWRMaW5lSW5kZXggPSAtMTtcbiAgICBsZXQgZHJhZ2dlZFZlY3RvcjI6IFZlY3RvcjI7XG4gICAgbGV0IGRyYWdnZWRTdXJ2ZXlJbmRleCA9IC0xO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0TW91c2VEb3duSGFuZGxlcihldmVudCA9PiB7XG4gICAgICAvLyByZXR1cm4gaWYgY2xpY2sgaXMgbm90IGZyb20gbW91c2UgbGVmdCBidXR0b25cbiAgICAgIGlmIChldmVudC5idXR0b24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgbW91c2UgPSBuZXcgVmVjdG9yMihldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09IE1vZGVzLkxpbmUpIHtcbiAgICAgICAgZHJhZ2dlZExpbmVJbmRleCA9IHRoaXMubmVhcmVzdExpbmVJbmRleEZyb20obW91c2UsIENMSUNLX1RIUkVTSE9MRCk7XG4gICAgICAgIGlmIChkcmFnZ2VkTGluZUluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuYWRkTGluZShuZXcgTGluZShtb3VzZS54LCBtb3VzZS55LCBtb3VzZS54LCBtb3VzZS55KSk7XG4gICAgICAgICAgZHJhZ2dlZExpbmVJbmRleCA9IHRoaXMubGluZXMubGVuZ3RoIC0gMTtcbiAgICAgICAgICBkcmFnZ2VkVmVjdG9yMiA9IHRoaXMubGluZXNbZHJhZ2dlZExpbmVJbmRleF0udjI7XG4gICAgICAgIH0gZWxzZSBpZiAobW91c2Uuc3ViKHRoaXMubGluZXNbZHJhZ2dlZExpbmVJbmRleF0udjEpLmxlbigpIDwgQ0xJQ0tfVEhSRVNIT0xEKSB7XG4gICAgICAgICAgZHJhZ2dlZFZlY3RvcjIgPSB0aGlzLmxpbmVzW2RyYWdnZWRMaW5lSW5kZXhdLnYxO1xuICAgICAgICB9IGVsc2UgaWYgKG1vdXNlLnN1Yih0aGlzLmxpbmVzW2RyYWdnZWRMaW5lSW5kZXhdLnYyKS5sZW4oKSA8IENMSUNLX1RIUkVTSE9MRCkge1xuICAgICAgICAgIGRyYWdnZWRWZWN0b3IyID0gdGhpcy5saW5lc1tkcmFnZ2VkTGluZUluZGV4XS52MjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09IE1vZGVzLlN1cnZleSkge1xuICAgICAgICBkcmFnZ2VkU3VydmV5SW5kZXggPSB0aGlzLm5lYXJlc3RTdXJ2ZXlJbmRleEZyb20obW91c2UsIENMSUNLX1RIUkVTSE9MRCk7XG4gICAgICAgIGlmIChkcmFnZ2VkU3VydmV5SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5hZGRTdXJ2ZXkobW91c2UpO1xuICAgICAgICAgIGRyYWdnZWRTdXJ2ZXlJbmRleCA9IHRoaXMuc3VydmV5cy5sZW5ndGggLSAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsZXQgYWN0aXZlU3VydmV5OiBTdXJ2ZXk7XG4gICAgdGhpcy5yZW5kZXJlci5zZXRNb3VzZVVwSGFuZGxlcihldmVudCA9PiB7XG4gICAgICAvLyByZXR1cm4gaWYgY2xpY2sgaXMgbm90IGZyb20gbW91c2UgbGVmdCBidXR0b25cbiAgICAgIGlmIChldmVudC5idXR0b24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kZSA9PT0gTW9kZXMuTGluZSkge1xuICAgICAgICBkcmFnZ2VkTGluZUluZGV4ID0gLTE7XG4gICAgICAgIGRyYWdnZWRWZWN0b3IyID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSBNb2Rlcy5TdXJ2ZXkpIHtcbiAgICAgICAgaWYgKGRyYWdnZWRTdXJ2ZXlJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICBhY3RpdmVTdXJ2ZXkgPSB0aGlzLnN1cnZleXNbZHJhZ2dlZFN1cnZleUluZGV4XTtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdTdXJ2ZXkoYWN0aXZlU3VydmV5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhY3RpdmVTdXJ2ZXkgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGRyYWdnZWRTdXJ2ZXlJbmRleCA9IC0xO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IHBvbHlnb25Db250YWluZXI6IFBvbHlnb247XG4gICAgdGhpcy5yZW5kZXJlci5zZXRNb3VzZU1vdmVIYW5kbGVyKGV2ZW50ID0+IHtcbiAgICAgIC8vIHJldHVybiBpZiBjbGljayBpcyBub3QgZnJvbSBtb3VzZSBsZWZ0IGJ1dHRvblxuICAgICAgaWYgKGV2ZW50LmJ1dHRvbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RlID09PSBNb2Rlcy5MaW5lKSB7XG4gICAgICAgIGlmIChkcmFnZ2VkVmVjdG9yMikge1xuICAgICAgICAgIGRyYWdnZWRWZWN0b3IyLnggKz0gZXZlbnQubW92ZW1lbnRYO1xuICAgICAgICAgIGRyYWdnZWRWZWN0b3IyLnkgKz0gZXZlbnQubW92ZW1lbnRZO1xuICAgICAgICAgIHRoaXMudXBkYXRlSW50ZXJzZWN0aW9uVGltZXModGhpcy5saW5lc1tkcmFnZ2VkTGluZUluZGV4XSk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZSh0aGlzLmxpbmVzW2RyYWdnZWRMaW5lSW5kZXhdLCBkcmFnZ2VkTGluZUluZGV4LnRvU3RyaW5nKCkpO1xuICAgICAgICB9IGVsc2UgaWYgKGRyYWdnZWRMaW5lSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5saW5lc1tkcmFnZ2VkTGluZUluZGV4XS51cGRhdGUoZXZlbnQubW92ZW1lbnRYLCBldmVudC5tb3ZlbWVudFksIGV2ZW50Lm1vdmVtZW50WCwgZXZlbnQubW92ZW1lbnRZKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUludGVyc2VjdGlvblRpbWVzKHRoaXMubGluZXNbZHJhZ2dlZExpbmVJbmRleF0pO1xuICAgICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUodGhpcy5saW5lc1tkcmFnZ2VkTGluZUluZGV4XSwgZHJhZ2dlZExpbmVJbmRleC50b1N0cmluZygpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm1vZGUgPT09IE1vZGVzLlN1cnZleSkge1xuICAgICAgICBpZiAoZHJhZ2dlZFN1cnZleUluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIHRoaXMuc3VydmV5c1tkcmFnZ2VkU3VydmV5SW5kZXhdLmNvb3JkaW5hdGVzLnggKz0gZXZlbnQubW92ZW1lbnRYO1xuICAgICAgICAgIHRoaXMuc3VydmV5c1tkcmFnZ2VkU3VydmV5SW5kZXhdLmNvb3JkaW5hdGVzLnkgKz0gZXZlbnQubW92ZW1lbnRZO1xuICAgICAgICAgIHRoaXMudXBkYXRlU3VydmV5KHRoaXMuc3VydmV5c1tkcmFnZ2VkU3VydmV5SW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gVE9ETzogc2hvdWxkIGJlIGluIGEgZnVuY3Rpb25cbiAgICAgIGNvbnN0IG1vdXNlID0gbmV3IFZlY3RvcjIoZXZlbnQuY2xpZW50WCwgZXZlbnQuY2xpZW50WSk7XG4gICAgICBsZXQgaXNJbnNpZGUgPSBmYWxzZTtcbiAgICAgIGxldCBvbGRQb2x5Z29uQ29udGFpbmVyID0gcG9seWdvbkNvbnRhaW5lcjtcbiAgICAgIGZvciAoY29uc3QgcG9seWdvbiBvZiB0aGlzLnBvbHlnb25zKSB7XG4gICAgICAgIGlmIChwb2x5Z29uLmNvbnRhaW5zKG1vdXNlKSkge1xuICAgICAgICAgIGlmIChwb2x5Z29uICE9PSBwb2x5Z29uQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdQb2x5Z29uKHBvbHlnb24sICdyZWQnKTtcbiAgICAgICAgICAgIHBvbHlnb25Db250YWluZXIgPSBwb2x5Z29uO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpc0luc2lkZSA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghaXNJbnNpZGUpIHtcbiAgICAgICAgcG9seWdvbkNvbnRhaW5lciA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAob2xkUG9seWdvbkNvbnRhaW5lciAmJiBvbGRQb2x5Z29uQ29udGFpbmVyICE9PSBwb2x5Z29uQ29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd1BvbHlnb24ob2xkUG9seWdvbkNvbnRhaW5lciwgJ3doaXRlJyk7XG4gICAgICB9XG4gICAgfSk7XG5cblxuICAgIGxldCBkcmFnZ2VkTGl0aG9sb2d5TGF5ZXI6IExpdGhvbG9naWNhbExheWVyO1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U2lkZWJhck1vdXNlRG93bkhhbmRsZXIoZXZlbnQgPT4ge1xuICAgICAgaWYgKGV2ZW50LmJ1dHRvbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoYWN0aXZlU3VydmV5KSB7XG4gICAgICAgIGNvbnN0IG1vdXNlID0gbmV3IFZlY3RvcjIoZXZlbnQub2Zmc2V0WCwgZXZlbnQub2Zmc2V0WSk7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IG5ldyBWZWN0b3IyKDMwMCwgMTAwKTtcbiAgICAgICAgZm9yIChjb25zdCBsaXRob2xvZ2ljYWxMYXllciBvZiBhY3RpdmVTdXJ2ZXkubGl0aG9sb2d5KSB7XG4gICAgICAgICAgY29uc3QgcG9seWdvbiA9IG5ldyBQb2x5Z29uKFtcbiAgICAgICAgICAgIG9mZnNldC5hZGQobmV3IFZlY3RvcjIoLTI1LCAwKSksXG4gICAgICAgICAgICBvZmZzZXQuYWRkKG5ldyBWZWN0b3IyKDI1LCAwKSksXG4gICAgICAgICAgICBvZmZzZXQuYWRkKG5ldyBWZWN0b3IyKDI1LCBsaXRob2xvZ2ljYWxMYXllci5kZXB0aCkpLFxuICAgICAgICAgICAgb2Zmc2V0LmFkZChuZXcgVmVjdG9yMigtMjUsIGxpdGhvbG9naWNhbExheWVyLmRlcHRoKSksXG4gICAgICAgICAgXSk7XG4gICAgICAgICAgb2Zmc2V0LnkgKz0gbGl0aG9sb2dpY2FsTGF5ZXIuZGVwdGg7XG4gICAgICAgICAgaWYgKHBvbHlnb24uY29udGFpbnMobW91c2UpKSB7XG4gICAgICAgICAgICBkcmFnZ2VkTGl0aG9sb2d5TGF5ZXIgPSBsaXRob2xvZ2ljYWxMYXllcjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5yZW5kZXJlci5zZXRTaWRlYmFyTW91c2VVcEhhbmRsZXIoZXZlbnQgPT4ge1xuICAgICAgaWYgKGV2ZW50LmJ1dHRvbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkcmFnZ2VkTGl0aG9sb2d5TGF5ZXIgPSBudWxsO1xuICAgIH0pO1xuXG4gICAgdGhpcy5yZW5kZXJlci5zZXRTaWRlYmFyTW91c2VNb3ZlSGFuZGxlcihldmVudCA9PiB7XG4gICAgICBpZiAoZXZlbnQuYnV0dG9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChkcmFnZ2VkTGl0aG9sb2d5TGF5ZXIpIHtcbiAgICAgICAgZHJhZ2dlZExpdGhvbG9neUxheWVyLmRlcHRoICs9IGV2ZW50Lm1vdmVtZW50WTtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3U3VydmV5KGFjdGl2ZVN1cnZleSk7XG4gICAgICAgIHRoaXMudXBkYXRlUXVhbnRpdGllcygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5yZW5kZXJlci5saXRob0NoYW5nZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVF1YW50aXRpZXMoKTtcbiAgICB9O1xuICB9XG4gIG5lYXJlc3RMaW5lSW5kZXhGcm9tKHY6IFZlY3RvcjIsIHRocmVzaG9sZCA9ICtJbmZpbml0eSk6IG51bWJlciB7XG4gICAgbGV0IG5lYXJlc3RMaW5lSW5kZXggPSAtMTtcbiAgICBsZXQgbmVhcmVzdERpc3QgPSArSW5maW5pdHk7XG4gICAgbGV0IGRpc3Q6IG51bWJlcjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRpc3QgPSB0aGlzLmxpbmVzW2ldLm5lYXJlc3RUbyh2KS5zdWIodikubGVuKCk7XG4gICAgICBpZiAoZGlzdCA8IHRocmVzaG9sZCAmJiBkaXN0IDwgbmVhcmVzdERpc3QpIHtcbiAgICAgICAgbmVhcmVzdERpc3QgPSBkaXN0O1xuICAgICAgICBuZWFyZXN0TGluZUluZGV4ID0gaTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5lYXJlc3RMaW5lSW5kZXg7XG4gIH1cbiAgbmVhcmVzdFN1cnZleUluZGV4RnJvbSh2OiBWZWN0b3IyLCB0aHJlc2hvbGQgPSArSW5maW5pdHkpOiBudW1iZXIge1xuICAgIGxldCBuZWFyZXN0U3VydmV5SW5kZXggPSAtMTtcbiAgICBsZXQgbmVhcmVzdERpc3QgPSArSW5maW5pdHk7XG4gICAgbGV0IGRpc3Q6IG51bWJlcjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc3VydmV5cy5sZW5ndGg7IGkrKykge1xuICAgICAgZGlzdCA9IHRoaXMuc3VydmV5c1tpXS5jb29yZGluYXRlcy5zdWIodikubGVuKCk7XG4gICAgICBpZiAoZGlzdCA8IHRocmVzaG9sZCAmJiBkaXN0IDwgbmVhcmVzdERpc3QpIHtcbiAgICAgICAgbmVhcmVzdERpc3QgPSBkaXN0O1xuICAgICAgICBuZWFyZXN0U3VydmV5SW5kZXggPSBpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmVhcmVzdFN1cnZleUluZGV4O1xuICB9XG4gIGFkZFN1cnZleShjb29yZGluYXRlczogVmVjdG9yMik6IHZvaWQge1xuICAgIGxldCBjb250YWluZXI6IFBvbHlnb247XG4gICAgZm9yIChjb25zdCBwb2x5Z29uIG9mIHRoaXMucG9seWdvbnMpIHtcbiAgICAgIGlmIChwb2x5Z29uLmNvbnRhaW5zKGNvb3JkaW5hdGVzKSkge1xuICAgICAgICBjb250YWluZXIgPSBwb2x5Z29uO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc3VydmV5ID0gbmV3IFN1cnZleShjb29yZGluYXRlcywgW1xuICAgICAgbmV3IExpdGhvbG9naWNhbExheWVyKCdub24gaWRlbnRpZmnDqScsIDUwKSxcbiAgICAgIG5ldyBMaXRob2xvZ2ljYWxMYXllcignbm9uIGlkZW50aWZpw6knLCA1MCksXG4gICAgICBuZXcgTGl0aG9sb2dpY2FsTGF5ZXIoJ25vbiBpZGVudGlmacOpJywgNTApLFxuICAgIF0sIGNvbnRhaW5lcik7XG4gICAgdGhpcy5zdXJ2ZXlzLnB1c2goc3VydmV5KTtcbiAgICB0aGlzLnJlbmRlcmVyLmRyYXdQb2ludChjb29yZGluYXRlcywgY29udGFpbmVyID8gKGNvbnRhaW5lci5hcmVhKCkgLyAoMTAgKiAxMCkpLnRvRml4ZWQoMikgKyAnIG0yJyA6ICcnKTtcbiAgICB0aGlzLnVwZGF0ZVF1YW50aXRpZXMoKTtcbiAgfVxuICAvLyBUT0RPOiBjbGVhbnVwIGFkZCB1cGRhdGUgcmVuZGVyIGFuZCBvdGhlciB3ZWlyZCBmdW5jdGlvbnNcbiAgdXBkYXRlU3VydmV5KHN1cnZleTogU3VydmV5KTogdm9pZCB7XG4gICAgc3VydmV5LnBvbHlnb24gPSBudWxsO1xuICAgIGZvciAoY29uc3QgcG9seWdvbiBvZiB0aGlzLnBvbHlnb25zKSB7XG4gICAgICBpZiAocG9seWdvbi5jb250YWlucyhzdXJ2ZXkuY29vcmRpbmF0ZXMpKSB7XG4gICAgICAgIHN1cnZleS5wb2x5Z29uID0gcG9seWdvbjtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucmVuZGVyZXIuZHJhd1BvaW50KHN1cnZleS5jb29yZGluYXRlcywgc3VydmV5LnBvbHlnb24gPyAoc3VydmV5LnBvbHlnb24uYXJlYSgpIC8gKDEwICogMTApKS50b0ZpeGVkKDIpICsgJyBtMicgOiAnJyk7XG4gICAgdGhpcy51cGRhdGVRdWFudGl0aWVzKCk7XG4gIH1cbiAgdXBkYXRlUXVhbnRpdGllcygpOiB2b2lkIHtcbiAgICB0aGlzLnF1YW50aXRpZXMuY2xlYXIoKTtcbiAgICB0aGlzLnN1cnZleXMuZm9yRWFjaChzdXJ2ZXkgPT4ge1xuICAgICAgc3VydmV5LnF1YW50aXRpZXMoKS5mb3JFYWNoKChxdWFudGl0eSwgdHlwZSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhxdWFudGl0eSwgdHlwZSk7XG4gICAgICAgIHRoaXMucXVhbnRpdGllcy5zZXQodHlwZSwgKHRoaXMucXVhbnRpdGllcy5nZXQodHlwZSkgfHwgMCkgKyBxdWFudGl0eSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICB0aGlzLnJlbmRlcmVyLmRyYXdRdWFudGl0aWVzKHRoaXMucXVhbnRpdGllcyk7XG4gIH1cbiAgYWRkTGluZShsaW5lOiBMaW5lKTogdm9pZCB7XG4gICAgdGhpcy5hZGRJbnRlcnNlY3Rpb25UaW1lcyhsaW5lKTtcbiAgICB0aGlzLmxpbmVzLnB1c2gobGluZSk7XG4gICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShsaW5lLCAodGhpcy5saW5lcy5sZW5ndGggLSAxKS50b1N0cmluZygpKTtcbiAgfVxuICBhZGRJbnRlcnNlY3Rpb25UaW1lcyhcbiAgICBsaW5lOiBMaW5lLFxuICAgIGxpbmVzID0gdGhpcy5saW5lcyxcbiAgICBpbnRlcnNlY3Rpb25UaW1lcyA9IHRoaXMuaW50ZXJzZWN0aW9uVGltZXMsXG4gICAgaW50ZXJzZWN0aW9ucyA9IHRoaXMuaW50ZXJzZWN0aW9ucyxcbiAgICBpbnRlcnNlY3Rpb25JbmRleCA9IHRoaXMuaW50ZXJzZWN0aW9uSW5kZXgsXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IG5ld0ludGVyc2VjdGlvblRpbWVzOiBudW1iZXJbXSA9IFtdO1xuICAgIGNvbnN0IG5ld0ludGVyc2VjdGlvbkluZGV4OiBudW1iZXJbXSA9IFtdO1xuICAgIGxldCB0aW1lczogVmVjdG9yMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aW1lcyA9IGxpbmVzW2ldLmludGVyc2VjdGlvblRpbWVzV2l0aChsaW5lKTtcbiAgICAgIGludGVyc2VjdGlvblRpbWVzW2ldLnB1c2godGltZXMueCk7XG4gICAgICBpbnRlcnNlY3Rpb25zLnB1c2gobGluZXNbaV0ucG9pbnRBdCh0aW1lcy54KSk7XG4gICAgICBpbnRlcnNlY3Rpb25JbmRleFtpXS5wdXNoKGludGVyc2VjdGlvbnMubGVuZ3RoIC0gMSk7XG4gICAgICBuZXdJbnRlcnNlY3Rpb25UaW1lcy5wdXNoKHRpbWVzLnkpO1xuICAgICAgbmV3SW50ZXJzZWN0aW9uSW5kZXgucHVzaChpbnRlcnNlY3Rpb25zLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBuZXdJbnRlcnNlY3Rpb25UaW1lcy5wdXNoKE5hTik7XG4gICAgbmV3SW50ZXJzZWN0aW9uSW5kZXgucHVzaChudWxsKTtcbiAgICBpbnRlcnNlY3Rpb25UaW1lcy5wdXNoKG5ld0ludGVyc2VjdGlvblRpbWVzKTtcbiAgICBpbnRlcnNlY3Rpb25JbmRleC5wdXNoKG5ld0ludGVyc2VjdGlvbkluZGV4KTtcbiAgICB0aGlzLnJlbmRlckludGVyc2VjdGlvbnMoKTtcbiAgfVxuICB1cGRhdGVJbnRlcnNlY3Rpb25UaW1lcyhcbiAgICBsaW5lOiBMaW5lLFxuICAgIGxpbmVzID0gdGhpcy5saW5lcyxcbiAgICBpbnRlcnNlY3Rpb25UaW1lcyA9IHRoaXMuaW50ZXJzZWN0aW9uVGltZXMsXG4gICAgaW50ZXJzZWN0aW9ucyA9IHRoaXMuaW50ZXJzZWN0aW9ucyxcbiAgICBpbnRlcnNlY3Rpb25JbmRleCA9IHRoaXMuaW50ZXJzZWN0aW9uSW5kZXgsXG4gICk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gbGluZXMuaW5kZXhPZihsaW5lKTtcbiAgICBsZXQgdGltZXM6IFZlY3RvcjI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgIT09IGluZGV4KSB7XG4gICAgICAgIHRpbWVzID0gbGluZXNbaV0uaW50ZXJzZWN0aW9uVGltZXNXaXRoKGxpbmUpO1xuICAgICAgICBpbnRlcnNlY3Rpb25UaW1lc1tpXVtpbmRleF0gPSB0aW1lcy54O1xuICAgICAgICBpbnRlcnNlY3Rpb25UaW1lc1tpbmRleF1baV0gPSB0aW1lcy55O1xuICAgICAgICBpZiAoaSA8IGluZGV4KSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW9uc1tpbnRlcnNlY3Rpb25JbmRleFtpXVtpbmRleF1dID0gbGluZXNbaV0ucG9pbnRBdCh0aW1lcy54KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbnRlcnNlY3Rpb25zW2ludGVyc2VjdGlvbkluZGV4W2luZGV4XVtpXV0gPSBsaW5lc1tpXS5wb2ludEF0KHRpbWVzLngpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucmVuZGVySW50ZXJzZWN0aW9ucygpO1xuICB9XG4gIHJlbmRlckludGVyc2VjdGlvbnMoKTogdm9pZCB7XG4gICAgLy8gdGhpcy5yZW5kZXJlci5jbGVhckludGVyc2VjdGlvbnMoKTtcbiAgICAvLyB0aGlzLmludGVyc2VjdGlvbnMuZm9yRWFjaChpbnRlcnNlY3Rpb24gPT4ge1xuICAgIC8vICAgdGhpcy5yZW5kZXJlci5kcmF3UG9pbnQoaW50ZXJzZWN0aW9uKTtcbiAgICAvLyB9KTtcbiAgICB0aGlzLnJlbmRlcmVyLmNsZWFyUG9seWdvbnMoKTtcbiAgICB0aGlzLnBvbHlnb25zID0gW107XG4gICAgY29uc3QgcGFydGlhbHMgPSB0aGlzLmJ1aWxkUGFydGlhbHNGcm9tSW50ZXJzZWN0aW9uVGltZXMoKTtcbiAgICBjb25zdCBwb2x5Z29uSW5kZXhlcyA9IHRoaXMuYnVpbGRQb2x5Z29uSW5kZXhlc0Zyb21QYXJ0aWFscyhwYXJ0aWFscyk7XG4gICAgY29uc3QgcG9seWdvbnMgPSBwb2x5Z29uSW5kZXhlcy5tYXAocG9seWdvbkluZGV4ID0+IG5ldyBQb2x5Z29uKHBvbHlnb25JbmRleC5tYXAoaSA9PiB0aGlzLmludGVyc2VjdGlvbnNbaV0pKSk7XG4gICAgcG9seWdvbnMuZm9yRWFjaChwb2x5Z29uID0+IHtcbiAgICAgIGlmIChwb2x5Z29uLmFyZWEoKSA+IDApIHtcbiAgICAgICAgdGhpcy5wb2x5Z29ucy5wdXNoKHBvbHlnb24pO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdQb2x5Z29uKHBvbHlnb24sICd3aGl0ZScpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuc3VydmV5cy5mb3JFYWNoKHN1cnZleSA9PiB0aGlzLnVwZGF0ZVN1cnZleShzdXJ2ZXkpKTtcbiAgfVxuICB0ZXN0U2lkZSh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyLCB3OiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHYuc3ViKHUpLmNyb3NzKHcuc3ViKHUpKSA+IDA7XG4gIH1cbiAgcGFydGlhbHNPdmVybGFwcyhwMTogbnVtYmVyW10sIHAyOiBudW1iZXJbXSk6IDIgfCAwIHtcbiAgICByZXR1cm4gcDFbcDEubGVuZ3RoIC0gMl0gPT09IHAyWzBdICYmIHAxW3AxLmxlbmd0aCAtIDFdID09PSBwMlsxXSA/IDIgOiAwO1xuICB9XG4gIHBhcnRpYWxzTWVldChwMTogbnVtYmVyW10sIHAyOiBudW1iZXJbXSk6IDEgfCAwIHtcbiAgICByZXR1cm4gcDFbcDEubGVuZ3RoIC0gMV0gPT09IHAyWzBdID8gMSA6IDA7XG4gIH1cbiAgYnVpbGRQYXJ0aWFsc0Zyb21JbnRlcnNlY3Rpb25JbmRleGVzKFxuICAgIGNlbnRlcjogbnVtYmVyLFxuICAgIGluZGV4ZXM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICApOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1bXSB7XG4gICAgY29uc3QgcGFydHM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodHlwZW9mIGluZGV4ZXNbaV0gPT09ICdudW1iZXInKSB7XG4gICAgICAgIGxldCBqID0gaSArIDE7XG4gICAgICAgIGlmIChqID09PSBpbmRleGVzLmxlbmd0aCkge1xuICAgICAgICAgIGogPSAwO1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0eXBlb2YgaW5kZXhlc1tqXSAhPT0gJ251bWJlcicpwqB7XG4gICAgICAgICAgaisrO1xuICAgICAgICAgIGlmIChqID09PSBpbmRleGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpICE9PSBqKSB7XG4gICAgICAgICAgcGFydHMucHVzaChbaW5kZXhlc1tpXSwgY2VudGVyLCBpbmRleGVzW2pdXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzO1xuICB9XG4gIGJ1aWxkUGFydGlhbHNGcm9tSW50ZXJzZWN0aW9uVGltZXMoXG4gICAgbGluZXMgPSB0aGlzLmxpbmVzLFxuICAgIGludGVyc2VjdGlvblRpbWVzID0gdGhpcy5pbnRlcnNlY3Rpb25UaW1lcyxcbiAgICBpbnRlcnNlY3Rpb25JbmRleCA9IHRoaXMuaW50ZXJzZWN0aW9uSW5kZXhcbiAgKTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdW10ge1xuICAgIC8vIGNvbnNvbGUubG9nKCdidWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvblRpbWVzJyk7XG4gICAgLy8gY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAvLyBjb25zb2xlLmxvZygnbGluZXMubGVuZ3RoID0gJywgbGluZXMubGVuZ3RoKTtcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXkgPSBpbnRlcnNlY3Rpb25UaW1lc1xuICAgICAgLm1hcCgoaW50ZXJzZWN0aW9uVGltZXNBdEksIGkpID0+IHtcbiAgICAgICAgcmV0dXJuIGludGVyc2VjdGlvblRpbWVzQXRJXG4gICAgICAgICAgLm1hcCgoXywgaikgPT4gailcbiAgICAgICAgICAuZmlsdGVyKGogPT4ge1xuICAgICAgICAgICAgcmV0dXJuICFpc05hTihpbnRlcnNlY3Rpb25UaW1lc0F0SVtqXSkgJiYgMCA8PSBpbnRlcnNlY3Rpb25UaW1lc0F0SVtqXSAmJiBpbnRlcnNlY3Rpb25UaW1lc0F0SVtqXSA8PSAxICYmXG4gICAgICAgICAgICAgICFpc05hTihpbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSkgJiYgMCA8PSBpbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSAmJiBpbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSA8PSAxO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnNvcnQoKGksIGopID0+IGludGVyc2VjdGlvblRpbWVzQXRJW2ldIC0gaW50ZXJzZWN0aW9uVGltZXNBdElbal0pO1xuICAgICAgfSk7XG4gICAgLy8gY29uc29sZS5sb2coaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5KTtcbiAgICBjb25zdCBwYXJ0aWFsczogW251bWJlciwgbnVtYmVyLCBudW1iZXJdW10gPSBbXTtcbiAgICBmb3IgKGxldCBsb2NhbEluZGV4ID0gMDsgbG9jYWxJbmRleCA8IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheS5sZW5ndGg7IGxvY2FsSW5kZXgrKykge1xuICAgICAgZm9yIChsZXQgbG9jYWxJbnRlckluZGV4ID0gMDsgbG9jYWxJbnRlckluZGV4IDwgaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2xvY2FsSW5kZXhdLmxlbmd0aDsgbG9jYWxJbnRlckluZGV4KyspIHtcbiAgICAgICAgY29uc3QgZm9yZWlnbkluZGV4ID0gaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2xvY2FsSW5kZXhdW2xvY2FsSW50ZXJJbmRleF07XG4gICAgICAgIGlmIChsb2NhbEluZGV4IDwgZm9yZWlnbkluZGV4KSB7XG4gICAgICAgICAgY29uc3QgaW50ZXIgPSBpbnRlcnNlY3Rpb25JbmRleFtsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bbG9jYWxJbnRlckluZGV4XV07XG5cbiAgICAgICAgICBjb25zdCBwcmV2TG9jYWxJbnRlckluZGV4ID0gbG9jYWxJbnRlckluZGV4IC0gMTtcbiAgICAgICAgICBjb25zdCBuZXh0TG9jYWxJbnRlckluZGV4ID0gbG9jYWxJbnRlckluZGV4ICsgMTtcblxuICAgICAgICAgIGNvbnN0IGZvcmVpZ25JbnRlckluZGV4ID0gaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF0uZmluZEluZGV4KGkgPT4gaSA9PT0gbG9jYWxJbmRleCk7XG4gICAgICAgICAgY29uc3QgZm9yZWlnbmlzUmlnaHRTaWRlZCA9IHRoaXMudGVzdFNpZGUobGluZXNbbG9jYWxJbmRleF0udjEsIGxpbmVzW2xvY2FsSW5kZXhdLnYyLCBsaW5lc1tmb3JlaWduSW5kZXhdLnYxKTtcbiAgICAgICAgICBjb25zdCBwcmV2Rm9yZWlnbkludGVySW5kZXggPSBmb3JlaWduaXNSaWdodFNpZGVkID8gZm9yZWlnbkludGVySW5kZXggLSAxIDogZm9yZWlnbkludGVySW5kZXggKyAxO1xuICAgICAgICAgIGNvbnN0IG5leHRGb3JlaWduSW50ZXJJbmRleCA9IGZvcmVpZ25pc1JpZ2h0U2lkZWQgPyBmb3JlaWduSW50ZXJJbmRleCArIDEgOiBmb3JlaWduSW50ZXJJbmRleCAtIDE7XG5cbiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgXG4gICAgICAgICAgLy8gICBsb2NhbEluZGV4OiAke2xvY2FsSW5kZXh9XG4gICAgICAgICAgLy8gICBsb2NhbEludGVyc2VjdGlvbnMgJHtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1cbiAgICAgICAgICAvLyAgICAgLm1hcCgoXywgaSkgPT4gaSA9PT0gbG9jYWxJbnRlckluZGV4ID8gYFske199XWAgOiBfKVxuICAgICAgICAgIC8vICAgICAuam9pbignLCAnKX1cbiAgICAgICAgICAvLyAgIGZvcmVpZ25JbmRleDogJHtmb3JlaWduSW5kZXh9XG4gICAgICAgICAgLy8gICBmb3JlaWduSW50ZXJzZWN0aW9ucyAke2ludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtmb3JlaWduSW5kZXhdXG4gICAgICAgICAgLy8gICAgIC5tYXAoKF8sIGkpID0+IGkgPT09IGZvcmVpZ25JbnRlckluZGV4ID8gYFske199XWAgOiBfKVxuICAgICAgICAgIC8vICAgICAuam9pbignLCAnKX1cbiAgICAgICAgICAvLyBgKTtcblxuICAgICAgICAgIGNvbnN0IHByZXZMb2NhbEludGVyID0gMCA8IGxvY2FsSW50ZXJJbmRleFxuICAgICAgICAgICAgPyBpbnRlcnNlY3Rpb25JbmRleFtsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bcHJldkxvY2FsSW50ZXJJbmRleF1dXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgbmV4dExvY2FsSW50ZXIgPSBsb2NhbEludGVySW5kZXggPCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF0ubGVuZ3RoIC0gMVxuICAgICAgICAgICAgPyBpbnRlcnNlY3Rpb25JbmRleFtsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bbmV4dExvY2FsSW50ZXJJbmRleF1dXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgcHJldkZvcmVpZ25JbnRlciA9IC0xIDwgcHJldkZvcmVpZ25JbnRlckluZGV4ICYmIHByZXZGb3JlaWduSW50ZXJJbmRleCA8IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtmb3JlaWduSW5kZXhdLmxlbmd0aFxuICAgICAgICAgICAgPyBpbnRlcnNlY3Rpb25JbmRleFtmb3JlaWduSW5kZXhdW2ludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtmb3JlaWduSW5kZXhdW3ByZXZGb3JlaWduSW50ZXJJbmRleF1dXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgbmV4dEZvcmVpZ25JbnRlciA9IC0xIDwgbmV4dEZvcmVpZ25JbnRlckluZGV4ICYmIG5leHRGb3JlaWduSW50ZXJJbmRleCA8IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtmb3JlaWduSW5kZXhdLmxlbmd0aFxuICAgICAgICAgICAgPyBpbnRlcnNlY3Rpb25JbmRleFtmb3JlaWduSW5kZXhdW2ludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtmb3JlaWduSW5kZXhdW25leHRGb3JlaWduSW50ZXJJbmRleF1dXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICBeXG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgbmV4dEZvcmVpZ25JbnRlclxuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgIC8vICAtLS1wcmV2TG9jYWxJbnRlci0tLWludGVyLS0tbmV4dExvY2FsSW50ZXItLS0+XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgcHJldkZvcmVpZ25JbnRlclxuICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gdGhpcy5idWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvbkluZGV4ZXMoXG4gICAgICAgICAgICBpbnRlcixcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgcHJldkxvY2FsSW50ZXIsXG4gICAgICAgICAgICAgIG5leHRGb3JlaWduSW50ZXIsXG4gICAgICAgICAgICAgIG5leHRMb2NhbEludGVyLFxuICAgICAgICAgICAgICBwcmV2Rm9yZWlnbkludGVyXG4gICAgICAgICAgICBdXG4gICAgICAgICAgKTtcbiAgICAgICAgICBwYXJ0aWFscy5wdXNoKC4uLnBhcnRzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygncGFydGlhbHMnLCBwYXJ0aWFscyk7XG4gICAgcmV0dXJuIHBhcnRpYWxzO1xuICB9XG4gIGJ1aWxkUG9seWdvbkluZGV4ZXNGcm9tUGFydGlhbHMocGFydGlhbHM6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVtdKTogbnVtYmVyW11bXSB7XG4gICAgY29uc3QgcG9seWdvbkluZGV4ZXM6IG51bWJlcltdW10gPSBbXTtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IG92ZXJsYXA6IG51bWJlcjtcbiAgICB3aGlsZSAoaSA8IHBhcnRpYWxzLmxlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwYXJ0aWFscy5sZW5ndGg7IGorKynCoHtcbiAgICAgICAgaWYgKGkgIT09IGopIHtcbiAgICAgICAgICBpZiAodGhpcy5wYXJ0aWFsc092ZXJsYXBzKHBhcnRpYWxzW2ldLCBwYXJ0aWFsc1tqXSkpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBcbiAgICAgICAgICAgIC8vICAgcGFydGlhbHNbaV06ICR7cGFydGlhbHNbaV0udG9TdHJpbmcoKX0sXG4gICAgICAgICAgICAvLyAgIHBhcnRpYWxzW2pdOiAke3BhcnRpYWxzW2pdLnRvU3RyaW5nKCl9LFxuICAgICAgICAgICAgLy8gYCk7XG4gICAgICAgICAgICBwYXJ0aWFsc1tpXS5zcGxpY2UoLTIsIDIsIC4uLnBhcnRpYWxzW2pdKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBcbiAgICAgICAgICAgIC8vICAgcGFydGlhbHNbaV06ICR7cGFydGlhbHNbaV0udG9TdHJpbmcoKX0gW05FV10sXG4gICAgICAgICAgICAvLyBgKTtcbiAgICAgICAgICAgIHBhcnRpYWxzLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgIGlmIChqIDwgaSkge1xuICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdmVybGFwID0gdGhpcy5wYXJ0aWFsc092ZXJsYXBzKHBhcnRpYWxzW2ldLCBwYXJ0aWFsc1tpXSkgfHwgdGhpcy5wYXJ0aWFsc01lZXQocGFydGlhbHNbaV0sIHBhcnRpYWxzW2ldKTtcbiAgICAgICAgICAgIGlmIChvdmVybGFwID4gMCkge1xuICAgICAgICAgICAgICBwYXJ0aWFsc1tpXS5zcGxpY2UoMCwgb3ZlcmxhcCk7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBcbiAgICAgICAgICAgICAgLy8gICBwYXJ0aWFsc1tpXTogJHtwYXJ0aWFsc1tpXS50b1N0cmluZygpfSBbQ0xPU0VEXSxcbiAgICAgICAgICAgICAgLy8gYCk7XG4gICAgICAgICAgICAgIHBvbHlnb25JbmRleGVzLnB1c2gocGFydGlhbHNbaV0pO1xuICAgICAgICAgICAgICBwYXJ0aWFscy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpID0gLTE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ2luY29tcGxldGUgcG9seWdvbnMnKTtcbiAgICAvLyBwYXJ0aWFscy5tYXAocCA9PiBjb25zb2xlLmxvZyhwLnRvU3RyaW5nKCkpKTtcbiAgICAvLyBjb25zb2xlLmxvZygncG9seWdvbnMnLCBwb2x5Z29ucyk7XG4gICAgLy8gcG9seWdvbnMubWFwKHAgPT4gY29uc29sZS5sb2cocC50b1N0cmluZygpKSk7XG4gICAgcmV0dXJuIHBvbHlnb25JbmRleGVzO1xuICB9XG59IiwiaW1wb3J0IHsgUG9scGxvdFJlbmRlcmVyIH0gZnJvbSBcIi4vaW50ZXJmYWNlcy9wb2xwbG90LXJlbmRlcmVyXCI7XG5pbXBvcnQgeyBMaW5lIH0gZnJvbSBcIi4vbGluZVwiO1xuaW1wb3J0IHsgUG9seWdvbiB9IGZyb20gXCIuL3BvbHlnb25cIjtcbmltcG9ydCB7IFN1cnZleSB9IGZyb20gXCIuL3N1cnZleVwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlY3RvcjJcIjtcblxuLy8gbGluZVxuY29uc3QgZ1RlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XG5nVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnYmxhY2snKTtcbmdUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcwLjRweCcpO1xuXG5jb25zdCBsaW5lVGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2xpbmUnKTtcbmxpbmVUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS1kYXNoYXJyYXknLCAnMTAsIDQsIDEsIDQnKTtcblxuY29uc3QgYW5jaG9yVGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcbmFuY2hvclRlbXBsYXRlLnNldEF0dHJpYnV0ZShcbiAgJ2QnLFxuICAnTSAwLCAwICcgK1xuICAnQSAxMCwgMTAsIDAsIDAsIDAsIC01LCAtNSAnICtcbiAgJ0EgMTAsIDEwLCAwLCAxLCAxLCA1LCAtNSAnICtcbiAgJ0EgMTAsIDEwLCAwLCAwLCAwLCAwLCAwJ1xuKTtcbmFuY2hvclRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnZmlsbCcsICd3aGl0ZScpO1xuXG5jb25zdCB0ZXh0VGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcbnRleHRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpO1xudGV4dFRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnYWxpZ25tZW50LWJhc2VsaW5lJywgJ2NlbnRyYWwnKTtcbnRleHRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZvbnQtZmFtaWx5JywgJ2NvbnNvbGFzLCBcIkxpYmVyYXRpb24gTW9ub1wiLCBjb3VyaWVyLCBtb25vc3BhY2UnKTtcbnRleHRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZvbnQtd2VpZ2h0JywgJzEwMCcpO1xudGV4dFRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnZm9udC1zaXplJywgJzE0cHgnKTtcblxuZ1RlbXBsYXRlLmFwcGVuZENoaWxkKGxpbmVUZW1wbGF0ZSk7XG5nVGVtcGxhdGUuYXBwZW5kQ2hpbGQoYW5jaG9yVGVtcGxhdGUpO1xuZ1RlbXBsYXRlLmFwcGVuZENoaWxkKGFuY2hvclRlbXBsYXRlLmNsb25lTm9kZSgpKTtcbmdUZW1wbGF0ZS5hcHBlbmRDaGlsZCh0ZXh0VGVtcGxhdGUpO1xuZ1RlbXBsYXRlLmFwcGVuZENoaWxkKHRleHRUZW1wbGF0ZS5jbG9uZU5vZGUoKSk7XG5cbi8vIHBvaW50XG5jb25zdCBnUG9pbnRUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xuZ1BvaW50VGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnYmxhY2snKTtcbmdQb2ludFRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzAuNHB4Jyk7XG5cbmNvbnN0IHBvaW50VGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xucG9pbnRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnZ3JlZW4nKTtcbnBvaW50VGVtcGxhdGUuc2V0QXR0cmlidXRlKCdyJywgJzMnKTtcblxuY29uc3QgdGV4dFBvaW50VGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3RleHQnKTtcbnRleHRQb2ludFRlbXBsYXRlLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgwLCAxMCknKTtcbnRleHRQb2ludFRlbXBsYXRlLnNldEF0dHJpYnV0ZSgndGV4dC1hbmNob3InLCAnbWlkZGxlJyk7XG50ZXh0UG9pbnRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2FsaWdubWVudC1iYXNlbGluZScsICdoYW5naW5nJyk7XG50ZXh0UG9pbnRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZvbnQtZmFtaWx5JywgJ2NvbnNvbGFzLCBcIkxpYmVyYXRpb24gTW9ub1wiLCBjb3VyaWVyLCBtb25vc3BhY2UnKTtcbnRleHRQb2ludFRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnZm9udC13ZWlnaHQnLCAnMTAwJyk7XG50ZXh0UG9pbnRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZvbnQtc2l6ZScsICcxNHB4Jyk7XG50ZXh0UG9pbnRUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZvbnQtc3R5bGUnLCAnaXRhbGljJyk7XG5cbmdQb2ludFRlbXBsYXRlLmFwcGVuZENoaWxkKHBvaW50VGVtcGxhdGUpO1xuZ1BvaW50VGVtcGxhdGUuYXBwZW5kQ2hpbGQodGV4dFBvaW50VGVtcGxhdGUpO1xuXG4vLyBwb2x5Z29uXG5jb25zdCBwb2x5Z29uVGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdGgnKTtcbnBvbHlnb25UZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCAnZ3JlZW4nKTtcbnBvbHlnb25UZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ2ZpbGwtb3BhY2l0eScsICcwLjcnKTtcbnBvbHlnb25UZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcwLjhweCcpO1xucG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsICc1LCAyJyk7XG5wb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnYmxhY2snKTtcblxuLy8gc3VydmV5XG5jb25zdCBnU3VydmV5VGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcbmdTdXJ2ZXlUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMzAwLCAxMDApJyk7XG5cbmNvbnN0IHN1cnZleUJvdHRvbVBvbHlnb25UZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuc3VydmV5Qm90dG9tUG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnZmlsbCcsICd1cmwoI2VhcnRoLWhhdGNoKScpO1xuc3VydmV5Qm90dG9tUG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzAnKTtcblxuY29uc3Qgc3VydmV5VG9wUG9seWdvblRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdwYXRoJyk7XG5zdXJ2ZXlUb3BQb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsLW9wYWNpdHknLCAnMCcpO1xuc3VydmV5VG9wUG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlJywgJ2JsYWNrJyk7XG5zdXJ2ZXlUb3BQb2x5Z29uVGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMC44cHgnKTtcblxuY29uc3Qgc3VydmV5TGl0aG9sb2d5VGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcblxuZ1N1cnZleVRlbXBsYXRlLmFwcGVuZENoaWxkKHN1cnZleUxpdGhvbG9neVRlbXBsYXRlKTtcbmdTdXJ2ZXlUZW1wbGF0ZS5hcHBlbmRDaGlsZChzdXJ2ZXlCb3R0b21Qb2x5Z29uVGVtcGxhdGUpO1xuZ1N1cnZleVRlbXBsYXRlLmFwcGVuZENoaWxkKHN1cnZleVRvcFBvbHlnb25UZW1wbGF0ZSk7XG5cbi8vIGxpdGhvbG9naWNhbExheWVyXG5jb25zdCBsaXRob2xvZ2ljYWxMYXllclJlY3RUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncmVjdCcpO1xuXG4vLyBlYXJ0aEhhdGNoXG5jb25zdCBoYXRjaFBhdHRlcm4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ3BhdHRlcm4nKTtcbmhhdGNoUGF0dGVybi5pZCA9ICdlYXJ0aC1oYXRjaCc7XG5oYXRjaFBhdHRlcm4uc2V0QXR0cmlidXRlKCdwYXR0ZXJuVW5pdHMnLCAndXNlclNwYWNlT25Vc2UnKTtcbmhhdGNoUGF0dGVybi5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzI1Jyk7XG5oYXRjaFBhdHRlcm4uc2V0QXR0cmlidXRlKCdoZWlnaHQnLCAnMjUnKTtcbmhhdGNoUGF0dGVybi5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMjIyZDMyJyk7XG5oYXRjaFBhdHRlcm4uc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMC40cHgnKTtcblxubGV0IGhhdGNoUGF0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuY29uc3QgaGF0Y2hEcyA9IFtcbiAgJ00tMSwxIGwyLC0yJyxcbiAgJ00tMSw5IGwxMCwtMTAnLFxuXG4gICdNLTEsMTggbDQsLTQnLFxuICAnTS0xLDI2IGw4LC04JyxcbiAgLy8gJ002LDI2IGw0LC00JyxcbiAgJ003LDI2IGw0LC00JyxcblxuICAvLyAnTTE1LDI2IGwxMCwtMTAnLFxuICAnTTE2LDI2IGwxMCwtMTAnLFxuICAvLyAnTTIzLDI2IGwyLC0yJyxcbiAgJ00yNCwyNiBsMiwtMicsXG5cbiAgJ00xNCwzIGw0LC00JyxcbiAgJ00xOCw3IGw4LC04JyxcbiAgJ00yMiwxMSBsNCwtNCcsXG5cbiAgJ00yLDExIGwxMywxMycsXG4gICdNNiw3IGwxMywxMycsXG4gICdNMTAsMyBsMTMsMTMnLFxuXTtcbmZvciAoY29uc3QgZCBvZiBoYXRjaERzKSB7XG4gIGhhdGNoUGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCBkKTtcbiAgaGF0Y2hQYXR0ZXJuLmFwcGVuZENoaWxkKGhhdGNoUGF0aCk7XG4gIGhhdGNoUGF0aCA9IGhhdGNoUGF0aC5jbG9uZU5vZGUoKSBhcyBTVkdQYXRoRWxlbWVudFxufVxuXG4vLyB0eXBlIHNlbGVjdFxuY29uc3Qgc2VsZWN0VGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcbnNlbGVjdFRlbXBsYXRlLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbnNlbGVjdFRlbXBsYXRlLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC00OSUpJztcbnNlbGVjdFRlbXBsYXRlLnN0eWxlLmxlZnQgPSAnMjRweCc7XG5sZXQgb3B0aW9uVGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbmNvbnN0IHZhbHVlcyA9IFtcbiAgJ25vbiBpZGVudGlmacOpJyxcbiAgJ2FyZ2lsZScsXG4gICdjYWxjYWlyZSdcbl07XG5jb25zdCBjb2xvcnMgPSBuZXcgTWFwKFtcbiAgW3ZhbHVlc1swXSwgJyNmZGUzMTInXSxcbiAgW3ZhbHVlc1sxXSwgJyMyODlmZGUnXSxcbiAgW3ZhbHVlc1syXSwgJyNhYmZlMTInXVxuXSk7XG5cbmZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gIG9wdGlvblRlbXBsYXRlLmlubmVySFRNTCA9IHZhbHVlO1xuICBvcHRpb25UZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgdmFsdWUpO1xuICBzZWxlY3RUZW1wbGF0ZS5hcHBlbmRDaGlsZChvcHRpb25UZW1wbGF0ZSk7XG4gIG9wdGlvblRlbXBsYXRlID0gb3B0aW9uVGVtcGxhdGUuY2xvbmVOb2RlKCkgYXMgSFRNTE9wdGlvbkVsZW1lbnQ7XG59XG5cbi8vIHF1YW50aXR5XG5jb25zdCBwVGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG5wVGVtcGxhdGUuc3R5bGUuYm9yZGVyTGVmdFdpZHRoID0gJzE0cHgnO1xucFRlbXBsYXRlLnN0eWxlLmZvbnRGYW1pbHkgPSAnY29uc29sYXMsIFwiTGliZXJhdGlvbiBNb25vXCIsIGNvdXJpZXIsIG1vbm9zcGFjZSc7XG5wVGVtcGxhdGUuc3R5bGUuZm9udFdlaWdodCA9ICcxMDAnO1xucFRlbXBsYXRlLnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xucFRlbXBsYXRlLnN0eWxlLmhlaWdodCA9ICcxNHB4JztcbnBUZW1wbGF0ZS5zdHlsZS5wYWRkaW5nTGVmdCA9ICc4cHgnO1xuXG5leHBvcnQgY2xhc3MgU3ZnUmVuZGVyZXIgaW1wbGVtZW50cyBQb2xwbG90UmVuZGVyZXIge1xuICBwcml2YXRlIHN2ZzogU1ZHRWxlbWVudDtcbiAgcHJpdmF0ZSBzaWRlYmFyRGl2OiBIVE1MRGl2RWxlbWVudDtcbiAgcHJpdmF0ZSBzaWRlYmFyU3ZnOiBTVkdFbGVtZW50O1xuICBwcml2YXRlIHNlbGVjdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBwcml2YXRlIHBvaW50Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XG4gIHByaXZhdGUgcG9seWdvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xuICBwcml2YXRlIGxpbmVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcbiAgcHJpdmF0ZSBzdXJ2ZXlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcbiAgcHJpdmF0ZSBxdWFudGl0aWVzQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcbiAgcHJpdmF0ZSBzdmdHQnlMaW5lID0gbmV3IE1hcDxMaW5lLCBTVkdHRWxlbWVudD4oKTtcbiAgcHJpdmF0ZSBzdmdQYXRoQnlQb2x5Z29uID0gbmV3IE1hcDxQb2x5Z29uLCBTVkdQYXRoRWxlbWVudD4oKTtcbiAgcHJpdmF0ZSBzdmdHQnlQb2ludCA9IG5ldyBNYXA8VmVjdG9yMiwgU1ZHR0VsZW1lbnQ+KCk7XG4gIHByaXZhdGUgaGFuZGxlcnM6IFJlY29yZDxzdHJpbmcsIChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZD4gPSB7fTtcbiAgcHVibGljIGxpdGhvQ2hhbmdlSGFuZGxlcjogKCkgPT4gdm9pZDtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xuICAgIHRoaXMuc2lkZWJhckRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaWRlYmFyJyk7XG4gICAgdGhpcy5zaWRlYmFyU3ZnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpZGViYXIgPiBzdmcnKTtcbiAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZChoYXRjaFBhdHRlcm4pO1xuICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHRoaXMucG9seWdvbkNvbnRhaW5lcik7XG4gICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQodGhpcy5saW5lQ29udGFpbmVyKTtcbiAgICB0aGlzLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLnBvaW50Q29udGFpbmVyKTtcbiAgICB0aGlzLnF1YW50aXRpZXNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucXVhbnRpdGllcy5jb250YWluZXInKTtcbiAgICB0aGlzLnNpZGViYXJTdmcuYXBwZW5kQ2hpbGQodGhpcy5zdXJ2ZXlDb250YWluZXIpO1xuICAgIHRoaXMuc2lkZWJhckRpdi5hcHBlbmRDaGlsZCh0aGlzLnNlbGVjdENvbnRhaW5lcik7XG4gIH1cbiAgcHJpdmF0ZSBfc2V0RXZlbnRIYW5kbGVyKHN2ZzogU1ZHRWxlbWVudCwgZXZlbnQ6IHN0cmluZywgaGFuZGxlcjogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuaGFuZGxlcnNbZXZlbnRdKSB7XG4gICAgICBzdmcucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpcy5oYW5kbGVyc1tldmVudF0pO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZXJzW2V2ZW50XSA9IGhhbmRsZXI7XG4gICAgc3ZnLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMuaGFuZGxlcnNbZXZlbnRdKTtcbiAgfVxuICBzZXRNb3VzZURvd25IYW5kbGVyKGhhbmRsZXI6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX3NldEV2ZW50SGFuZGxlcih0aGlzLnN2ZywgJ21vdXNlZG93bicsIGhhbmRsZXIpO1xuICB9XG4gIHNldE1vdXNlVXBIYW5kbGVyKGhhbmRsZXI6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX3NldEV2ZW50SGFuZGxlcih0aGlzLnN2ZywgJ21vdXNldXAnLCBoYW5kbGVyKTtcbiAgfVxuICBzZXRNb3VzZU1vdmVIYW5kbGVyKGhhbmRsZXI6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX3NldEV2ZW50SGFuZGxlcih0aGlzLnN2ZywgJ21vdXNlbW92ZScsIGhhbmRsZXIpO1xuICB9XG4gIHNldFNpZGViYXJNb3VzZURvd25IYW5kbGVyKGhhbmRsZXI6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMuX3NldEV2ZW50SGFuZGxlcih0aGlzLnNpZGViYXJTdmcsICdtb3VzZWRvd24nLCBoYW5kbGVyKTtcbiAgfVxuICBzZXRTaWRlYmFyTW91c2VVcEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5fc2V0RXZlbnRIYW5kbGVyKHRoaXMuc2lkZWJhclN2ZywgJ21vdXNldXAnLCBoYW5kbGVyKTtcbiAgfVxuICBzZXRTaWRlYmFyTW91c2VNb3ZlSGFuZGxlcihoYW5kbGVyOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLl9zZXRFdmVudEhhbmRsZXIodGhpcy5zaWRlYmFyU3ZnLCAnbW91c2Vtb3ZlJywgaGFuZGxlcik7XG4gIH1cbiAgZHJhd0xpbmUobGluZTogTGluZSwgbmFtZTogc3RyaW5nKTogdm9pZCB7XG4gICAgbGV0IHN2Z0c6IFNWR0dFbGVtZW50O1xuICAgIGlmICghdGhpcy5zdmdHQnlMaW5lLmhhcyhsaW5lKSkge1xuICAgICAgc3ZnRyA9IGdUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSkgYXMgU1ZHR0VsZW1lbnQ7XG4gICAgICB0aGlzLmxpbmVDb250YWluZXIuYXBwZW5kQ2hpbGQoc3ZnRyk7XG4gICAgICB0aGlzLnN2Z0dCeUxpbmUuc2V0KGxpbmUsIHN2Z0cpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdmdHID0gdGhpcy5zdmdHQnlMaW5lLmdldChsaW5lKTtcbiAgICB9XG4gICAgY29uc3Qgc3ZnTGluZSA9IHN2Z0cuY2hpbGRyZW5bMF0gYXMgU1ZHTGluZUVsZW1lbnQ7XG4gICAgY29uc3Qgc3ZnUGF0aEFuY2hvclN0YXJ0ID0gc3ZnRy5jaGlsZHJlblsxXSBhcyBTVkdQYXRoRWxlbWVudDtcbiAgICBjb25zdCBzdmdQYXRoQW5jaG9yRW5kID0gc3ZnRy5jaGlsZHJlblsyXSBhcyBTVkdQYXRoRWxlbWVudDtcbiAgICBjb25zdCBzdmdUZXh0U3RhcnQgPSBzdmdHLmNoaWxkcmVuWzNdIGFzIFNWR1RleHRFbGVtZW50O1xuICAgIGNvbnN0IHN2Z1RleHRFbmQgPSBzdmdHLmNoaWxkcmVuWzRdIGFzIFNWR1RleHRFbGVtZW50O1xuICAgIGNvbnN0IHgxID0gbGluZS54MS50b0ZpeGVkKCk7XG4gICAgY29uc3QgeTEgPSBsaW5lLnkxLnRvRml4ZWQoKTtcbiAgICBjb25zdCB4MiA9IGxpbmUueDIudG9GaXhlZCgpO1xuICAgIGNvbnN0IHkyID0gbGluZS55Mi50b0ZpeGVkKCk7XG4gICAgc3ZnTGluZS5zZXRBdHRyaWJ1dGUoJ3gxJywgeDEpO1xuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd5MScsIHkxKTtcbiAgICBzdmdMaW5lLnNldEF0dHJpYnV0ZSgneDInLCB4Mik7XG4gICAgc3ZnTGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgeTIpO1xuICAgIHN2Z1RleHRTdGFydC5pbm5lckhUTUwgPSBuYW1lO1xuICAgIHN2Z1RleHRFbmQuaW5uZXJIVE1MID0gbmFtZTtcbiAgICBjb25zdCBhbmdsZSA9IDE4MCAqIChsaW5lLnYyLnN1YihsaW5lLnYxKS5hbmdsZSgpIC0gTWF0aC5QSSAvIDIpIC8gTWF0aC5QSTtcbiAgICBjb25zdCBiZWZvcmUgPSBsaW5lLmJlZm9yZSgxNCk7XG4gICAgY29uc3QgYWZ0ZXIgPSBsaW5lLmFmdGVyKDE0KTtcbiAgICBzdmdQYXRoQW5jaG9yU3RhcnQuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKCR7eDF9LCAke3kxfSkgcm90YXRlKCR7aXNOYU4oYW5nbGUpID8gMCA6IGFuZ2xlfSlgKTtcbiAgICBzdmdQYXRoQW5jaG9yRW5kLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3gyfSwgJHt5Mn0pIHJvdGF0ZSgke2lzTmFOKGFuZ2xlKSA/IDAgOiAxODAgKyBhbmdsZX0pYCk7XG4gICAgc3ZnVGV4dFN0YXJ0LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke2lzTmFOKGJlZm9yZS54KSA/IHgxIDogYmVmb3JlLngudG9GaXhlZCgpfSwgJHtpc05hTihiZWZvcmUueSkgPyB5MSA6IGJlZm9yZS55LnRvRml4ZWQoKX0pYCk7XG4gICAgc3ZnVGV4dEVuZC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHtpc05hTihhZnRlci54KSA/IHgyIDogYWZ0ZXIueC50b0ZpeGVkKCl9LCAke2lzTmFOKGFmdGVyLnkpID8geTIgOiBhZnRlci55LnRvRml4ZWQoKX0pYCk7XG4gIH1cbiAgZXJhc2VMaW5lKGxpbmU6IExpbmUpOiB2b2lkIHtcbiAgICBjb25zdCBzdmdHID0gdGhpcy5zdmdHQnlMaW5lLmdldChsaW5lKTtcbiAgICBpZiAoc3ZnRykge1xuICAgICAgdGhpcy5saW5lQ29udGFpbmVyLnJlbW92ZUNoaWxkKHN2Z0cpO1xuICAgICAgdGhpcy5zdmdHQnlMaW5lLmRlbGV0ZShsaW5lKTtcbiAgICB9XG4gIH1cbiAgZHJhd1BvaW50KHBvaW50OiBWZWN0b3IyLCBuYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICBsZXQgc3ZnRzogU1ZHR0VsZW1lbnQ7XG4gICAgaWYgKCF0aGlzLnN2Z0dCeVBvaW50Lmhhcyhwb2ludCkpIHtcbiAgICAgIHN2Z0cgPSBnUG9pbnRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSkgYXMgU1ZHR0VsZW1lbnQ7XG4gICAgICB0aGlzLnBvaW50Q29udGFpbmVyLmFwcGVuZENoaWxkKHN2Z0cpO1xuICAgICAgdGhpcy5zdmdHQnlQb2ludC5zZXQocG9pbnQsIHN2Z0cpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdmdHID0gdGhpcy5zdmdHQnlQb2ludC5nZXQocG9pbnQpO1xuICAgIH1cbiAgICBjb25zdCBzdmdUZXh0ID0gc3ZnRy5jaGlsZHJlblsxXSBhcyBTVkdUZXh0RWxlbWVudDtcbiAgICBzdmdHLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3BvaW50LngudG9GaXhlZCgpfSwgJHtwb2ludC55LnRvRml4ZWQoKX0pYCk7XG4gICAgc3ZnVGV4dC5pbm5lckhUTUwgPSBuYW1lO1xuICB9XG4gIHByaXZhdGUgY2xlYXJDb250YWluZXIoY29udGFpbmVyOiBFbGVtZW50KTogdm9pZCB7XG4gICAgd2hpbGUgKGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgfVxuICBjbGVhckludGVyc2VjdGlvbnMoKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhckNvbnRhaW5lcih0aGlzLnBvaW50Q29udGFpbmVyKTtcbiAgfVxuICBkcmF3UG9seWdvbihwb2x5Z29uOiBQb2x5Z29uLCBmaWxsID0gJyMnICsgKE1hdGguZmxvb3IoKDE2Nzc3MjE1IC0gMWU1KSAqIE1hdGgucmFuZG9tKCkpICsgMWU1KS50b1N0cmluZygxNikpOiB2b2lkIHtcbiAgICBsZXQgc3ZnUGF0aDogU1ZHUGF0aEVsZW1lbnQ7XG4gICAgaWYgKCF0aGlzLnN2Z1BhdGhCeVBvbHlnb24uaGFzKHBvbHlnb24pKSB7XG4gICAgICBzdmdQYXRoID0gcG9seWdvblRlbXBsYXRlLmNsb25lTm9kZSgpIGFzIFNWR1BhdGhFbGVtZW50O1xuICAgICAgdGhpcy5wb2x5Z29uQ29udGFpbmVyLmFwcGVuZENoaWxkKHN2Z1BhdGgpO1xuICAgICAgdGhpcy5zdmdQYXRoQnlQb2x5Z29uLnNldChwb2x5Z29uLCBzdmdQYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnUGF0aCA9IHRoaXMuc3ZnUGF0aEJ5UG9seWdvbi5nZXQocG9seWdvbik7XG4gICAgfVxuICAgIHN2Z1BhdGguc2V0QXR0cmlidXRlKCdkJywgJ00gJyArIHBvbHlnb24udmVydGljZXMubWFwKHYgPT4gYCR7di54LnRvRml4ZWQoKX0gJHt2LnkudG9GaXhlZCgpfWApLmpvaW4oJyBMICcpICsgJyBaJyk7XG4gICAgc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBmaWxsKTtcbiAgfVxuICBjbGVhclBvbHlnb25zKCk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJDb250YWluZXIodGhpcy5wb2x5Z29uQ29udGFpbmVyKTtcbiAgfVxuXG4gIGRyYXdTdXJ2ZXkoc3VydmV5OiBTdXJ2ZXkpOiB2b2lkIHtcbiAgICB0aGlzLmNsZWFyQ29udGFpbmVyKHRoaXMuc3VydmV5Q29udGFpbmVyKTtcbiAgICB0aGlzLmNsZWFyQ29udGFpbmVyKHRoaXMuc2VsZWN0Q29udGFpbmVyKTtcbiAgICBjb25zdCBXSURUSCA9IDIwMDtcbiAgICBjb25zdCBUSElDS05FU1MgPSAxMDtcbiAgICBjb25zdCBESUFNRVRFUiA9IDUwO1xuICAgIGNvbnN0IGQgPSBgTSAkeygtV0lEVEggLyAyKS50b0ZpeGVkKCl9LCAwIGAgK1xuICAgICAgYGggJHsoKFdJRFRIIC0gRElBTUVURVIpIC8gMikudG9GaXhlZCgpfSBgICtcbiAgICAgIGB2ICR7c3VydmV5LmRlcHRoKCkudG9GaXhlZCgpfSBgICtcbiAgICAgIGBoICR7RElBTUVURVIudG9GaXhlZCgpfSBgICtcbiAgICAgIGB2ICR7LXN1cnZleS5kZXB0aCgpLnRvRml4ZWQoKX0gYCArXG4gICAgICBgaCAkeygoV0lEVEggLSBESUFNRVRFUikgLyAyKS50b0ZpeGVkKCl9YDtcbiAgICBjb25zdCBkQm90dG9tID0gZCArICcgJyArXG4gICAgICBgdiAke1RISUNLTkVTUy50b0ZpeGVkKCl9IGAgK1xuICAgICAgYGggJHsoVEhJQ0tORVNTIC0gKFdJRFRIIC0gRElBTUVURVIpIC8gMikudG9GaXhlZCgpfSBgICtcbiAgICAgIGB2ICR7c3VydmV5LmRlcHRoKCkudG9GaXhlZCgpfSBgICtcbiAgICAgIGBoICR7KC0oMiAqIFRISUNLTkVTUyArIERJQU1FVEVSKSkudG9GaXhlZCgpfSBgICtcbiAgICAgIGB2ICR7LXN1cnZleS5kZXB0aCgpLnRvRml4ZWQoKX0gYCArXG4gICAgICBgaCAkeyhUSElDS05FU1MgLSAoV0lEVEggLSBESUFNRVRFUikgLyAyKS50b0ZpeGVkKCl9IFpgO1xuXG4gICAgY29uc3Qgc3ZnRyA9IGdTdXJ2ZXlUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSkgYXMgU1ZHR0VsZW1lbnQ7XG4gICAgY29uc3QgbGl0aG9sb2d5ID0gc3ZnRy5jaGlsZHJlblswXSBhcyBTVkdHRWxlbWVudDtcbiAgICBjb25zdCBib3R0b21Qb2x5Z29uID0gc3ZnRy5jaGlsZHJlblsxXSBhcyBTVkdQYXRoRWxlbWVudDtcbiAgICBjb25zdCB0b3BQb2x5Z29uID0gc3ZnRy5jaGlsZHJlblsyXSBhcyBTVkdQYXRoRWxlbWVudDtcbiAgICBib3R0b21Qb2x5Z29uLnNldEF0dHJpYnV0ZSgnZCcsIGRCb3R0b20pO1xuICAgIHRvcFBvbHlnb24uc2V0QXR0cmlidXRlKCdkJywgZCk7XG5cbiAgICBsZXQgdG9wID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN1cnZleS5saXRob2xvZ3kubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGxpdGhvbG9naWNhbExheWVyID0gbGl0aG9sb2dpY2FsTGF5ZXJSZWN0VGVtcGxhdGUuY2xvbmVOb2RlKCkgYXMgU1ZHUmVjdEVsZW1lbnQ7XG4gICAgICBsaXRob2xvZ2ljYWxMYXllci5zZXRBdHRyaWJ1dGUoJ3gnLCAoLURJQU1FVEVSIC8gMikudG9GaXhlZCgpKTtcbiAgICAgIGxpdGhvbG9naWNhbExheWVyLnNldEF0dHJpYnV0ZSgneScsIHRvcC50b0ZpeGVkKCkpO1xuICAgICAgbGl0aG9sb2dpY2FsTGF5ZXIuc2V0QXR0cmlidXRlKCd3aWR0aCcsIERJQU1FVEVSLnRvRml4ZWQoKSk7XG4gICAgICBsaXRob2xvZ2ljYWxMYXllci5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHN1cnZleS5saXRob2xvZ3lbaV0uZGVwdGgudG9GaXhlZCgpKTtcbiAgICAgIGxpdGhvbG9naWNhbExheWVyLnNldEF0dHJpYnV0ZSgnZmlsbCcsIGNvbG9ycy5nZXQoc3VydmV5LmxpdGhvbG9neVtpXS50eXBlKSk7XG4gICAgICBsaXRob2xvZ3kuYXBwZW5kQ2hpbGQobGl0aG9sb2dpY2FsTGF5ZXIpO1xuXG4gICAgICBjb25zdCBzZWxlY3QgPSBzZWxlY3RUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgICBzZWxlY3QucXVlcnlTZWxlY3Rvcihgb3B0aW9uW3ZhbHVlPVwiJHtzdXJ2ZXkubGl0aG9sb2d5W2ldLnR5cGV9XCJdYCkuc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICdzZWxlY3RlZCcpO1xuICAgICAgc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGV2ZW50ID0+IHtcbiAgICAgICAgc3VydmV5LmxpdGhvbG9neVtpXS50eXBlID0gc2VsZWN0LnZhbHVlO1xuICAgICAgICBsaXRob2xvZ2ljYWxMYXllci5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCBjb2xvcnMuZ2V0KHNlbGVjdC52YWx1ZSkpO1xuICAgICAgICB0aGlzLmxpdGhvQ2hhbmdlSGFuZGxlcigpO1xuICAgICAgfSk7XG4gICAgICBzZWxlY3Quc3R5bGUudG9wID0gKHRvcCArIDEwMCArIHN1cnZleS5saXRob2xvZ3lbaV0uZGVwdGggLyAyKS50b0ZpeGVkKCkgKyAncHgnO1xuXG4gICAgICB0aGlzLnNlbGVjdENvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxlY3QpO1xuXG4gICAgICB0b3AgKz0gc3VydmV5LmxpdGhvbG9neVtpXS5kZXB0aDtcbiAgICB9XG5cbiAgICB0aGlzLnN1cnZleUNvbnRhaW5lci5hcHBlbmRDaGlsZChzdmdHKTtcbiAgICB0aGlzLnNpZGViYXJEaXYuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICB9XG4gIGNsZWFyU3VydmV5KCk6IHZvaWQge1xuICAgIHRoaXMuc2lkZWJhckRpdi5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgdGhpcy5jbGVhckNvbnRhaW5lcih0aGlzLnN1cnZleUNvbnRhaW5lcik7XG4gICAgdGhpcy5jbGVhckNvbnRhaW5lcih0aGlzLnNlbGVjdENvbnRhaW5lcik7XG4gIH1cbiAgZHJhd1F1YW50aXRpZXMocXVhbnRpdGllczogTWFwPHN0cmluZywgbnVtYmVyPik6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJDb250YWluZXIodGhpcy5xdWFudGl0aWVzQ29udGFpbmVyKTtcbiAgICBxdWFudGl0aWVzLmZvckVhY2goKHF1YW50aXR5LCB0eXBlKSA9PiB7XG4gICAgICBjb25zdCBwID0gcFRlbXBsYXRlLmNsb25lTm9kZSgpIGFzIEhUTUxQYXJhZ3JhcGhFbGVtZW50O1xuICAgICAgcC5pbm5lckhUTUwgPSBgJHt0eXBlfSAoJHsocXVhbnRpdHkgLyAoMTAgKiAxMCAqIDUwKSkudG9GaXhlZCgyKX0gbcKzKWA7XG4gICAgICBwLnN0eWxlLmJvcmRlckxlZnQgPSBgOHB4IHNvbGlkICR7Y29sb3JzLmdldCh0eXBlKX1gO1xuICAgICAgdGhpcy5xdWFudGl0aWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHApO1xuICAgIH0pO1xuICB9XG59IiwiaW1wb3J0IHsgUG9scGxvdCB9IGZyb20gXCIuL3BvbHBsb3RcIjtcbmltcG9ydCB7IFN2Z1JlbmRlcmVyIH0gZnJvbSBcIi4vc3ZnLXJlbmRlcmVyXCI7XG5cbmNvbnN0IHN2Z1JlbmRlcmVyID0gbmV3IFN2Z1JlbmRlcmVyKCk7XG5jb25zdCBwb2xwbG90ID0gbmV3IFBvbHBsb3Qoc3ZnUmVuZGVyZXIpOyJdLCJzb3VyY2VSb290IjoiIn0=