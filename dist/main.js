(()=>{"use strict";var t=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.dotRaw=function(t,e,n,i){return t*n+e*i},t.dot=function(t,e){return this.dotRaw(t.x,t.y,e.x,e.y)},t.prototype.dot=function(e){return t.dot(this,e)},t.crossRaw=function(t,e,n,i){return t*i-n*e},t.cross=function(t,e){return this.crossRaw(t.x,t.y,e.x,e.y)},t.prototype.cross=function(e){return t.cross(this,e)},t.lenRaw=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},t.len=function(t){return this.lenRaw(t.x,t.y)},t.prototype.len=function(){return t.len(this)},t.normalizeRaw=function(t,e,n){void 0===n&&(n=1);var i=n/this.lenRaw(t,e);return this.mulRaw(t,e,i)},t.normalize=function(t,e){return void 0===e&&(e=1),this.normalizeRaw(t.x,t.y,e)},t.prototype.normalize=function(e){return void 0===e&&(e=1),t.normalize(this,e)},t.equalsRaw=function(t,e,n,i){return Math.abs(t-n)<3&&Math.abs(e-i)<3},t.equals=function(t,e){return this.equalsRaw(t.x,t.y,e.x,e.y)},t.prototype.equals=function(e){return t.equals(this,e)},t.addRaw=function(e,n,i,r){return new t(e+i,n+r)},t.add=function(t,e){return this.addRaw(t.x,t.y,e.x,e.y)},t.prototype.add=function(e){return t.add(this,e)},t.subRaw=function(e,n,i,r){return new t(e-i,n-r)},t.sub=function(t,e){return this.subRaw(t.x,t.y,e.x,e.y)},t.prototype.sub=function(e){return t.sub(this,e)},t.mulRaw=function(e,n,i){return new t(e*i,n*i)},t.mul=function(t,e){return this.mulRaw(t.x,t.y,e)},t.prototype.mul=function(e){return t.mul(this,e)},t.intersectionTimesRaw=function(e,n,i,r,o,s,u,a){var c=this.crossRaw(i-e,r-n,u-o,a-s);return new t(this.crossRaw(u-o,a-s,e-o,n-s)/c,this.crossRaw(i-e,r-n,e-o,n-s)/c)},t.intersectionTimes=function(t,e,n,i){return this.intersectionTimesRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersectionTimes=function(e,n,i){return t.intersectionTimes(this,e,n,i)},t.intersectionRaw=function(t,e,n,i,r,o,s,u){var a=this.intersectionTimesRaw(t,e,n,i,r,o,s,u);if(a)return a.y=e+(i-e)*a.x,a.x=t+(n-t)*a.x,a},t.intersection=function(t,e,n,i){return this.intersectionRaw(t.x,t.y,e.x,e.y,n.x,n.y,i.x,i.y)},t.prototype.intersection=function(e,n,i){return t.intersection(this,e,n,i)},t.prototype.angle=function(t){if(t){var e=this.angle(),n=t.angle();return n<e?n+2*Math.PI-e:n-e}return this.y>0?Math.acos(this.x/this.len()):2*Math.PI-Math.acos(this.x/this.len())},t}(),e=function(){function e(e,n,i,r){this.v1=new t(e,n),this.v2=new t(i,r)}return Object.defineProperty(e.prototype,"x1",{get:function(){return this.v1.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y1",{get:function(){return this.v1.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x2",{get:function(){return this.v2.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y2",{get:function(){return this.v2.y},enumerable:!1,configurable:!0}),e.prototype.len=function(){return this.v2.sub(this.v1).len()},e.prototype.pointAt=function(t){return this.v1.add(this.v2.sub(this.v1).mul(t))},e.prototype.before=function(t){return this.v1.add(this.v2.sub(this.v1).mul(-t/this.len()))},e.prototype.after=function(t){return this.v1.add(this.v2.sub(this.v1).mul((this.len()+t)/this.len()))},e.prototype.intersectionTimesWith=function(t){return this.v1.intersectionTimes(this.v2,t.v1,t.v2)},e.prototype.update=function(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.v1.x+=t,this.v1.y+=e,this.v2.x+=n,this.v2.y+=i},e}(),n=function(){function t(t){void 0===t&&(t=[]),this.vertices=t}return t.prototype.areaBetween=function(t,e){return(this.vertices[e].x-this.vertices[t].x)*(this.vertices[t].y+this.vertices[e].y)/2},t.prototype.area=function(){for(var t=0,e=this.vertices.length-1,n=0;n<this.vertices.length;n++)t+=this.areaBetween(e,n),e=n;return t},t.prototype.shareEdge=function(t,e){for(var n=this.vertices.length-1,i=0;i<this.vertices.length;i++){if(this.vertices[n].equals(t)&&this.vertices[i].equals(e))return!0;n=i}return!1},t.prototype.intersectionWith=function(t){},t.prototype.reverse=function(){this.vertices.reverse()},t.prototype.toString=function(){return this.vertices.length+" points: "+this.vertices.map((function(t){return"("+t.x.toFixed()+", "+t.y.toFixed()+")"})).join(", ")+" (area: "+this.area().toFixed()+")"},t}(),i=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,r++)i[r]=o[s];return i},r=function(){function t(t){var n,i,r,o,s=this;this.renderer=t,this.lines=[],this.intersectionTimes=[],this.intersectionPoints=[],this.renderer.setMouseDownHandler((function(t,r,o){i=o||null,(n=r||null)||(n=new e(t.clientX,t.clientY,t.clientX,t.clientY),i=n.v2,s.addLine(n))})),this.renderer.setMouseUpHandler((function(t,e,u){e?(r&&r!==e&&s.renderer.drawLine(r,e===o,!1),r=e,s.renderer.drawLine(r,e===o,!0)):r&&s.renderer.drawLine(r,e===o,!1),n=null,i=null})),this.renderer.setMouseMoveHandler((function(t,e,u){e?(o&&o!==e&&s.renderer.drawLine(o,!1,e===r),o=e,s.renderer.drawLine(o,!0,e===r)):o&&(s.renderer.drawLine(o,!1,e===r),o=null),n&&(i?(i.x=t.clientX,i.y=t.clientY):n.update(t.movementX,t.movementY,t.movementX,t.movementY),s.updateIntersectionTimes(n),s.renderer.drawLine(n,n===o,n===r))}))}return t.prototype.addLine=function(t){this.addIntersectionTimes(t),this.lines.push(t),this.renderer.drawLine(t,!1,!1)},t.prototype.addIntersectionTimes=function(t,e,n,i){void 0===e&&(e=this.lines),void 0===n&&(n=this.intersectionTimes),void 0===i&&(i=this.intersectionPoints);for(var r,o=[],s=[],u=0;u<e.length;u++)r=e[u].intersectionTimesWith(t),n[u].push(r.x),i[u].push(0<=r.x&&r.x<=1&&0<=r.y&&r.y<=1?e[u].v1.add(e[u].v2.sub(e[u].v1).mul(r.x)):null),o.push(r.y),s.push(null);o.push(NaN),s.push(null),n.push(o),i.push(s),this.renderIntersections()},t.prototype.updateIntersectionTimes=function(t,e,n,i){void 0===e&&(e=this.lines),void 0===n&&(n=this.intersectionTimes),void 0===i&&(i=this.intersectionPoints);for(var r,o=e.indexOf(t),s=0;s<e.length;s++)s!==o&&(r=e[s].intersectionTimesWith(t),n[s][o]=r.x,n[o][s]=r.y,s<o?i[s][o]=0<=r.x&&r.x<=1&&0<=r.y&&r.y<=1?e[s].v1.add(e[s].v2.sub(e[s].v1).mul(r.x)):null:i[o][s]=0<=r.x&&r.x<=1&&0<=r.y&&r.y<=1?e[s].v1.add(e[s].v2.sub(e[s].v1).mul(r.x)):null);this.renderIntersections()},t.prototype.renderIntersections=function(){var t=this;this.renderer.clearIntersections(),this.intersectionPoints.forEach((function(e){e.forEach((function(e){e&&t.renderer.drawPoint(e)}))})),this.renderer.clearPolygons();var e=this.buildPartialsFromIntersectionTimes();this.buildPolygonsFromPartials(e).forEach((function(e){return t.renderer.drawPolygon(e)}))},t.prototype.testSide=function(t,e,n){return e.sub(t).cross(n.sub(t))>0},t.prototype.partialsAreConnected=function(t,e){return t.vertices[t.vertices.length-2].equals(e.vertices[0])&&t.vertices[t.vertices.length-1].equals(e.vertices[1])},t.prototype.buildPartialsFromPoints=function(t,e){for(var i=[],r=0;r<e.length;r++)if(e[r]){var o=r+1;for(o===e.length&&(o=0);!e[o];)++o===e.length&&(o=0);r!==o&&i.push([r,o])}return i.map((function(i){var r=i[0],o=i[1];return new n([e[r],t,e[o]])}))},t.prototype.buildPartialsFromIntersectionTimes=function(t,e){void 0===t&&(t=this.lines),void 0===e&&(e=this.intersectionTimes),console.log("buildPartialsFromIntersectionTimes"),console.log("----------------------------------");for(var n=e.map((function(t,n){return t.map((function(t,e){return e})).filter((function(i){return!isNaN(t[i])&&0<=t[i]&&t[i]<=1&&!isNaN(e[i][n])&&0<=e[i][n]&&e[i][n]<=1})).sort((function(e,n){return t[e]-t[n]}))})),i=[],r=function(r){for(var s=0;s<n[r].length;s++){var u=n[r][s];if(r<u){var a=t[r].pointAt(e[r][n[r][s]]),c=s-1,h=s+1,l=n[u].findIndex((function(t){return t===r})),p=o.testSide(t[r].v1,t[r].v2,t[u].v1),d=p?l-1:l+1,v=p?l+1:l-1,f=0<s?t[r].pointAt(e[r][n[r][c]]):null,y=s<n[r].length-1?t[r].pointAt(e[r][n[r][h]]):null,m=-1<d&&d<n[u].length?t[u].pointAt(e[u][n[u][d]]):null,g=-1<v&&v<n[u].length?t[u].pointAt(e[u][n[u][v]]):null,w=o.buildPartialsFromPoints(a,[f,g,y,m]);i.push.apply(i,w)}}},o=this,s=0;s<n.length;s++)r(s);return i},t.prototype.buildPolygonsFromPartials=function(t){for(var e,n=[],r=0;r<t.length;){for(var o=0;o<t.length;o++)if(r!==o&&this.partialsAreConnected(t[r],t[o])){(e=t[r].vertices).splice.apply(e,i([-2,2],t[o].vertices)),t.splice(o,1),o<r&&r--,this.partialsAreConnected(t[r],t[r])?(t[r].vertices.splice(0,2),t[r].area()>0&&n.push(t[r]),t.splice(r,1)):t[r].vertices[0].equals(t[r].vertices[t[r].vertices.length-1])&&(t[r].vertices.pop(),t[r].area()>0&&n.push(t[r]),t.splice(r,1)),r=-1;break}r++}return n.map((function(t){return console.log(t.toString())})),n},t}(),o=document.createElementNS("http://www.w3.org/2000/svg","g");o.setAttribute("stroke","black"),o.setAttribute("stroke-width","0.4px");var s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("stroke-dasharray","10, 4, 1, 4");var u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d","M 0, 0A 10, 10, 0, 0, 0, -5, -5A 10, 10, 0, 1, 1, 5, -5A 10, 10, 0, 0, 0, 0, 0"),u.setAttribute("fill","white"),o.appendChild(s),o.appendChild(u),o.appendChild(u.cloneNode());var a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("fill","green"),a.setAttribute("r","3");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("fill","green"),c.setAttribute("fill-opacity","0.7"),c.setAttribute("stroke-width","3"),c.setAttribute("stroke","grey");var h=new(function(){function t(){this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.intersectionContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.polygonContainer=document.createElementNS("http://www.w3.org/2000/svg","g"),this.svgGByLine=new Map,this.lineBySvgG=new Map,this.svg.appendChild(this.intersectionContainer),this.svg.appendChild(this.polygonContainer)}return t.prototype.clickHandlerWrapper=function(t){var e=this;return function(n){var i=document.elementFromPoint(n.clientX,n.clientY),r=e.lineBySvgG.get(i.parentNode);i instanceof SVGPathElement&&i.parentNode!==e.polygonContainer?i.parentNode.children[1]===i?t(n,r,r.v1):t(n,r,r.v2):i instanceof SVGLineElement?t(n,r):t(n)}},t.prototype.setMouseDownHandler=function(t){this.onMouseDown&&this.svg.removeEventListener("mousedown",this.onMouseDown),this.onMouseDown=this.clickHandlerWrapper(t),this.svg.addEventListener("mousedown",this.onMouseDown)},t.prototype.setMouseUpHandler=function(t){this.onMouseUp&&this.svg.removeEventListener("mouseup",this.onMouseUp),this.onMouseUp=this.clickHandlerWrapper(t),this.svg.addEventListener("mouseup",this.onMouseUp)},t.prototype.setMouseMoveHandler=function(t){this.onMouseMove&&this.svg.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=this.clickHandlerWrapper(t),this.svg.addEventListener("mousemove",this.onMouseMove)},t.prototype.drawLine=function(t,e,n){var i;void 0===e&&(e=!1),void 0===n&&(n=!1),this.svgGByLine.has(t)?i=this.svgGByLine.get(t):(i=o.cloneNode(!0),this.svg.appendChild(i),this.svgGByLine.set(t,i),this.lineBySvgG.set(i,t));var r=i.children[0],s=i.children[1],u=i.children[2],a=t.x1.toFixed(),c=t.y1.toFixed(),h=t.x2.toFixed(),l=t.y2.toFixed();r.setAttribute("x1",a),r.setAttribute("y1",c),r.setAttribute("x2",h),r.setAttribute("y2",l),e?i.setAttribute("stroke-width","0.8px"):i.setAttribute("stroke-width","0.4px"),n?i.setAttribute("stroke","#19a194"):i.setAttribute("stroke","black");var p=180*(t.v2.sub(t.v1).angle()-Math.PI/2)/Math.PI;s.setAttribute("transform","translate("+a+", "+c+") rotate("+(isNaN(p)?0:p)+")"),u.setAttribute("transform","translate("+h+", "+l+") rotate("+(isNaN(p)?0:180+p)+")")},t.prototype.eraseLine=function(t){var e=this.svgGByLine.get(t);e&&(this.svg.removeChild(e),this.svgGByLine.delete(t))},t.prototype.drawPoint=function(t){var e=a.cloneNode();e.setAttribute("cx",t.x.toFixed()),e.setAttribute("cy",t.y.toFixed()),this.intersectionContainer.appendChild(e)},t.prototype.clearContainer=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},t.prototype.clearIntersections=function(){this.clearContainer(this.intersectionContainer)},t.prototype.drawPolygon=function(t){var e=c.cloneNode();e.setAttribute("d","M "+t.vertices.map((function(t){return t.x.toFixed()+" "+t.y.toFixed()})).join(" L ")+"Z"),e.setAttribute("fill","#"+(Math.floor(16677215*Math.random())+1e5).toString(16)),this.polygonContainer.appendChild(e)},t.prototype.clearPolygons=function(){this.clearContainer(this.polygonContainer)},t}());new r(h),document.querySelector("body").appendChild(h.svg)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3ZlY3RvcjIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9saW5lLnRzIiwid2VicGFjazovL3BvbHBsb3QvLi9zcmMvcG9seWdvbi50cyIsIndlYnBhY2s6Ly9wb2xwbG90Ly4vc3JjL3BvbHBsb3QudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9zdmctcmVuZGVyZXIudHMiLCJ3ZWJwYWNrOi8vcG9scGxvdC8uL3NyYy9pbmRleC50cyJdLCJuYW1lcyI6WyJ4IiwieSIsImRvdFJhdyIsIngxIiwieTEiLCJ4MiIsInkyIiwiZG90IiwidSIsInYiLCJ0aGlzIiwib3RoZXIiLCJWZWN0b3IyIiwiY3Jvc3NSYXciLCJjcm9zcyIsImxlblJhdyIsIk1hdGgiLCJzcXJ0IiwicG93IiwibGVuIiwibm9ybWFsaXplUmF3IiwiYnkiLCJjb2VmIiwibXVsUmF3Iiwibm9ybWFsaXplIiwiZXF1YWxzUmF3IiwiYWJzIiwiZXF1YWxzIiwiYWRkUmF3IiwiYWRkIiwic3ViUmF3Iiwic3ViIiwibXVsIiwiaW50ZXJzZWN0aW9uVGltZXNSYXciLCJmeCIsImZ5IiwidHgiLCJ0eSIsInN4Iiwic3kiLCJleCIsImV5IiwiZGV0IiwiaW50ZXJzZWN0aW9uVGltZXMiLCJmcm9tIiwidG8iLCJzdGFydCIsImVuZCIsImludGVyc2VjdGlvblJhdyIsInRpbWVzIiwiaW50ZXJzZWN0aW9uIiwiYW5nbGUiLCJhMSIsImEyIiwiUEkiLCJhY29zIiwidjEiLCJ2MiIsInBvaW50QXQiLCJ0IiwiYmVmb3JlIiwiYWZ0ZXIiLCJpbnRlcnNlY3Rpb25UaW1lc1dpdGgiLCJ1cGRhdGUiLCJkeDEiLCJkeTEiLCJkeDIiLCJkeTIiLCJ2ZXJ0aWNlcyIsImFyZWFCZXR3ZWVuIiwiaSIsImoiLCJhcmVhIiwiYSIsImxlbmd0aCIsInNoYXJlRWRnZSIsImludGVyc2VjdGlvbldpdGgiLCJsaW5lIiwicmV2ZXJzZSIsInRvU3RyaW5nIiwibWFwIiwidG9GaXhlZCIsImpvaW4iLCJyZW5kZXJlciIsImRyYWdnZWRMaW5lIiwiZHJhZ2dlZFZlY3RvcjIiLCJzZWxlY3RlZExpbmUiLCJob3ZlcmVkTGluZSIsImxpbmVzIiwiaW50ZXJzZWN0aW9uUG9pbnRzIiwic2V0TW91c2VEb3duSGFuZGxlciIsImV2ZW50IiwiY2xpY2tlZExpbmUiLCJjbGlja2VkVmVjdG9yMiIsIkxpbmUiLCJjbGllbnRYIiwiY2xpZW50WSIsImFkZExpbmUiLCJzZXRNb3VzZVVwSGFuZGxlciIsImRyYXdMaW5lIiwic2V0TW91c2VNb3ZlSGFuZGxlciIsIm1vdmVtZW50WCIsIm1vdmVtZW50WSIsInVwZGF0ZUludGVyc2VjdGlvblRpbWVzIiwiYWRkSW50ZXJzZWN0aW9uVGltZXMiLCJwdXNoIiwibmV3SW50ZXJzZWN0aW9uVGltZXMiLCJuZXdJbnRlcnNlY3Rpb25Qb2ludHMiLCJOYU4iLCJyZW5kZXJJbnRlcnNlY3Rpb25zIiwiaW5kZXgiLCJpbmRleE9mIiwiY2xlYXJJbnRlcnNlY3Rpb25zIiwiZm9yRWFjaCIsImludGVyc2VjdGlvblBvaW50IiwiZHJhd1BvaW50IiwiY2xlYXJQb2x5Z29ucyIsInBhcnRpYWxzIiwiYnVpbGRQYXJ0aWFsc0Zyb21JbnRlcnNlY3Rpb25UaW1lcyIsImJ1aWxkUG9seWdvbnNGcm9tUGFydGlhbHMiLCJwb2x5Z29uIiwiZHJhd1BvbHlnb24iLCJ0ZXN0U2lkZSIsInciLCJwYXJ0aWFsc0FyZUNvbm5lY3RlZCIsInAxIiwicDIiLCJidWlsZFBhcnRpYWxzRnJvbVBvaW50cyIsInBvaW50cyIsInBhcnRzIiwiUG9seWdvbiIsImNvbnNvbGUiLCJsb2ciLCJpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXkiLCJpbnRlcnNlY3Rpb25UaW1lc0F0SSIsIl8iLCJmaWx0ZXIiLCJpc05hTiIsInNvcnQiLCJsb2NhbEluZGV4IiwibG9jYWxJbnRlckluZGV4IiwiZm9yZWlnbkluZGV4IiwiaW50ZXIiLCJwcmV2TG9jYWxJbnRlckluZGV4IiwibmV4dExvY2FsSW50ZXJJbmRleCIsImZvcmVpZ25JbnRlckluZGV4IiwiZmluZEluZGV4IiwiZm9yZWlnbmlzUmlnaHRTaWRlZCIsInByZXZGb3JlaWduSW50ZXJJbmRleCIsIm5leHRGb3JlaWduSW50ZXJJbmRleCIsInByZXZMb2NhbEludGVyIiwibmV4dExvY2FsSW50ZXIiLCJwcmV2Rm9yZWlnbkludGVyIiwibmV4dEZvcmVpZ25JbnRlciIsInBvbHlnb25zIiwic3BsaWNlIiwicG9wIiwicCIsImdUZW1wbGF0ZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwic2V0QXR0cmlidXRlIiwibGluZVRlbXBsYXRlIiwiYW5jaG9yVGVtcGxhdGUiLCJhcHBlbmRDaGlsZCIsImNsb25lTm9kZSIsInBvaW50VGVtcGxhdGUiLCJwb2x5Z29uVGVtcGxhdGUiLCJzdmdSZW5kZXJlciIsInN2ZyIsImludGVyc2VjdGlvbkNvbnRhaW5lciIsInBvbHlnb25Db250YWluZXIiLCJzdmdHQnlMaW5lIiwiTWFwIiwibGluZUJ5U3ZnRyIsImNsaWNrSGFuZGxlcldyYXBwZXIiLCJjbGlja0hhbmRsZXIiLCJlbGVtZW50QXQiLCJlbGVtZW50RnJvbVBvaW50IiwiZ2V0IiwicGFyZW50Tm9kZSIsIlNWR1BhdGhFbGVtZW50IiwiY2hpbGRyZW4iLCJTVkdMaW5lRWxlbWVudCIsIm9uTW91c2VEb3duIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbk1vdXNlVXAiLCJvbk1vdXNlTW92ZSIsImlzSG92ZXJlZCIsImlzU2VsZWN0ZWQiLCJzdmdHIiwiaGFzIiwic2V0Iiwic3ZnTGluZSIsInN2Z1BhdGhBbmNob3JTdGFydCIsInN2Z1BhdGhBbmNob3JFbmQiLCJlcmFzZUxpbmUiLCJyZW1vdmVDaGlsZCIsImRlbGV0ZSIsInBvaW50Iiwic3ZnQ2lyY2xlIiwiY2xlYXJDb250YWluZXIiLCJjb250YWluZXIiLCJmaXJzdENoaWxkIiwic3ZnUGF0aCIsImZsb29yIiwicmFuZG9tIiwi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SXRHLEdBQzdCa0gsSUFDRnJMLEtBQUsrSixJQUFJNkIsWUFBWVAsR0FDckJyTCxLQUFLa0ssV0FBVzJCLE9BQU8xSCxLQUczQixZQUFBc0MsVUFBQSxTQUFVcUYsR0FDUixJQUFNQyxFQUFZbkMsRUFBY0QsWUFDaENvQyxFQUFVeEMsYUFBYSxLQUFNdUMsRUFBTXhNLEVBQUVpRixXQUNyQ3dILEVBQVV4QyxhQUFhLEtBQU11QyxFQUFNdk0sRUFBRWdGLFdBQ3JDdkUsS0FBS2dLLHNCQUFzQk4sWUFBWXFDLElBRWpDLFlBQUFDLGVBQVIsU0FBdUJDLEdBQ3JCLEtBQU9BLEVBQVVDLFlBQ2ZELEVBQVVMLFlBQVlLLEVBQVVDLGFBR3BDLFlBQUE1RixtQkFBQSxXQUNFdEcsS0FBS2dNLGVBQWVoTSxLQUFLZ0ssd0JBRTNCLFlBQUFqRCxZQUFBLFNBQVlELEdBQ1YsSUFBTXFGLEVBQVV0QyxFQUFnQkYsWUFDaEN3QyxFQUFRNUMsYUFBYSxJQUFLLEtBQU96QyxFQUFRcEQsU0FBU1ksS0FBSSxTQUFBdkUsR0FBSyxPQUFHQSxFQUFFVCxFQUFFaUYsVUFBUyxJQUFJeEUsRUFBRVIsRUFBRWdGLGFBQWFDLEtBQUssT0FBUyxLQUM5RzJILEVBQVE1QyxhQUFhLE9BQVEsS0FBT2pKLEtBQUs4TCxNQUFNLFNBQW1COUwsS0FBSytMLFVBQVksS0FBS2hJLFNBQVMsS0FDakdyRSxLQUFLaUssaUJBQWlCUCxZQUFZeUMsSUFFcEMsWUFBQXpGLGNBQUEsV0FDRTFHLEtBQUtnTSxlQUFlaE0sS0FBS2lLLG1CQUU3QixFQXBIQSxJQ2hDZ0IsSUFBSXFDLEVBQVF4QyxHQUNmVCxTQUFTa0QsY0FBYyxRQUMvQjdDLFlBQVlJLEVBQVlDLE0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVQU0lMT04gPSAzO1xuXG5leHBvcnQgY2xhc3MgVmVjdG9yMiB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB4ID0gMCwgcHVibGljIHkgPSAwKSB7fVxuICBzdGF0aWMgZG90UmF3KHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiB4MSAqIHgyICsgeTEgKiB5MjtcbiAgfVxuICBzdGF0aWMgZG90KHU6IFZlY3RvcjIsIHY6IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmRvdFJhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIGRvdChvdGhlcjogVmVjdG9yMik6IG51bWJlciB7XG4gICAgcmV0dXJuIFZlY3RvcjIuZG90KHRoaXMsIG90aGVyKTtcbiAgfVxuICBzdGF0aWMgY3Jvc3NSYXcoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIHgxICogeTIgLSB4MiAqIHkxO1xuICB9XG4gIHN0YXRpYyBjcm9zcyh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jcm9zc1Jhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIGNyb3NzKG90aGVyOiBWZWN0b3IyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5jcm9zcyh0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIGxlblJhdyh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh4LCAyKSArIE1hdGgucG93KHksIDIpKTtcbiAgfVxuICBzdGF0aWMgbGVuKHU6IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmxlblJhdyh1LngsIHUueSk7XG4gIH1cbiAgbGVuKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIFZlY3RvcjIubGVuKHRoaXMpO1xuICB9XG4gIHN0YXRpYyBub3JtYWxpemVSYXcoeDogbnVtYmVyLCB5OiBudW1iZXIsIGJ5OiBudW1iZXIgPSAxKTogVmVjdG9yMiB7XG4gICAgY29uc3QgY29lZiA9IGJ5IC8gdGhpcy5sZW5SYXcoeCwgeSk7XG4gICAgcmV0dXJuIHRoaXMubXVsUmF3KHgsIHksIGNvZWYpO1xuICB9XG4gIHN0YXRpYyBub3JtYWxpemUodTogVmVjdG9yMiwgYnk6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5ub3JtYWxpemVSYXcodS54LCB1LnksIGJ5KTtcbiAgfVxuICBub3JtYWxpemUoYnk6IG51bWJlciA9IDEpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5ub3JtYWxpemUodGhpcywgYnkpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHNSYXcoeDE6IG51bWJlciwgeTE6IG51bWJlciwgeDI6IG51bWJlciwgeTI6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBNYXRoLmFicyh4MSAtIHgyKSA8IEVQU0lMT04gJiYgTWF0aC5hYnMoeTEgLSB5MikgPCBFUFNJTE9OO1xuICAgIC8vIHJldHVybiB4MSA9PT0geDIgJiYgeTEgPT09IHkyO1xuICB9XG4gIHN0YXRpYyBlcXVhbHModTogVmVjdG9yMiwgdjogVmVjdG9yMik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmVxdWFsc1Jhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIGVxdWFscyhvdGhlcjogVmVjdG9yMik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBWZWN0b3IyLmVxdWFscyh0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIGFkZFJhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHgxICsgeDIsIHkxICsgeTIpO1xuICB9XG4gIHN0YXRpYyBhZGQodTogVmVjdG9yMiwgdjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLmFkZFJhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIGFkZChvdGhlcjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiBWZWN0b3IyLmFkZCh0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIHN1YlJhdyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKHgxIC0geDIsIHkxIC0geTIpO1xuICB9XG4gIHN0YXRpYyBzdWIodTogVmVjdG9yMiwgdjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLnN1YlJhdyh1LngsIHUueSwgdi54LCB2LnkpO1xuICB9XG4gIHN1YihvdGhlcjogVmVjdG9yMik6IFZlY3RvcjIge1xuICAgIHJldHVybiBWZWN0b3IyLnN1Yih0aGlzLCBvdGhlcik7XG4gIH1cbiAgc3RhdGljIG11bFJhdyh4OiBudW1iZXIsIHk6IG51bWJlciwgYnk6IG51bWJlcik6IFZlY3RvcjIge1xuICAgIHJldHVybiBuZXcgVmVjdG9yMih4ICogYnksIHkgKiBieSk7XG4gIH1cbiAgc3RhdGljIG11bCh1OiBWZWN0b3IyLCBieTogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMubXVsUmF3KHUueCwgdS55LCBieSk7XG4gIH1cbiAgbXVsKGJ5OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gVmVjdG9yMi5tdWwodGhpcywgYnkpO1xuICB9XG4gIHN0YXRpYyBpbnRlcnNlY3Rpb25UaW1lc1JhdyhcbiAgICBmeDogbnVtYmVyLCBmeTogbnVtYmVyLCB0eDogbnVtYmVyLCB0eTogbnVtYmVyLFxuICAgIHN4OiBudW1iZXIsIHN5OiBudW1iZXIsIGV4OiBudW1iZXIsIGV5OiBudW1iZXJcbiAgKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgZGV0ID0gdGhpcy5jcm9zc1Jhdyh0eCAtIGZ4LCB0eSAtIGZ5LCBleCAtIHN4LCBleSAtIHN5KTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoXG4gICAgICB0aGlzLmNyb3NzUmF3KGV4IC0gc3gsIGV5IC0gc3ksIGZ4IC0gc3gsIGZ5IC0gc3kpIC8gZGV0LFxuICAgICAgdGhpcy5jcm9zc1Jhdyh0eCAtIGZ4LCB0eSAtIGZ5LCBmeCAtIHN4LCBmeSAtIHN5KSAvIGRldFxuICAgICk7XG4gIH1cbiAgc3RhdGljIGludGVyc2VjdGlvblRpbWVzKFxuICAgIGZyb206IFZlY3RvcjIsIHRvOiBWZWN0b3IyLCBzdGFydDogVmVjdG9yMiwgZW5kOiBWZWN0b3IyXG4gICk6IFZlY3RvcjIgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLmludGVyc2VjdGlvblRpbWVzUmF3KGZyb20ueCwgZnJvbS55LCB0by54LCB0by55LCBzdGFydC54LCBzdGFydC55LCBlbmQueCwgZW5kLnkpO1xuICB9XG4gIGludGVyc2VjdGlvblRpbWVzKHRvOiBWZWN0b3IyLCBzdGFydDogVmVjdG9yMiwgZW5kOiBWZWN0b3IyKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIFZlY3RvcjIuaW50ZXJzZWN0aW9uVGltZXModGhpcywgdG8sIHN0YXJ0LCBlbmQpO1xuICB9XG4gIHN0YXRpYyBpbnRlcnNlY3Rpb25SYXcoXG4gICAgZng6IG51bWJlciwgZnk6IG51bWJlciwgdHg6IG51bWJlciwgdHk6IG51bWJlcixcbiAgICBzeDogbnVtYmVyLCBzeTogbnVtYmVyLCBleDogbnVtYmVyLCBleTogbnVtYmVyXG4gICk6IFZlY3RvcjIgfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IHRpbWVzID0gdGhpcy5pbnRlcnNlY3Rpb25UaW1lc1JhdyhmeCwgZnksIHR4LCB0eSwgc3gsIHN5LCBleCwgZXkpO1xuICAgIGlmICh0aW1lcykge1xuICAgICAgdGltZXMueSA9IGZ5ICsgKHR5IC0gZnkpICogdGltZXMueDtcbiAgICAgIHRpbWVzLnggPSBmeCArICh0eCAtIGZ4KSAqIHRpbWVzLng7XG4gICAgICByZXR1cm4gdGltZXM7XG4gICAgfVxuICB9XG4gIHN0YXRpYyBpbnRlcnNlY3Rpb24oZnJvbTogVmVjdG9yMiwgdG86IFZlY3RvcjIsIHN0YXJ0OiBWZWN0b3IyLCBlbmQ6IFZlY3RvcjIpOiBWZWN0b3IyIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnNlY3Rpb25SYXcoZnJvbS54LCBmcm9tLnksIHRvLngsIHRvLnksIHN0YXJ0LngsIHN0YXJ0LnksIGVuZC54LCBlbmQueSk7XG4gIH1cbiAgaW50ZXJzZWN0aW9uKHRvOiBWZWN0b3IyLCBzdGFydDogVmVjdG9yMiwgZW5kOiBWZWN0b3IyKTogVmVjdG9yMiB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIFZlY3RvcjIuaW50ZXJzZWN0aW9uKHRoaXMsIHRvLCBzdGFydCwgZW5kKTtcbiAgfVxuICBhbmdsZShvdGhlcj86IFZlY3RvcjIpOiBudW1iZXIge1xuICAgIGlmIChvdGhlcikge1xuICAgICAgIGNvbnN0IGExID0gdGhpcy5hbmdsZSgpO1xuICAgICAgIGNvbnN0IGEyID0gb3RoZXIuYW5nbGUoKTtcbiAgICAgICBpZiAoYTIgPCBhMSkge1xuICAgICAgICByZXR1cm4gYTIgKyAyICogTWF0aC5QSSAtIGExO1xuICAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBhMiAtIGExO1xuICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMueSA+IDApIHtcbiAgICAgIHJldHVybiBNYXRoLmFjb3ModGhpcy54IC8gdGhpcy5sZW4oKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAyICogTWF0aC5QSSAtIE1hdGguYWNvcyh0aGlzLnggLyB0aGlzLmxlbigpKTtcbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xuXG5leHBvcnQgY2xhc3MgTGluZSB7XG4gIHYxOiBWZWN0b3IyO1xuICB2MjogVmVjdG9yMjtcbiAgY29uc3RydWN0b3IoXG4gICAgeDE/OiBudW1iZXIsXG4gICAgeTE/OiBudW1iZXIsXG4gICAgeDI/OiBudW1iZXIsXG4gICAgeTI/OiBudW1iZXJcbiAgKSB7XG4gICAgdGhpcy52MSA9IG5ldyBWZWN0b3IyKHgxLCB5MSk7XG4gICAgdGhpcy52MiA9IG5ldyBWZWN0b3IyKHgyLCB5Mik7XG4gIH1cbiAgZ2V0IHgxKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudjEueDtcbiAgfVxuICBnZXQgeTEoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52MS55O1xuICB9XG4gIGdldCB4MigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnYyLng7XG4gIH1cbiAgZ2V0IHkyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudjIueTtcbiAgfVxuICBsZW4oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy52Mi5zdWIodGhpcy52MSkubGVuKCk7XG4gIH1cbiAgcG9pbnRBdCh0OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy52MS5hZGQodGhpcy52Mi5zdWIodGhpcy52MSkubXVsKHQpKTtcbiAgfVxuICBiZWZvcmUodDogbnVtYmVyKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMudjEuYWRkKHRoaXMudjIuc3ViKHRoaXMudjEpLm11bCgtdCAvIHRoaXMubGVuKCkpKTtcbiAgfVxuICBhZnRlcih0OiBudW1iZXIpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy52MS5hZGQodGhpcy52Mi5zdWIodGhpcy52MSkubXVsKCh0aGlzLmxlbigpICsgdCkgLyB0aGlzLmxlbigpKSk7XG4gIH1cbiAgaW50ZXJzZWN0aW9uVGltZXNXaXRoKG90aGVyOiBMaW5lKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMudjEuaW50ZXJzZWN0aW9uVGltZXModGhpcy52Miwgb3RoZXIudjEsIG90aGVyLnYyKTtcbiAgfVxuICB1cGRhdGUoZHgxID0gMCwgZHkxID0gMCwgZHgyID0gMCwgZHkyID0gMCk6IHZvaWQge1xuICAgIHRoaXMudjEueCArPSBkeDE7XG4gICAgdGhpcy52MS55ICs9IGR5MTtcbiAgICB0aGlzLnYyLnggKz0gZHgyO1xuICAgIHRoaXMudjIueSArPSBkeTI7XG4gIH1cbn0iLCJpbXBvcnQgeyBMaW5lIH0gZnJvbSBcIi4vbGluZVwiO1xuaW1wb3J0IHsgVmVjdG9yMiB9IGZyb20gXCIuL3ZlY3RvcjJcIjtcblxuZXhwb3J0IGNsYXNzIFBvbHlnb24ge1xuICBjb25zdHJ1Y3RvcihyZWFkb25seSB2ZXJ0aWNlczogVmVjdG9yMltdID0gW10pIHtcblxuICB9XG4gIHByaXZhdGUgYXJlYUJldHdlZW4oaTogbnVtYmVyLCBqOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiAodGhpcy52ZXJ0aWNlc1tqXS54IC0gdGhpcy52ZXJ0aWNlc1tpXS54KSAqICh0aGlzLnZlcnRpY2VzW2ldLnkgKyB0aGlzLnZlcnRpY2VzW2pdLnkpIC8gMjtcbiAgfVxuICBhcmVhKCk6IG51bWJlciB7XG4gICAgbGV0IGEgPSAwO1xuICAgIGxldCBpID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGggLSAxO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGorKykge1xuICAgICAgYSArPSB0aGlzLmFyZWFCZXR3ZWVuKGksIGopO1xuICAgICAgaSA9IGo7XG4gICAgfVxuICAgIHJldHVybiBhO1xuICB9XG4gIHNoYXJlRWRnZSh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgbGV0IGkgPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAtIDE7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAodGhpcy52ZXJ0aWNlc1tpXS5lcXVhbHModSkgJiYgdGhpcy52ZXJ0aWNlc1tqXS5lcXVhbHModikpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBpID0gajtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGludGVyc2VjdGlvbldpdGgobGluZTogTGluZSkge1xuICAgIFxuICB9XG4gIHJldmVyc2UoKTogdm9pZCB7XG4gICAgdGhpcy52ZXJ0aWNlcy5yZXZlcnNlKCk7XG4gIH1cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy52ZXJ0aWNlcy5sZW5ndGh9IHBvaW50czogYCArIHRoaXMudmVydGljZXMubWFwKHYgPT4gYCgke3YueC50b0ZpeGVkKCl9LCAke3YueS50b0ZpeGVkKCl9KWApLmpvaW4oJywgJykgKyBgIChhcmVhOiAke3RoaXMuYXJlYSgpLnRvRml4ZWQoKX0pYDtcbiAgfVxufSIsImltcG9ydCB7IFBvbHBsb3RSZW5kZXJlciB9IGZyb20gXCIuL2ludGVyZmFjZXMvcG9scGxvdC1yZW5kZXJlclwiO1xuaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuL2xpbmVcIjtcbmltcG9ydCB7IFBvbHlnb24gfSBmcm9tIFwiLi9wb2x5Z29uXCI7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xuXG5leHBvcnQgY2xhc3MgUG9scGxvdCB7XG4gIGxpbmVzOiBMaW5lW10gPSBbXTtcbiAgaW50ZXJzZWN0aW9uVGltZXM6IG51bWJlcltdW10gPSBbXTtcbiAgaW50ZXJzZWN0aW9uUG9pbnRzOiBWZWN0b3IyW11bXSA9IFtdO1xuICBjb25zdHJ1Y3RvcihyZWFkb25seSByZW5kZXJlcjogUG9scGxvdFJlbmRlcmVyKSB7XG4gICAgbGV0IGRyYWdnZWRMaW5lOiBMaW5lO1xuICAgIGxldCBkcmFnZ2VkVmVjdG9yMjogVmVjdG9yMjtcblxuICAgIHRoaXMucmVuZGVyZXIuc2V0TW91c2VEb3duSGFuZGxlcigoZXZlbnQsIGNsaWNrZWRMaW5lLCBjbGlja2VkVmVjdG9yMikgPT4ge1xuICAgICAgZHJhZ2dlZExpbmUgPSBjbGlja2VkTGluZSB8fCBudWxsO1xuICAgICAgZHJhZ2dlZFZlY3RvcjIgPSBjbGlja2VkVmVjdG9yMiB8fCBudWxsO1xuICAgICAgaWYgKCFkcmFnZ2VkTGluZSkge1xuICAgICAgICBkcmFnZ2VkTGluZSA9IG5ldyBMaW5lKGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFksIGV2ZW50LmNsaWVudFgsIGV2ZW50LmNsaWVudFkpO1xuICAgICAgICBkcmFnZ2VkVmVjdG9yMiA9IGRyYWdnZWRMaW5lLnYyO1xuICAgICAgICB0aGlzLmFkZExpbmUoZHJhZ2dlZExpbmUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbGV0IHNlbGVjdGVkTGluZTogTGluZTtcbiAgICB0aGlzLnJlbmRlcmVyLnNldE1vdXNlVXBIYW5kbGVyKChldmVudCwgY2xpY2tlZExpbmUsIGNsaWNrZWRWZWN0b3IyKSA9PiB7XG4gICAgICBpZiAoY2xpY2tlZExpbmUpIHtcbiAgICAgICAgaWYgKHNlbGVjdGVkTGluZSAmJiBzZWxlY3RlZExpbmUgIT09IGNsaWNrZWRMaW5lKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShzZWxlY3RlZExpbmUsIGNsaWNrZWRMaW5lID09PSBob3ZlcmVkTGluZSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIHNlbGVjdGVkTGluZSA9IGNsaWNrZWRMaW5lO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdMaW5lKHNlbGVjdGVkTGluZSwgY2xpY2tlZExpbmUgPT09IGhvdmVyZWRMaW5lLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0ZWRMaW5lKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoc2VsZWN0ZWRMaW5lLCBjbGlja2VkTGluZSA9PT0gaG92ZXJlZExpbmUsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGRyYWdnZWRMaW5lID0gbnVsbDtcbiAgICAgIGRyYWdnZWRWZWN0b3IyID0gbnVsbDtcbiAgICB9KTtcblxuICAgIGxldCBob3ZlcmVkTGluZTogTGluZTtcbiAgICB0aGlzLnJlbmRlcmVyLnNldE1vdXNlTW92ZUhhbmRsZXIoKGV2ZW50LCBjbGlja2VkTGluZSwgY2xpY2tlZFZlY3RvcjIpID0+IHtcbiAgICAgIGlmIChjbGlja2VkTGluZSkge1xuICAgICAgICBpZiAoaG92ZXJlZExpbmUgJiYgaG92ZXJlZExpbmUgIT09IGNsaWNrZWRMaW5lKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShob3ZlcmVkTGluZSwgZmFsc2UsIGNsaWNrZWRMaW5lID09PSBzZWxlY3RlZExpbmUpO1xuICAgICAgICB9XG4gICAgICAgIGhvdmVyZWRMaW5lID0gY2xpY2tlZExpbmU7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoaG92ZXJlZExpbmUsIHRydWUsIGNsaWNrZWRMaW5lID09PSBzZWxlY3RlZExpbmUpOyBcbiAgICAgIH0gZWxzZSBpZiAoaG92ZXJlZExpbmUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShob3ZlcmVkTGluZSwgZmFsc2UsIGNsaWNrZWRMaW5lID09PSBzZWxlY3RlZExpbmUpO1xuICAgICAgICBob3ZlcmVkTGluZSA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoZHJhZ2dlZExpbmUpIHtcbiAgICAgICAgaWYgKGRyYWdnZWRWZWN0b3IyKSB7XG4gICAgICAgICAgZHJhZ2dlZFZlY3RvcjIueCA9IGV2ZW50LmNsaWVudFg7XG4gICAgICAgICAgZHJhZ2dlZFZlY3RvcjIueSA9IGV2ZW50LmNsaWVudFk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZHJhZ2dlZExpbmUudXBkYXRlKGV2ZW50Lm1vdmVtZW50WCwgZXZlbnQubW92ZW1lbnRZLCBldmVudC5tb3ZlbWVudFgsIGV2ZW50Lm1vdmVtZW50WSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVJbnRlcnNlY3Rpb25UaW1lcyhkcmFnZ2VkTGluZSk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuZHJhd0xpbmUoZHJhZ2dlZExpbmUsIGRyYWdnZWRMaW5lID09PSBob3ZlcmVkTGluZSwgZHJhZ2dlZExpbmUgPT09IHNlbGVjdGVkTGluZSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgYWRkTGluZShsaW5lOiBMaW5lKTogdm9pZCB7XG4gICAgdGhpcy5hZGRJbnRlcnNlY3Rpb25UaW1lcyhsaW5lKTtcbiAgICB0aGlzLmxpbmVzLnB1c2gobGluZSk7XG4gICAgdGhpcy5yZW5kZXJlci5kcmF3TGluZShsaW5lLCBmYWxzZSwgZmFsc2UpO1xuICB9XG4gIGFkZEludGVyc2VjdGlvblRpbWVzKFxuICAgIGxpbmU6IExpbmUsXG4gICAgbGluZXMgPSB0aGlzLmxpbmVzLFxuICAgIGludGVyc2VjdGlvblRpbWVzID0gdGhpcy5pbnRlcnNlY3Rpb25UaW1lcyxcbiAgICBpbnRlcnNlY3Rpb25Qb2ludHMgPSB0aGlzLmludGVyc2VjdGlvblBvaW50c1xuICApOiB2b2lkIHtcbiAgICBjb25zdCBuZXdJbnRlcnNlY3Rpb25UaW1lczogbnVtYmVyW10gPSBbXTtcbiAgICBjb25zdCBuZXdJbnRlcnNlY3Rpb25Qb2ludHM6IFZlY3RvcjJbXSA9IFtdO1xuICAgIGxldCB0aW1lczogVmVjdG9yMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aW1lcyA9IGxpbmVzW2ldLmludGVyc2VjdGlvblRpbWVzV2l0aChsaW5lKTtcbiAgICAgIGludGVyc2VjdGlvblRpbWVzW2ldLnB1c2godGltZXMueCk7XG4gICAgICBpbnRlcnNlY3Rpb25Qb2ludHNbaV0ucHVzaChcbiAgICAgICAgMCA8PSB0aW1lcy54ICYmIHRpbWVzLnggPD0gMSAmJiAwIDw9IHRpbWVzLnkgJiYgdGltZXMueSA8PSAxXG4gICAgICAgICAgPyBsaW5lc1tpXS52MS5hZGQobGluZXNbaV0udjIuc3ViKGxpbmVzW2ldLnYxKS5tdWwodGltZXMueCkpXG4gICAgICAgICAgOiBudWxsXG4gICAgICApO1xuICAgICAgbmV3SW50ZXJzZWN0aW9uVGltZXMucHVzaCh0aW1lcy55KTtcbiAgICAgIG5ld0ludGVyc2VjdGlvblBvaW50cy5wdXNoKG51bGwpO1xuICAgIH1cbiAgICBuZXdJbnRlcnNlY3Rpb25UaW1lcy5wdXNoKE5hTik7XG4gICAgbmV3SW50ZXJzZWN0aW9uUG9pbnRzLnB1c2gobnVsbCk7XG4gICAgaW50ZXJzZWN0aW9uVGltZXMucHVzaChuZXdJbnRlcnNlY3Rpb25UaW1lcyk7XG4gICAgaW50ZXJzZWN0aW9uUG9pbnRzLnB1c2gobmV3SW50ZXJzZWN0aW9uUG9pbnRzKTtcbiAgICB0aGlzLnJlbmRlckludGVyc2VjdGlvbnMoKTtcbiAgfVxuICB1cGRhdGVJbnRlcnNlY3Rpb25UaW1lcyhcbiAgICBsaW5lOiBMaW5lLFxuICAgIGxpbmVzID0gdGhpcy5saW5lcyxcbiAgICBpbnRlcnNlY3Rpb25UaW1lcyA9IHRoaXMuaW50ZXJzZWN0aW9uVGltZXMsXG4gICAgaW50ZXJzZWN0aW9uUG9pbnRzID0gdGhpcy5pbnRlcnNlY3Rpb25Qb2ludHNcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgaW5kZXggPSBsaW5lcy5pbmRleE9mKGxpbmUpO1xuICAgIGxldCB0aW1lczogVmVjdG9yMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSAhPT0gaW5kZXgpIHtcbiAgICAgICAgdGltZXMgPSBsaW5lc1tpXS5pbnRlcnNlY3Rpb25UaW1lc1dpdGgobGluZSk7XG4gICAgICAgIGludGVyc2VjdGlvblRpbWVzW2ldW2luZGV4XSA9IHRpbWVzLng7XG4gICAgICAgIGludGVyc2VjdGlvblRpbWVzW2luZGV4XVtpXSA9IHRpbWVzLnk7XG4gICAgICAgIGlmIChpIDwgaW5kZXgpIHtcbiAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludHNbaV1baW5kZXhdID0gMCA8PSB0aW1lcy54ICYmIHRpbWVzLnggPD0gMSAmJiAwIDw9IHRpbWVzLnkgJiYgdGltZXMueSA8PSAxXG4gICAgICAgICAgICA/IGxpbmVzW2ldLnYxLmFkZChsaW5lc1tpXS52Mi5zdWIobGluZXNbaV0udjEpLm11bCh0aW1lcy54KSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludHNbaW5kZXhdW2ldID0gMCA8PSB0aW1lcy54ICYmIHRpbWVzLnggPD0gMSAmJiAwIDw9IHRpbWVzLnkgJiYgdGltZXMueSA8PSAxXG4gICAgICAgICAgICA/IGxpbmVzW2ldLnYxLmFkZChsaW5lc1tpXS52Mi5zdWIobGluZXNbaV0udjEpLm11bCh0aW1lcy54KSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlckludGVyc2VjdGlvbnMoKTtcbiAgfVxuICByZW5kZXJJbnRlcnNlY3Rpb25zKCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyZXIuY2xlYXJJbnRlcnNlY3Rpb25zKCk7XG4gICAgdGhpcy5pbnRlcnNlY3Rpb25Qb2ludHMuZm9yRWFjaChpbnRlcnNlY3Rpb25Qb2ludHMgPT4ge1xuICAgICAgaW50ZXJzZWN0aW9uUG9pbnRzLmZvckVhY2goaW50ZXJzZWN0aW9uUG9pbnQgPT4ge1xuICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUG9pbnQpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcmVyLmRyYXdQb2ludChpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMucmVuZGVyZXIuY2xlYXJQb2x5Z29ucygpO1xuICAgIGNvbnN0IHBhcnRpYWxzID0gdGhpcy5idWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvblRpbWVzKCk7XG4gICAgdGhpcy5idWlsZFBvbHlnb25zRnJvbVBhcnRpYWxzKHBhcnRpYWxzKVxuICAgICAgLmZvckVhY2gocG9seWdvbiA9PiB0aGlzLnJlbmRlcmVyLmRyYXdQb2x5Z29uKHBvbHlnb24pKTtcbiAgfVxuICB0ZXN0U2lkZSh1OiBWZWN0b3IyLCB2OiBWZWN0b3IyLCB3OiBWZWN0b3IyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHYuc3ViKHUpLmNyb3NzKHcuc3ViKHUpKSA+IDA7XG4gIH1cbiAgcGFydGlhbHNBcmVDb25uZWN0ZWQocDE6IFBvbHlnb24sIHAyOiBQb2x5Z29uKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHAxLnZlcnRpY2VzW3AxLnZlcnRpY2VzLmxlbmd0aCAtIDJdLmVxdWFscyhwMi52ZXJ0aWNlc1swXSkgJiZcbiAgICAgICAgICAgcDEudmVydGljZXNbcDEudmVydGljZXMubGVuZ3RoIC0gMV0uZXF1YWxzKHAyLnZlcnRpY2VzWzFdKTtcbiAgfVxuICBidWlsZFBhcnRpYWxzRnJvbVBvaW50cyhcbiAgICBpbnRlcnNlY3Rpb246IFZlY3RvcjIsXG4gICAgcG9pbnRzOiBbVmVjdG9yMiwgVmVjdG9yMiwgVmVjdG9yMiwgVmVjdG9yMl0sXG4gICk6IFBvbHlnb25bXSB7XG4gICAgY29uc3QgcGFydHM6IFtudW1iZXIsIG51bWJlcl1bXSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocG9pbnRzW2ldKSB7XG4gICAgICAgIGxldCBqID0gaSArIDE7XG4gICAgICAgIGlmIChqID09PSBwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgaiA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKCFwb2ludHNbal0pwqB7XG4gICAgICAgICAgaisrO1xuICAgICAgICAgIGlmIChqID09PSBwb2ludHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBqID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgIT09IGopIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKFtpLCBqXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzLm1hcCgoW2ksIGpdKSA9PiB7XG4gICAgICBjb25zdCBwb2x5Z29uID0gbmV3IFBvbHlnb24oW3BvaW50c1tpXSwgaW50ZXJzZWN0aW9uLCBwb2ludHNbal1dKTtcbiAgICAgIHJldHVybiBwb2x5Z29uO1xuICAgIH0pO1xuICB9XG4gIGJ1aWxkUGFydGlhbHNGcm9tSW50ZXJzZWN0aW9uVGltZXMoXG4gICAgbGluZXMgPSB0aGlzLmxpbmVzLFxuICAgIGludGVyc2VjdGlvblRpbWVzID0gdGhpcy5pbnRlcnNlY3Rpb25UaW1lc1xuICApOiBQb2x5Z29uW10ge1xuICAgIGNvbnNvbGUubG9nKCdidWlsZFBhcnRpYWxzRnJvbUludGVyc2VjdGlvblRpbWVzJyk7XG4gICAgY29uc29sZS5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcbiAgICAvLyBjb25zb2xlLmxvZygnbGluZXMubGVuZ3RoID0gJywgbGluZXMubGVuZ3RoKTtcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXkgPSBpbnRlcnNlY3Rpb25UaW1lc1xuICAgICAgLm1hcCgoaW50ZXJzZWN0aW9uVGltZXNBdEksIGkpID0+IHtcbiAgICAgICAgcmV0dXJuIGludGVyc2VjdGlvblRpbWVzQXRJXG4gICAgICAgICAgLm1hcCgoXywgaikgPT4gailcbiAgICAgICAgICAuZmlsdGVyKGogPT4ge1xuICAgICAgICAgICAgcmV0dXJuICFpc05hTihpbnRlcnNlY3Rpb25UaW1lc0F0SVtqXSkgJiYgMCA8PSBpbnRlcnNlY3Rpb25UaW1lc0F0SVtqXSAmJiBpbnRlcnNlY3Rpb25UaW1lc0F0SVtqXSA8PSAxICYmXG4gICAgICAgICAgICAgICFpc05hTihpbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSkgJiYgMCA8PSBpbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSAmJiBpbnRlcnNlY3Rpb25UaW1lc1tqXVtpXSA8PSAxO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLnNvcnQoKGksIGopID0+IGludGVyc2VjdGlvblRpbWVzQXRJW2ldIC0gaW50ZXJzZWN0aW9uVGltZXNBdElbal0pO1xuICAgICAgfSk7XG4gICAgLy8gY29uc29sZS5sb2coaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5KTtcbiAgICBjb25zdCBwYXJ0aWFsczogUG9seWdvbltdID0gW107XG4gICAgZm9yIChsZXQgbG9jYWxJbmRleCA9IDA7IGxvY2FsSW5kZXggPCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXkubGVuZ3RoOyBsb2NhbEluZGV4KyspIHtcbiAgICAgIGZvciAobGV0IGxvY2FsSW50ZXJJbmRleCA9IDA7IGxvY2FsSW50ZXJJbmRleCA8IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XS5sZW5ndGg7IGxvY2FsSW50ZXJJbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IGZvcmVpZ25JbmRleCA9IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtsb2NhbEluZGV4XVtsb2NhbEludGVySW5kZXhdO1xuICAgICAgICBpZiAobG9jYWxJbmRleCA8IGZvcmVpZ25JbmRleCkge1xuICAgICAgICAgIGNvbnN0IGludGVyID0gbGluZXNbbG9jYWxJbmRleF0ucG9pbnRBdChpbnRlcnNlY3Rpb25UaW1lc1tsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bbG9jYWxJbnRlckluZGV4XV0pO1xuXG4gICAgICAgICAgY29uc3QgcHJldkxvY2FsSW50ZXJJbmRleCA9IGxvY2FsSW50ZXJJbmRleCAtIDE7XG4gICAgICAgICAgY29uc3QgbmV4dExvY2FsSW50ZXJJbmRleCA9IGxvY2FsSW50ZXJJbmRleCArIDE7XG5cbiAgICAgICAgICBjb25zdCBmb3JlaWduSW50ZXJJbmRleCA9IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtmb3JlaWduSW5kZXhdLmZpbmRJbmRleChpID0+IGkgPT09IGxvY2FsSW5kZXgpO1xuICAgICAgICAgIGNvbnN0IGZvcmVpZ25pc1JpZ2h0U2lkZWQgPSB0aGlzLnRlc3RTaWRlKGxpbmVzW2xvY2FsSW5kZXhdLnYxLCBsaW5lc1tsb2NhbEluZGV4XS52MiwgbGluZXNbZm9yZWlnbkluZGV4XS52MSk7XG4gICAgICAgICAgY29uc3QgcHJldkZvcmVpZ25JbnRlckluZGV4ID0gZm9yZWlnbmlzUmlnaHRTaWRlZCA/IGZvcmVpZ25JbnRlckluZGV4IC0gMSA6IGZvcmVpZ25JbnRlckluZGV4ICsgMTtcbiAgICAgICAgICBjb25zdCBuZXh0Rm9yZWlnbkludGVySW5kZXggPSBmb3JlaWduaXNSaWdodFNpZGVkID8gZm9yZWlnbkludGVySW5kZXggKyAxIDogZm9yZWlnbkludGVySW5kZXggLSAxO1xuXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coYFxuICAgICAgICAgIC8vICAgbG9jYWxJbmRleDogJHtsb2NhbEluZGV4fVxuICAgICAgICAgIC8vICAgbG9jYWxJbnRlcnNlY3Rpb25zICR7aW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2xvY2FsSW5kZXhdXG4gICAgICAgICAgLy8gICAgIC5tYXAoKF8sIGkpID0+IGkgPT09IGxvY2FsSW50ZXJJbmRleCA/IGBbJHtffV1gIDogXylcbiAgICAgICAgICAvLyAgICAgLmpvaW4oJywgJyl9XG4gICAgICAgICAgLy8gICBmb3JlaWduSW5kZXg6ICR7Zm9yZWlnbkluZGV4fVxuICAgICAgICAgIC8vICAgZm9yZWlnbkludGVyc2VjdGlvbnMgJHtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbZm9yZWlnbkluZGV4XVxuICAgICAgICAgIC8vICAgICAubWFwKChfLCBpKSA9PiBpID09PSBmb3JlaWduSW50ZXJJbmRleCA/IGBbJHtffV1gIDogXylcbiAgICAgICAgICAvLyAgICAgLmpvaW4oJywgJyl9XG4gICAgICAgICAgLy8gYCk7XG5cbiAgICAgICAgICBjb25zdCBwcmV2TG9jYWxJbnRlciA9IDAgPCBsb2NhbEludGVySW5kZXhcbiAgICAgICAgICAgID8gbGluZXNbbG9jYWxJbmRleF0ucG9pbnRBdChpbnRlcnNlY3Rpb25UaW1lc1tsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bcHJldkxvY2FsSW50ZXJJbmRleF1dKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IG5leHRMb2NhbEludGVyID0gbG9jYWxJbnRlckluZGV4IDwgaW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2xvY2FsSW5kZXhdLmxlbmd0aCAtIDFcbiAgICAgICAgICAgID8gbGluZXNbbG9jYWxJbmRleF0ucG9pbnRBdChpbnRlcnNlY3Rpb25UaW1lc1tsb2NhbEluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbbG9jYWxJbmRleF1bbmV4dExvY2FsSW50ZXJJbmRleF1dKVxuICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgIGNvbnN0IHByZXZGb3JlaWduSW50ZXIgPSAtMSA8IHByZXZGb3JlaWduSW50ZXJJbmRleCAmJiBwcmV2Rm9yZWlnbkludGVySW5kZXggPCBpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbZm9yZWlnbkluZGV4XS5sZW5ndGhcbiAgICAgICAgICAgID8gbGluZXNbZm9yZWlnbkluZGV4XS5wb2ludEF0KGludGVyc2VjdGlvblRpbWVzW2ZvcmVpZ25JbmRleF1baW50ZXJzZWN0aW9uVGltZXNTb3J0ZWRJbmRleEFycmF5W2ZvcmVpZ25JbmRleF1bcHJldkZvcmVpZ25JbnRlckluZGV4XV0pXG4gICAgICAgICAgICA6IG51bGw7XG4gICAgICAgICAgY29uc3QgbmV4dEZvcmVpZ25JbnRlciA9IC0xIDwgbmV4dEZvcmVpZ25JbnRlckluZGV4ICYmIG5leHRGb3JlaWduSW50ZXJJbmRleCA8IGludGVyc2VjdGlvblRpbWVzU29ydGVkSW5kZXhBcnJheVtmb3JlaWduSW5kZXhdLmxlbmd0aFxuICAgICAgICAgICAgPyBsaW5lc1tmb3JlaWduSW5kZXhdLnBvaW50QXQoaW50ZXJzZWN0aW9uVGltZXNbZm9yZWlnbkluZGV4XVtpbnRlcnNlY3Rpb25UaW1lc1NvcnRlZEluZGV4QXJyYXlbZm9yZWlnbkluZGV4XVtuZXh0Rm9yZWlnbkludGVySW5kZXhdXSlcbiAgICAgICAgICAgIDogbnVsbDtcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIF5cbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICBuZXh0Rm9yZWlnbkludGVyXG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAgLy8gIC0tLXByZXZMb2NhbEludGVyLS0taW50ZXItLS1uZXh0TG9jYWxJbnRlci0tLT5cbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgICAgICAvLyAgICAgICAgICAgICAgICBwcmV2Rm9yZWlnbkludGVyXG4gICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICAgICAgY29uc3QgcGFydHMgPSB0aGlzLmJ1aWxkUGFydGlhbHNGcm9tUG9pbnRzKFxuICAgICAgICAgICAgaW50ZXIsIFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICBwcmV2TG9jYWxJbnRlcixcbiAgICAgICAgICAgICAgbmV4dEZvcmVpZ25JbnRlcixcbiAgICAgICAgICAgICAgbmV4dExvY2FsSW50ZXIsXG4gICAgICAgICAgICAgIHByZXZGb3JlaWduSW50ZXJcbiAgICAgICAgICAgIF1cbiAgICAgICAgICApO1xuICAgICAgICAgIHBhcnRpYWxzLnB1c2goLi4ucGFydHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdwYXJ0aWFscycsIHBhcnRpYWxzKTtcbiAgICByZXR1cm4gcGFydGlhbHM7XG4gIH1cbiAgYnVpbGRQb2x5Z29uc0Zyb21QYXJ0aWFscyhwYXJ0aWFsczogUG9seWdvbltdKTogUG9seWdvbltdIHtcbiAgICBjb25zdCBwb2x5Z29uczogUG9seWdvbltdID0gW107XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgcGFydGlhbHMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHBhcnRpYWxzLmxlbmd0aDsgaisrKcKge1xuICAgICAgICBpZiAoaSAhPT0gaikge1xuICAgICAgICAgIGlmICh0aGlzLnBhcnRpYWxzQXJlQ29ubmVjdGVkKHBhcnRpYWxzW2ldLCBwYXJ0aWFsc1tqXSkpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBcbiAgICAgICAgICAgIC8vICAgcGFydGlhbHNbaV06ICR7cGFydGlhbHNbaV0udG9TdHJpbmcoKX0sXG4gICAgICAgICAgICAvLyAgIHBhcnRpYWxzW2pdOiAke3BhcnRpYWxzW2pdLnRvU3RyaW5nKCl9LFxuICAgICAgICAgICAgLy8gYCk7XG4gICAgICAgICAgICBwYXJ0aWFsc1tpXS52ZXJ0aWNlcy5zcGxpY2UoLTIsIDIsIC4uLnBhcnRpYWxzW2pdLnZlcnRpY2VzKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBcbiAgICAgICAgICAgIC8vICAgcGFydGlhbHNbaV06ICR7cGFydGlhbHNbaV0udG9TdHJpbmcoKX0gW05FV10sXG4gICAgICAgICAgICAvLyBgKTtcbiAgICAgICAgICAgIHBhcnRpYWxzLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgIGlmIChqIDwgaSkge1xuICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJ0aWFsc0FyZUNvbm5lY3RlZChwYXJ0aWFsc1tpXSwgcGFydGlhbHNbaV0pKSB7XG4gICAgICAgICAgICAgIHBhcnRpYWxzW2ldLnZlcnRpY2VzLnNwbGljZSgwLCAyKTtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYFxuICAgICAgICAgICAgICAvLyAgIG5ldyBjb25uZWN0ZWQgcG9seWdvbjogJHtwYXJ0aWFsc1tpXS50b1N0cmluZygpfVxuICAgICAgICAgICAgICAvLyBgKTtcbiAgICAgICAgICAgICAgaWYgKHBhcnRpYWxzW2ldLmFyZWEoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBwb2x5Z29ucy5wdXNoKHBhcnRpYWxzW2ldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBwYXJ0aWFscy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRpYWxzW2ldLnZlcnRpY2VzWzBdLmVxdWFscyhwYXJ0aWFsc1tpXS52ZXJ0aWNlc1twYXJ0aWFsc1tpXS52ZXJ0aWNlcy5sZW5ndGggLSAxXSkpIHtcbiAgICAgICAgICAgICAgcGFydGlhbHNbaV0udmVydGljZXMucG9wKCk7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGBcbiAgICAgICAgICAgICAgLy8gICBuZXcgY2xvc2VkIHBvbHlnb246ICR7cGFydGlhbHNbaV0udG9TdHJpbmcoKX1cbiAgICAgICAgICAgICAgLy8gYCk7XG4gICAgICAgICAgICAgIGlmIChwYXJ0aWFsc1tpXS5hcmVhKCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgcG9seWdvbnMucHVzaChwYXJ0aWFsc1tpXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcGFydGlhbHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSA9IC0xO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpKys7XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdpbmNvbXBsZXRlIHBvbHlnb25zJyk7XG4gICAgLy8gcGFydGlhbHMubWFwKHAgPT4gY29uc29sZS5sb2cocC50b1N0cmluZygpKSk7XG4gICAgLy8gY29uc29sZS5sb2coJ3BvbHlnb25zJywgcG9seWdvbnMpO1xuICAgIHBvbHlnb25zLm1hcChwID0+IGNvbnNvbGUubG9nKHAudG9TdHJpbmcoKSkpO1xuICAgIHJldHVybiBwb2x5Z29ucztcbiAgfVxufVxuXG4vLyBjb25zdCBsaW5lczogTGluZVtdID0gW107XG4vLyBjb25zdCBpVGltZXM6IG51bWJlcltdW10gPSBbXTtcbi8vIGNvbnN0IGlQb2ludHM6IFZlY3RvcjJbXVtdID0gW107XG4vLyBbXG4vLyAgIFszMDAsIDMwMCwgNjAwLCA2MDBdLFxuLy8gICBbMzAwLCA2MDAsIDYwMCwgMzAwXSxcbi8vICAgWzQwMCwgMzAwLCAzMDAsIDQwMF0sXG4vLyAgIFs1MDAsIDYwMCwgNjAwLCA0MDBdLFxuLy8gICBbMzAwLCA1MDAsIDQwMCwgNjAwXSxcbi8vICAgWzUwMCwgNjAwLCA2MDAsIDQwMF0sXG4vLyBdLmZvckVhY2goKFt4MSwgeTEsIHgyLCB5Ml0pID0+IHtcbi8vICAgdGhpcy5hZGRJbnRlcnNlY3Rpb25UaW1lcyhsMSwgbGluZXMsIGlUaW1lcywgaVBvaW50cyk7XG4vLyAgIGxpbmVzLnB1c2gobDEpO1xuLy8gfSk7XG4vLyBjb25zdCBwYXJ0aWFscyA9IHRoaXMuYnVpbGRQYXJ0aWFsc0Zyb21JbnRlcnNlY3Rpb25UaW1lcyhsaW5lcywgaVRpbWVzKTtcbi8vIGNvbnNvbGUubG9nKHBhcnRpYWxzKTsiLCJpbXBvcnQgeyBDbGlja0hhbmRsZXIsIFBvbHBsb3RSZW5kZXJlciB9IGZyb20gXCIuL2ludGVyZmFjZXMvcG9scGxvdC1yZW5kZXJlclwiO1xuaW1wb3J0IHsgTGluZSB9IGZyb20gXCIuL2xpbmVcIjtcbmltcG9ydCB7IFBvbHlnb24gfSBmcm9tIFwiLi9wb2x5Z29uXCI7XG5pbXBvcnQgeyBWZWN0b3IyIH0gZnJvbSBcIi4vdmVjdG9yMlwiO1xuXG5jb25zdCBnVGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKTtcbmdUZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdibGFjaycpO1xuZ1RlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzAuNHB4Jyk7XG5cbmNvbnN0IGxpbmVUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnbGluZScpO1xubGluZVRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLWRhc2hhcnJheScsICcxMCwgNCwgMSwgNCcpO1xuXG5jb25zdCBhbmNob3JUZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xuYW5jaG9yVGVtcGxhdGUuc2V0QXR0cmlidXRlKFxuICAnZCcsXG4gICdNIDAsIDAnICtcbiAgJ0EgMTAsIDEwLCAwLCAwLCAwLCAtNSwgLTUnICsgXG4gICdBIDEwLCAxMCwgMCwgMSwgMSwgNSwgLTUnICtcbiAgJ0EgMTAsIDEwLCAwLCAwLCAwLCAwLCAwJ1xuKTtcbmFuY2hvclRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnZmlsbCcsICd3aGl0ZScpO1xuXG5nVGVtcGxhdGUuYXBwZW5kQ2hpbGQobGluZVRlbXBsYXRlKTtcbmdUZW1wbGF0ZS5hcHBlbmRDaGlsZChhbmNob3JUZW1wbGF0ZSk7XG5nVGVtcGxhdGUuYXBwZW5kQ2hpbGQoYW5jaG9yVGVtcGxhdGUuY2xvbmVOb2RlKCkpO1xuXG5jb25zdCBwb2ludFRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdjaXJjbGUnKTtcbnBvaW50VGVtcGxhdGUuc2V0QXR0cmlidXRlKCdmaWxsJywgJ2dyZWVuJyk7XG5wb2ludFRlbXBsYXRlLnNldEF0dHJpYnV0ZSgncicsICczJyk7XG5cbmNvbnN0IHBvbHlnb25UZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAncGF0aCcpO1xucG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnZmlsbCcsICdncmVlbicpO1xucG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5JywgJzAuNycpO1xucG9seWdvblRlbXBsYXRlLnNldEF0dHJpYnV0ZSgnc3Ryb2tlLXdpZHRoJywgJzMnKTtcbnBvbHlnb25UZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICdncmV5Jyk7XG5cbmV4cG9ydCBjbGFzcyBTdmdSZW5kZXJlciBpbXBsZW1lbnRzIFBvbHBsb3RSZW5kZXJlciB7XG4gIHJlYWRvbmx5IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJyk7XG4gIHByaXZhdGUgaW50ZXJzZWN0aW9uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdnJyk7XG4gIHByaXZhdGUgcG9seWdvbkNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnZycpO1xuICBwcml2YXRlIHN2Z0dCeUxpbmUgPSBuZXcgTWFwPExpbmUsIFNWR0dFbGVtZW50PigpO1xuICBwcml2YXRlIGxpbmVCeVN2Z0cgPSBuZXcgTWFwPFNWR0dFbGVtZW50LCBMaW5lPigpO1xuICBwcml2YXRlIG9uTW91c2VEb3duOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IGFueTtcbiAgcHJpdmF0ZSBvbk1vdXNlVXA6IChldmVudDogTW91c2VFdmVudCkgPT4gYW55O1xuICBwcml2YXRlIG9uTW91c2VNb3ZlOiAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IGFueTtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5zdmcuYXBwZW5kQ2hpbGQodGhpcy5pbnRlcnNlY3Rpb25Db250YWluZXIpO1xuICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHRoaXMucG9seWdvbkNvbnRhaW5lcik7XG4gIH1cbiAgY2xpY2tIYW5kbGVyV3JhcHBlcihjbGlja0hhbmRsZXI6IENsaWNrSGFuZGxlcik6IChldmVudDogTW91c2VFdmVudCkgPT4gYW55IHtcbiAgICByZXR1cm4gZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudEF0ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChldmVudC5jbGllbnRYLCBldmVudC5jbGllbnRZKTtcbiAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmxpbmVCeVN2Z0cuZ2V0KGVsZW1lbnRBdC5wYXJlbnROb2RlIGFzIFNWR0dFbGVtZW50KTtcbiAgICAgIGlmIChlbGVtZW50QXQgaW5zdGFuY2VvZiBTVkdQYXRoRWxlbWVudCAmJiBlbGVtZW50QXQucGFyZW50Tm9kZSAhPT0gdGhpcy5wb2x5Z29uQ29udGFpbmVyKSB7XG4gICAgICAgIGlmIChlbGVtZW50QXQucGFyZW50Tm9kZS5jaGlsZHJlblsxXSA9PT0gZWxlbWVudEF0KSB7XG4gICAgICAgICAgY2xpY2tIYW5kbGVyKGV2ZW50LCBsaW5lLCBsaW5lLnYxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGlja0hhbmRsZXIoZXZlbnQsIGxpbmUsIGxpbmUudjIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnRBdCBpbnN0YW5jZW9mIFNWR0xpbmVFbGVtZW50KSB7XG4gICAgICAgIGNsaWNrSGFuZGxlcihldmVudCwgbGluZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGlja0hhbmRsZXIoZXZlbnQpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgc2V0TW91c2VEb3duSGFuZGxlcihjbGlja0hhbmRsZXI6IENsaWNrSGFuZGxlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLm9uTW91c2VEb3duKSB7XG4gICAgICB0aGlzLnN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICB9XG4gICAgdGhpcy5vbk1vdXNlRG93biA9IHRoaXMuY2xpY2tIYW5kbGVyV3JhcHBlcihjbGlja0hhbmRsZXIpO1xuICAgIHRoaXMuc3ZnLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25Nb3VzZURvd24pO1xuICB9XG4gIHNldE1vdXNlVXBIYW5kbGVyKGNsaWNrSGFuZGxlcjogQ2xpY2tIYW5kbGVyKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub25Nb3VzZVVwKSB7XG4gICAgICB0aGlzLnN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbk1vdXNlVXApO1xuICAgIH1cbiAgICB0aGlzLm9uTW91c2VVcCA9IHRoaXMuY2xpY2tIYW5kbGVyV3JhcHBlcihjbGlja0hhbmRsZXIpO1xuICAgIHRoaXMuc3ZnLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm9uTW91c2VVcCk7XG4gIH1cbiAgc2V0TW91c2VNb3ZlSGFuZGxlcihjbGlja0hhbmRsZXI6IENsaWNrSGFuZGxlcik6IHZvaWQge1xuICAgIGlmICh0aGlzLm9uTW91c2VNb3ZlKSB7XG4gICAgICB0aGlzLnN2Zy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICB9XG4gICAgdGhpcy5vbk1vdXNlTW92ZSA9IHRoaXMuY2xpY2tIYW5kbGVyV3JhcHBlcihjbGlja0hhbmRsZXIpO1xuICAgIHRoaXMuc3ZnLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25Nb3VzZU1vdmUpO1xuICB9XG4gIGRyYXdMaW5lKGxpbmU6IExpbmUsIGlzSG92ZXJlZCA9IGZhbHNlLCBpc1NlbGVjdGVkID0gZmFsc2UpOiB2b2lkIHtcbiAgICBsZXQgc3ZnRzogU1ZHR0VsZW1lbnQ7XG4gICAgaWYgKCF0aGlzLnN2Z0dCeUxpbmUuaGFzKGxpbmUpKSB7XG4gICAgICBzdmdHID0gZ1RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKSBhcyBTVkdHRWxlbWVudDtcbiAgICAgIHRoaXMuc3ZnLmFwcGVuZENoaWxkKHN2Z0cpO1xuICAgICAgdGhpcy5zdmdHQnlMaW5lLnNldChsaW5lLCBzdmdHKTtcbiAgICAgIHRoaXMubGluZUJ5U3ZnRy5zZXQoc3ZnRywgbGluZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN2Z0cgPSB0aGlzLnN2Z0dCeUxpbmUuZ2V0KGxpbmUpO1xuICAgIH1cbiAgICBjb25zdCBzdmdMaW5lID0gc3ZnRy5jaGlsZHJlblswXSBhcyBTVkdMaW5lRWxlbWVudDtcbiAgICBjb25zdCBzdmdQYXRoQW5jaG9yU3RhcnQgPSBzdmdHLmNoaWxkcmVuWzFdIGFzIFNWR1BhdGhFbGVtZW50O1xuICAgIGNvbnN0IHN2Z1BhdGhBbmNob3JFbmQgPSBzdmdHLmNoaWxkcmVuWzJdIGFzIFNWR1BhdGhFbGVtZW50O1xuICAgIGNvbnN0IHgxID0gbGluZS54MS50b0ZpeGVkKCk7XG4gICAgY29uc3QgeTEgPSBsaW5lLnkxLnRvRml4ZWQoKTtcbiAgICBjb25zdCB4MiA9IGxpbmUueDIudG9GaXhlZCgpO1xuICAgIGNvbnN0IHkyID0gbGluZS55Mi50b0ZpeGVkKCk7XG4gICAgc3ZnTGluZS5zZXRBdHRyaWJ1dGUoJ3gxJywgeDEpO1xuICAgIHN2Z0xpbmUuc2V0QXR0cmlidXRlKCd5MScsIHkxKTtcbiAgICBzdmdMaW5lLnNldEF0dHJpYnV0ZSgneDInLCB4Mik7XG4gICAgc3ZnTGluZS5zZXRBdHRyaWJ1dGUoJ3kyJywgeTIpO1xuICAgIGlmIChpc0hvdmVyZWQpIHtcbiAgICAgIHN2Z0cuc2V0QXR0cmlidXRlKCdzdHJva2Utd2lkdGgnLCAnMC44cHgnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsICcwLjRweCcpO1xuICAgIH1cbiAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgc3ZnRy5zZXRBdHRyaWJ1dGUoJ3N0cm9rZScsICcjMTlhMTk0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN2Z0cuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAnYmxhY2snKTtcbiAgICB9XG4gICAgY29uc3QgYW5nbGUgPSAxODAgKiAobGluZS52Mi5zdWIobGluZS52MSkuYW5nbGUoKSAtIE1hdGguUEkgLyAyKSAvIE1hdGguUEk7XG4gICAgc3ZnUGF0aEFuY2hvclN0YXJ0LnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSgke3gxfSwgJHt5MX0pIHJvdGF0ZSgke2lzTmFOKGFuZ2xlKSA/IDAgOiBhbmdsZX0pYCk7XG4gICAgc3ZnUGF0aEFuY2hvckVuZC5zZXRBdHRyaWJ1dGUoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoJHt4Mn0sICR7eTJ9KSByb3RhdGUoJHtpc05hTihhbmdsZSkgPyAwIDogMTgwICsgYW5nbGV9KWApO1xuICB9XG4gIGVyYXNlTGluZShsaW5lOiBMaW5lKTogdm9pZCB7XG4gICAgY29uc3Qgc3ZnRyA9IHRoaXMuc3ZnR0J5TGluZS5nZXQobGluZSk7XG4gICAgaWYgKHN2Z0cpIHtcbiAgICAgIHRoaXMuc3ZnLnJlbW92ZUNoaWxkKHN2Z0cpO1xuICAgICAgdGhpcy5zdmdHQnlMaW5lLmRlbGV0ZShsaW5lKTtcbiAgICB9XG4gIH1cbiAgZHJhd1BvaW50KHBvaW50OiBWZWN0b3IyKTogdm9pZCB7XG4gICAgY29uc3Qgc3ZnQ2lyY2xlID0gcG9pbnRUZW1wbGF0ZS5jbG9uZU5vZGUoKSBhcyBTVkdDaXJjbGVFbGVtZW50O1xuICAgIHN2Z0NpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N4JywgcG9pbnQueC50b0ZpeGVkKCkpO1xuICAgIHN2Z0NpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N5JywgcG9pbnQueS50b0ZpeGVkKCkpO1xuICAgIHRoaXMuaW50ZXJzZWN0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHN2Z0NpcmNsZSk7XG4gIH1cbiAgcHJpdmF0ZSBjbGVhckNvbnRhaW5lcihjb250YWluZXI6IFNWR0dFbGVtZW50KTogdm9pZCB7XG4gICAgd2hpbGUgKGNvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmZpcnN0Q2hpbGQpO1xuICAgIH1cbiAgfVxuICBjbGVhckludGVyc2VjdGlvbnMoKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhckNvbnRhaW5lcih0aGlzLmludGVyc2VjdGlvbkNvbnRhaW5lcik7XG4gIH1cbiAgZHJhd1BvbHlnb24ocG9seWdvbjogUG9seWdvbik6IHZvaWQge1xuICAgIGNvbnN0IHN2Z1BhdGggPSBwb2x5Z29uVGVtcGxhdGUuY2xvbmVOb2RlKCkgYXMgU1ZHUGF0aEVsZW1lbnQ7XG4gICAgc3ZnUGF0aC5zZXRBdHRyaWJ1dGUoJ2QnLCAnTSAnICsgcG9seWdvbi52ZXJ0aWNlcy5tYXAodiA9PiBgJHt2LngudG9GaXhlZCgpfSAke3YueS50b0ZpeGVkKCl9YCkuam9pbignIEwgJykgKyAnWicpO1xuICAgIHN2Z1BhdGguc2V0QXR0cmlidXRlKCdmaWxsJywgJyMnICsgKE1hdGguZmxvb3IoKDE2Nzc3MjE1IC0gMWU1KSAqIE1hdGgucmFuZG9tKCkpICsgMWU1KS50b1N0cmluZygxNikpO1xuICAgIHRoaXMucG9seWdvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzdmdQYXRoKTtcbiAgfVxuICBjbGVhclBvbHlnb25zKCk6IHZvaWQge1xuICAgIHRoaXMuY2xlYXJDb250YWluZXIodGhpcy5wb2x5Z29uQ29udGFpbmVyKTtcbiAgfVxufSIsImltcG9ydCB7IFBvbHBsb3QgfSBmcm9tIFwiLi9wb2xwbG90XCI7XG5pbXBvcnQgeyBTdmdSZW5kZXJlciB9IGZyb20gXCIuL3N2Zy1yZW5kZXJlclwiO1xuXG5jb25zdCBzdmdSZW5kZXJlciA9IG5ldyBTdmdSZW5kZXJlcigpO1xuY29uc3QgcG9scGxvdCA9IG5ldyBQb2xwbG90KHN2Z1JlbmRlcmVyKTtcbmNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5ib2R5LmFwcGVuZENoaWxkKHN2Z1JlbmRlcmVyLnN2Zyk7Il0sInNvdXJjZVJvb3QiOiIifQ==